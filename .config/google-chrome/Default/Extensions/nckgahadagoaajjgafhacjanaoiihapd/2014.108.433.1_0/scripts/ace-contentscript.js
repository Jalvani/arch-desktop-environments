(function(){var k=this,l=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},m=function(a){return"string"==typeof a},aa=function(a,b,c){return a.call.apply(a.bind,arguments)},ba=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},n=function(a,b,c){n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?
aa:ba;return n.apply(null,arguments)},ca=Date.now||function(){return+new Date},p=function(a,b){function c(){}c.prototype=b.prototype;a.i=b.prototype;a.prototype=new c;a.u=function(a,c,f){var g=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,g)}};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return n.apply(null,c)}return n(this,a)};var q=function(a,b){return a<b?-1:a>b?1:0};var r=Array.prototype,da=r.indexOf?function(a,b,c){return r.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(m(a))return m(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var s=function(a){try{this.n=window[a]}catch(b){this.n=null}},ea=new s("sessionStorage");s.prototype.set=function(a,b){if(this.n){var c={};c.data=b;c.timestamp=ca();c=JSON.stringify(c);try{this.n.setItem(a,c)}catch(d){}}};var t,u,v,w,x=function(){return k.navigator?k.navigator.userAgent:null};w=v=u=t=!1;var y;if(y=x()){var fa=k.navigator;t=0==y.lastIndexOf("Opera",0);u=!t&&(-1!=y.indexOf("MSIE")||-1!=y.indexOf("Trident"));v=!t&&-1!=y.indexOf("WebKit");w=!t&&!v&&!u&&"Gecko"==fa.product}var B=t,C=u,D=w,E=v,F=function(){var a=k.document;return a?a.documentMode:void 0},G;
t:{var H="",I;if(B&&k.opera)var J=k.opera.version,H="function"==typeof J?J():J;else if(D?I=/rv\:([^\);]+)(\)|;)/:C?I=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:E&&(I=/WebKit\/(\S+)/),I)var K=I.exec(x()),H=K?K[1]:"";if(C){var L=F();if(L>parseFloat(H)){G=String(L);break t}}G=H}
var M=G,ga={},N=function(a){var b;if(!(b=ga[a])){b=0;for(var c=String(M).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",va=RegExp("(\\d*)(\\D*)","g"),wa=RegExp("(\\d*)(\\D*)","g");do{var z=va.exec(g)||["","",""],A=wa.exec(h)||["","",""];if(0==z[0].length&&0==A[0].length)break;b=q(0==z[1].length?0:parseInt(z[1],10),0==A[1].length?0:parseInt(A[1],10))||q(0==z[2].length,
0==A[2].length)||q(z[2],A[2])}while(0==b)}b=ga[a]=0<=b}return b},ha=k.document,ia=ha&&C?F()||("CSS1Compat"==ha.compatMode?parseInt(M,10):5):void 0;!D&&!C||C&&C&&9<=ia||D&&N("1.9.1");C&&N("9");var ja=function(a){var b=document;return m(a)?b.getElementById(a):a};var O=function(){};O.prototype.o=!1;O.prototype.m=function(){this.o||(this.o=!0,this.c())};O.prototype.c=function(){if(this.p)for(;this.p.length;)this.p.shift()()};var P=function(a){P[" "](a);return a};P[" "]=function(){};var ka=!C||C&&9<=ia,la=C&&!N("9");!E||N("528");D&&N("1.9b")||C&&N("8")||B&&N("9.5")||E&&N("528");D&&!N("8")||C&&N("9");var Q=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.q=!1};Q.prototype.c=function(){};Q.prototype.m=function(){};Q.prototype.preventDefault=function(){this.defaultPrevented=!0};var R=function(a,b){Q.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.k=this.state=null;if(a){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(D){var e;t:{try{P(d.nodeName);e=!0;break t}catch(f){}e=!1}e||(d=null)}}else"mouseover"==
c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=E||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=E||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=
a.metaKey;this.state=a.state;this.k=a;a.defaultPrevented&&this.preventDefault()}};p(R,Q);R.prototype.preventDefault=function(){R.i.preventDefault.call(this);var a=this.k;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,la)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};R.prototype.c=function(){};var ma="closure_listenable_"+(1E6*Math.random()|0),na=function(a){try{return!(!a||!a[ma])}catch(b){return!1}},oa=0;var pa=function(a,b,c,d,e){this.d=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.f=e;this.key=++oa;this.removed=this.g=!1},S=function(a){a.removed=!0;a.d=null;a.proxy=null;a.src=null;a.f=null};var T=function(a){this.src=a;this.a={};this.e=0};T.prototype.add=function(a,b,c,d,e){var f=this.a[a];f||(f=this.a[a]=[],this.e++);var g;t:{for(g=0;g<f.length;++g){var h=f[g];if(!h.removed&&h.d==b&&h.capture==!!d&&h.f==e)break t}g=-1}-1<g?(a=f[g],c||(a.g=!1)):(a=new pa(b,this.src,a,!!d,e),a.g=c,f.push(a));return a};T.prototype.removeAll=function(a){var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,S(d[e]);delete this.a[c];this.e--}return b};var U="closure_lm_"+(1E6*Math.random()|0),V={},qa=0,W=function(a,b,c,d,e){if("array"==l(b)){for(var f=0;f<b.length;f++)W(a,b[f],c,d,e);return null}c=ra(c);if(na(a))a=a.listen(b,c,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=X(a);g||(a[U]=g=new T(a));c=g.add(b,c,!1,d,e);c.proxy||(d=sa(),c.proxy=d,d.src=a,d.d=c,a.addEventListener?a.addEventListener(b,d,f):a.attachEvent(b in V?V[b]:V[b]="on"+b,d),qa++);a=c}return a},sa=function(){var a=ta,b=ka?function(c){return a.call(b.src,b.d,c)}:
function(c){c=a.call(b.src,b.d,c);if(!c)return c};return b},ua=function(a){if("number"==typeof a||!a||a.removed)return!1;var b=a.src;if(na(b))return b.t(a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(c in V?V[c]:V[c]="on"+c,d);qa--;if(c=X(b)){var d=a.type,e;if(e=d in c.a){e=c.a[d];var f=da(e,a),g;(g=0<=f)&&r.splice.call(e,f,1);e=g}e&&(S(a),0==c.a[d].length&&(delete c.a[d],c.e--));0==c.e&&(c.src=null,b[U]=null)}else S(a);return!0},
ya=function(a,b,c,d){var e=1;if(a=X(a))if(b=a.a[b]){a=b.length;if(0<a){for(var f=Array(a),g=0;g<a;g++)f[g]=b[g];b=f}else b=[];for(a=0;a<b.length;a++)(f=b[a])&&f.capture==c&&!f.removed&&(e&=!1!==xa(f,d))}return Boolean(e)},xa=function(a,b){var c=a.d,d=a.f||a.src;a.g&&ua(a);return c.call(d,b)},ta=function(a,b){if(a.removed)return!0;if(!ka){var c;if(!(c=b))t:{c=["window","event"];for(var d=k,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break t}c=d}e=c;c=new R(e,this);d=!0;if(!(0>e.keyCode||void 0!=
e.returnValue)){t:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(g){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,h=e.length-1;!c.q&&0<=h;h--)c.currentTarget=e[h],d&=ya(e[h],f,!0,c);for(h=0;!c.q&&h<e.length;h++)c.currentTarget=e[h],d&=ya(e[h],f,!1,c)}return d}return xa(a,new R(b,this))},X=function(a){a=a[U];return a instanceof T?a:null},za="__closure_events_fn_"+(1E9*Math.random()>>>0),ra=function(a){return"function"==
l(a)?a:a[za]||(a[za]=function(b){return a.handleEvent(b)})};var Y=function(a){this.s=a;this.l={}};p(Y,O);var Aa=[];Y.prototype.listen=function(a,b,c,d){"array"!=l(b)&&(Aa[0]=b,b=Aa);for(var e=0;e<b.length;e++){var f=W(a,b[e],c||this.handleEvent,d||!1,this.s||this);if(!f)break;this.l[f.key]=f}return this};Y.prototype.removeAll=function(){var a=this.l,b;for(b in a)ua.call(void 0,a[b]);this.l={}};Y.prototype.c=function(){Y.i.c.call(this);this.removeAll()};Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var Z=function(a){Y.call(this);this.j=a;this.h=n(this.r,this);Ba(this,"centralJidListener");this.listen(this.j,"centralJidSet getCentralJid mmm ocbek ocfp showChat".split(" "),this);chrome.runtime.sendMessage({msg:"onContentPageLoaded"});ea.set("hasExtension",!0)},$;p(Z,Y);Z.prototype.c=function(){Z.i.c.call(this);Ca(this);delete this.h;delete this.j};
var Ea=function(){var a=ja("roster_comm_link")||ja("mainElement");a&&($=new Z(a),W(window,"unload",Da))},Da=function(){var a=$;a&&"function"==typeof a.m&&a.m();$=null};
Z.prototype.handleEvent=function(a){var b=a.k;a=b.type;switch(a){case "getCentralJid":case "ocbek":case "ocfp":case "showChat":this.b&&"centralJidListener"==this.b.name&&(b=m(b.data)?{jid:b.data}:b.data,b.msg=a,chrome.runtime.sendMessage(b));break;case "mmm":b=m(b.data.jid)?JSON.parse(b.data.jid):[];chrome.runtime.sendMessage({msg:a,params:b});break;case "centralJidSet":Ba(this,"centralJidBroadcaster"),this.b.postMessage({jid:b.data})}};
Z.prototype.r=function(a){var b=a.eventType;delete a.eventType;a=void 0!==a.ttl?a:a.jid;var c=document.createEvent("MessageEvent");c.initMessageEvent(b,!0,!0,a);this.j.dispatchEvent(c)};var Ba=function(a,b){Ca(a);a.b=chrome.runtime.connect({name:b});a.b.onMessage.addListener(a.h)},Ca=function(a){a.b&&(a.b.onMessage.removeListener(a.h),a.b.disconnect(),delete a.b)};"complete"===document.readyState||"interactive"===document.readyState?Ea():W(window,"DOMContentLoaded",Ea);})()

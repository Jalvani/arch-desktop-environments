var isCorsSupported=_eb0af7d866381401dcf9a07532f89aed7ad10e45ae20365483a1922da98536998a3e069e916b2b90(),contactsOAuthClientID="82288362851-h3jq02v23ctb7012e8bher02un8fk6n2.apps.googleusercontent.com",dest_num="",signInUrl=baseUrl+"/signin?continue_web= "+location.href,signOutUrl=baseUrl+"/signout?continue_web= "+location.href,newContactsOAuthURL="https://accounts.google.com/o/oauth2/auth?client_id="+contactsOAuthClientID+"&redirect_uri="+baseUrl+"/contacts-sync&scope=https://www.google.com/m8/feeds/&response_type=code&access_type=offline&approval_prompt=force",
global_oauth_contacts_token="gcontacts_token_placeholder",globalContactsRefreshCacheQueue=[],globalQueueContactImagesToFetch=[],globalPHONEContactsRefreshCacheQueue=[],contactsFromPhoneGlobal=[],global_time_last_CAPI_msg_received_webapp=new Date-6E5,current_server_stored_google_contacts_token=void 0,alertFallback=!1;if("undefined"===typeof console||"undefined"===typeof console.log)console={},console.log=alertFallback?function(a){alert(a)}:function(){};
var googleContactsArray=null,searchAutocompleteArray=null,newBestGoogleContactsArray=null,newBestGoogleContactsArray=[],inWebAppGlobalNotifArray=[];function _1ba3e20aafd6ecb913e8a6c1e74a0c5a9a1bd212e5b04e8f96bcc15ec5629ac6fcc1bfff00a089a5(){var a=inWebAppGlobalNotifArray.shift(this);console.log("---");console.log(a);a.cancel()}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",
identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",
identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();
function _b486502f6d8a3bcdc5da35f22b1be480d1f8abfdd3cce3cd96bd14201115ac32a158e5c495853c5a(a){var b=window.location.pathname;-1<b.search("dev")||-1<b.search("IEEEE-DEV")?(b="",-1<location.hash.search("0-")&&(b=" ("+location.hash.substr(1)+")"),_b82ab02eb52822c110ad078f6281a3a1472fc40c917da7fd9bf8ca11489aa8c816947e56c02cefd1(a),$("#debug-environment-text").show().text("DEV"+b),$("#top-header").css("background","#2d3038")):-1<b.search("staging")&&(_b82ab02eb52822c110ad078f6281a3a1472fc40c917da7fd9bf8ca11489aa8c816947e56c02cefd1(a),
$("#debug-environment-text").show().text("STAGING"),$("#top-header").css("background","yellow"))}
function _b8062ce1ad809ea151818d9de93047563c5d1f647dee7958f02baec0162ee54962a1f7df151a89b0(){if(window.webkitNotifications){var a=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png","Bootup test subject","test content");a.onclick=function(a){window.focus();this.cancel()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _a5567f5ace5a8fcbc1754c3e72f41e18c7ff3a39176f4e6f47ddb6403c3ea7bc1ad351bb179eba3e(){if(window.webkitNotifications){var a=window.webkitNotifications.createHTMLNotification("test-notification.html#1");a.onclick=function(a){window.focus()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _c676b3e91561699859aa20e335df3937754768a8aeef731687bd499e74382a4a880e1b1c36f83938(){"Firefox"==BrowserDetect.browser&&0!=window.webkitNotifications.checkPermission()&&$("#request_html_notif_permission").show()}function _e3176ceb5ee5c61a5df32a9f2dfc7a4124273c83b3138eb871419a1b90f7f275251f38b8ee2ae5bd(){1>$("#send-one-text").val().length?alert("Error: Message is blank"):_f6a7c7cd8b516513d221101b6751309b0f957c5dbabae1e79eb2a7e338229387dbdaa33d4684d012()}
function _4c5752e054a2632e13e58f18b0550b3ea6b84f62764ce6668df3ee44d80e3478312a3f81197ae82f(a,b,c){var d=baseUrl+"/content?function=deleteMessagesByMsgID",d=d+("&id="+encodeURIComponent(a));console.log(d);var e="#sms-line-item-msgid-"+a;$.ajax({url:d,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){console.log(a);console.log(a.num_deleted);if(1!=a.num_deleted)alert("Error - Message not Deleted. Please report to MightyText team (Error Code: DT56)");else if($(e).fadeOut(400,
function(){$(this).remove();document.getElementById("msg").innerHTML="Deleted Message";_gaq.push(["_trackEvent","WebApp","Delete-Message-Single","",1])}),10==c||11==c)a="#thread-count-live-updated-"+b,1==parseInt($(a).text())?_b2a10bfd988bd288a83940f5a35bd29b331e2a3eb7dd22cb9e1d2d6179a4067575b1257a91814b7b(b):$(a).text(parseInt($(a).text())-1)}})}
function _b2a10bfd988bd288a83940f5a35bd29b331e2a3eb7dd22cb9e1d2d6179a4067575b1257a91814b7b(a){$("#"+a).parent().fadeOut(600,function(){$(this).remove()});_86e45313538ef0607d402d36647189f3abfd7c014cd2b8a202de26c1477eb5795bb7921d3bc66a0a()}
function _0abd17084151c29148c0fd65fd6c6a5a09754d5ca220684e782a74375c752833a4cc0c9a108d9f05(a,b){var c=$("ul#tabs-phone-threads li:first");console.log(c);c="#"+a;if(0<$(c).length){console.log("it is an existing thread, now check if that thread is already at top");var d=$(c).parent();console.log(d);$("ul#tabs-phone-threads li:first a").attr("id")!=a?($(c).parent().prependTo("#tabs-phone-threads").hide().slideDown(),$(c).hide().show("highlight",{color:"#F9EEC0"},2E3),setTimeout(_d54cc71b140f61fe5cc0fa3eca81ccd60e42fac13028f51407d83338f72f994bc283572452a877de,
200)):console.log("thread is already at the top -- don't move thread/tabs at all")}else _4ad2698e2e1381cd12ab3df47508f9613ca0adedad61a80969d7003e4fad28861fee4a47c3829f50(a,b)}
function _4ad2698e2e1381cd12ab3df47508f9613ca0adedad61a80969d7003e4fad28861fee4a47c3829f50(a,b){var c="",d="img/silhouette.jpg",e=!1;global_oauth_contacts_token&&(e=!0);console.log("phone_num_clean, right before jstorage get call is: "+a);var g=[];0!=a&&(g=$.jStorage.get(a,"no-jstorage-val-found"));g.name?(c=g.name,console.log(a+" - Local Storage contact match to name: "+c),""!=g.thumbnail_image_google_base_url&&(d=g.thumbnail_image_google_base_url+"&oauth_token="+global_oauth_contacts_token),g=_1e9fbc18ca5ec5b21ce15543b1330e1e2441224c3c5174b71d24aa217f93fc1b7439c1ee25e11556()-
g.time_stored,21600<g&&e&&(console.log("should refresh local contact cache for "+a+" -- seconds old: "+g),globalContactsRefreshCacheQueue.unshift(a),setTimeout(_95d3edce2b6861ad17dfa204eb3010a3fb658c9bd15fdeb82334b0c3d6d598c5858417681197888b,100))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call _c16fabed31187524afaa97b16dbbb3bca5f5a315c0814343bfc82b2b2cec6bd4ff4927a5cf2aa09f"),c=b,e&&(globalContactsRefreshCacheQueue.unshift(a),setTimeout(_95d3edce2b6861ad17dfa204eb3010a3fb658c9bd15fdeb82334b0c3d6d598c5858417681197888b,
100)));c='<li id="tabNEW-'+a+'" class="ui-state-default ui-corner-top">'+('<a title="'+b+'" id="'+a+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+a+'" class="threadnamenumber">'+c+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+a+'">1</span>)<br> <span id="timestamp-last-msg">'+_0c800fd990afaa098e2b4c4a8e59f273d3cdb66372a63f72e856d8ded49ee65077238a4ec8b5b453DisplayPurposes(new Date,!1)+"</span></span></span>");
c+='<img id="thumbnail-if-known-'+a+'" class="g-thumb-image-load-now" style="margin-right:0px;float:right" width=45 height=45 src="'+d+'"> </a></li>';setTimeout(_d54cc71b140f61fe5cc0fa3eca81ccd60e42fac13028f51407d83338f72f994bc283572452a877de,200);$(c).prependTo("#tabs-phone-threads").hide().slideDown()}
function _d54cc71b140f61fe5cc0fa3eca81ccd60e42fac13028f51407d83338f72f994bc283572452a877de(){$("#resultholder").tabs({add:function(a,b){console.log(a)}});$("#tabs-phone-threads").scrollTo("0%",400)}
function _f7122ff8358b1a1626eeaac57a69247cb13f945a6d333d16dbadc4a10293c08bbd7d6e6d19be81ff(a){var b=baseUrl+"/content?function=deleteMessagesByPhoneNum",b=b+("&phone_num_clean="+encodeURIComponent(a));console.log(b);$.ajax({url:b,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(b){0<b.num_deleted?(document.getElementById("msg").innerHTML="Deleted Thread. Number of messages deleted: "+b.num_deleted,_gaq.push(["_trackEvent","WebApp","Delete-Entire-Thread","WebAppPageView",
b.num_deleted]),_b2a10bfd988bd288a83940f5a35bd29b331e2a3eb7dd22cb9e1d2d6179a4067575b1257a91814b7b(a)):alert("Error - Message Thread Not Deleted. Please try again. If it continues, please report to MightyText team (Error Code: TRDLT79)")}})}
function _86e45313538ef0607d402d36647189f3abfd7c014cd2b8a202de26c1477eb5795bb7921d3bc66a0a(){$("#sms-thread-content").empty();$("#thread-heading-name").empty();$("#sendbox-main").val("");$("#charsLeft-main").text("500");$("#thread-heading-actions").hide();$("#inputsms-main").hide();$("#mms-image-preview").hide();$("#mms-image-preview").attr("src","");$("#mms-blob-id-holder").text("")}
function _470d0873cc9b1ae26ac0580a3deb2efc620ab4aad968a767646085e6d1c1daebd04a1905adb0ad0c(a){var b="",b=$("#compose-single-text")[0]?"#send-one-text":"#sendbox-main";if(0<$(b).val().length){if(1==a)return!0;if(!confirm("You've typed text that you haven't sent. Are you sure you want to leave this page before sending this message?"))return $(b).focus(),!0}return!1}
function _2008f96b5be016533b795cd5934710aaa8ed472db74f5ee9461495ba5ca4c72a7108a23904c27a05(a,b){console.log("Generating Tabs...");$(function(){$("#resultholder").tabs({selected:a,ajaxOptions:{error:function(a,b,e,g){$(g.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});console.log("JUST SET UP TABS");b||setTimeout("_bb1f70b20ac2e5e99dc9d0ec46cb11604cd11c911ac50171f4bfe8fb94e614933b2ec21e22462d47();",2500);setTimeout("getAllMessagesForSearch();",1E3);setTimeout("_342ea311c4b67ce6f849f9855b2c2cab3d1297929e434fbc18017b851fbe8eda491f202f583e9d7a();",
2E3);dynamic_content_load()});$("#resultholder").bind("tabsselect",function(a,b){var e=b.index+1;_gaq.push(["_trackEvent","WebApp","Thread-Tab-Click-Position","tab-click-position-"+e,e]);if(!$("#settingsPane")[0]&&_470d0873cc9b1ae26ac0580a3deb2efc620ab4aad968a767646085e6d1c1daebd04a1905adb0ad0c())return!1;if($("#compose-single-text")[0]||$("#settingsPane")[0])e=b.index,_d7879a5e1d9d34f0a376f330d569e5056e9d13a8ebe35006bbca824e3752728a4b84618c476ae97f(),$("#resultholder").tabs("disable"),$("#resultholder").tabs("destroy"),
$("#resultholder").tabs({selected:e,ajaxOptions:{error:function(a,b,c,d){$(d.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0"}});document.getElementById("msg").innerHTML="";var g=b.tab.title,f=b.tab.id;console.log("TAB SELECT triggered...");var k=$("#name-if-known-"+f).text();_78ff22c6aeb3c34c8832e5f4268e33204d9a627de77f722f7f442edc2952c99df5ee445a3d913d72(f,
"END",k);_86e45313538ef0607d402d36647189f3abfd7c014cd2b8a202de26c1477eb5795bb7921d3bc66a0a();$("#thread-heading-name").text("");$("#thread-heading-actions").show();$("#inputsms-main").show();document.getElementById("send-button-main").onclick=function(){_gaq.push(["_trackEvent","WebApp","Send-Message-Reply-In-Thread-Click","",1]);var a;a=0==$("#mms-blob-id-holder").text().length;_03bea6486e9232b2f6e393fdcb2bcbe64a3720e3279f3bd62bfd2e9493a5df9f7686836a85b3c403(a)&&($("#send-button-main").css({background:"lightgrey",
color:"grey"}),$("#send-button-main").html("Sending\u2026"),$("#send-button-main").attr("disabled",!0),a?_58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1("send_sms","reply-thread-window",g,f,k,"_a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182"):_58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1("send_mms","reply-thread-window",g,f,k,"_a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182",
-999,$("#mms-blob-id-holder").text()))};document.getElementById("remote-phone-dial").onclick=function(){document.getElementById("remote-phone-dial").innerHTML="Calling from your phone...";_58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1("make_automated_call","NA",g,f,k,"_a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182")};document.getElementById("delete-all-from-sender").onclick=function(){confirm("Are you sure you want to delete ALL messages for "+
g+"?")&&_f7122ff8358b1a1626eeaac57a69247cb13f945a6d333d16dbadc4a10293c08bbd7d6e6d19be81ff(f)};$("#dest-num-reminder").empty();$("#dest-num-reminder").text(g)});console.log("5555");$("#sms-container").unblock();""==location.hash?setTimeout("$('#resultholder').tabs('select' , 0);",100):setTimeout("$(location.hash).click();",100)}
function _ec19f39b66288e3d1bb727f9b165748b45d4c2119de34ca93cb26a5ed14901fe2d9cb732e418d397(){!0==confirm("This will send a text message via your phone to a phone # in the USA. Press OK to proceed.")&&_58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1("send_sms","test-sms-send","+14158684689","8684689","MightyText Test #","_a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182")}
function _6e82cc188aadf58f625c89d1ce5d716cd64e4fa2b0744936fd312408135150d8a83b82b6912b52b7(a){}
function sssssss_f32e31e48d857b015de9bb06c3959667202be5685f599cb178b9b0a47cb3bec9fffe20189561247d(a,b,c){var d=baseUrl+"/client?function=send&deviceType=ac2dm&action="+a+"&action_data="+b,e="";isCorsSupported||(d="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM",e="&wagdaedunn="+ckSharedGlobal,e+="&action="+a+"&action_data="+b);c&&(d+=c);console.log("send url for Custom C2DM is: "+d);$.ajax({url:d,global:!1,type:"POST",xhrFields:{withCredentials:!0},data:e,dataType:"text",success:function(b,
c,d){console.log(b);-1<b.search("sent to phone")?"push_phone_contacts_to_cloud"==a&&alert("Requested to refresh contacts from phone."):alert("C2DM error: "+b)},error:function(a,b,c){alert("Error in C2DM: "+c);alert("Error details: "+c.error)}})}function _1e9fbc18ca5ec5b21ce15543b1330e1e2441224c3c5174b71d24aa217f93fc1b7439c1ee25e11556(){return Math.round((new Date).getTime()/1E3)}
function _99ad8a9d0416cdaa68acf1c47175228eaaf2ce464a67a03015e2a35a689751627e3771cac80681ef(a,b,c){"undefined"===typeof c&&(c=0);console.log("params: "+a+" ---- "+b+" --- "+c);var d=!0;"NO_CONTACTS_TOKEN"==a&&(d=!1);var e=baseUrl+"/api?function=GetDistinctMessageHeaders&CLIENT=CRX";console.log("calling AJAX - getting THREADS");$.ajax({url:e,global:!1,type:"GET",timeout:9E3,dataType:"json",xhrFields:{withCredentials:!0},error:function(d,e,k){1>c?_99ad8a9d0416cdaa68acf1c47175228eaaf2ce464a67a03015e2a35a689751627e3771cac80681ef(a,
b,c+1):_5c72000e6eab63b1d1a7d2f07492e15267f7ec8ea149bb40448749f069bd33e74891e6c22e53fd08(_ce5b3600271972874a660995394fda9bcbe49dc721e9be98c437445c5d572571fe228ddc3036fb59)},statusCode:{500:function(){alert("Error 500")}},success:function(c,e,k){calling_from_chrome_extension||$.unblockUI();"NO_CONTACTS_TOKEN"!=a&&_d3e4ae6327d7194ae5445d0afa613c2c323ce3179d90ff42c13e1a1159651e7103812fd3eddec3b1(a);c.user&&-1<c.user.search("user not logged in")&&(window.location=signInUrl);var h=e=0,n=0;$.each(c.messages,
function(b,c){0==c.phone_num_clean&&(c.phone_num="Unknown / Misc");var e="",g="img/silhouette.jpg",q="",k="src",l=8;$.browser.msie&&(l=1);e=!1;"NO_CONTACTS_TOKEN"==a&&(e=!0);if(e)l=$.jStorage.get(username_prefix_jstrg_purpose+"|PC_"+c.phone_num_clean,"no-jstorage-val-found"),"no-jstorage-val-found"==l?(l=_45845d6a7229fa82eedeb9ef80f910a1515ea79182517e6de979bb1ee47e35ec24261b2b26e30ae3(c.phone_num_clean),console.log("NO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean+" ... now check array loaded from cloud")):
console.log("MATCHED! LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),void 0==l?(e=c.phone_num,console.log("Phone Contacts NOT MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...NO CONTACT MATCH....for full num: "+c.phone_num)):(e=l.contactName,console.log("Phone Contacts YES MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...Contact Match: "+l.contactName+"..."+l.phoneNum),l=$.jStorage.get(username_prefix_jstrg_purpose+"|PH_PIC_"+c.phone_num_clean,"no-jstorage-val-found"),
"no-jstorage-val-found"==l?(_0528c33ced1d2963843b662d86e46288852c8e2d69be86e55f2f7b1d0eb179c68a4bbcc206ba9572(c.phone_num,c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,99999),console.log("NO PHOTO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean)):(console.log("LOCAL PHOTO JSTORAGE ENTRY MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),console.log("Now check if actual binary image available in JSTORAGE"),2<l.contactThumbnailBinary.length?(console.log("BINARY IMAGE in local cache for "+
c.phone_num_clean),globalPHONEContactsRefreshCacheQueue.push([c.phone_num_clean,"data:image/jpeg;base64,"+l.contactThumbnailBinary])):(console.log("NO actual photo in local cache for: "+c.phone_num_clean),console.log("Now, see if C2DM request for this image was recent"),l.ts_last_c2dm_pic_request&&(l=_1e9fbc18ca5ec5b21ce15543b1330e1e2441224c3c5174b71d24aa217f93fc1b7439c1ee25e11556()-l.ts_last_c2dm_pic_request,console.log(l+"s since last c2dm try for "+c.phone_num_clean),180>l&&(console.log("checking for image again from central MC"),
_0528c33ced1d2963843b662d86e46288852c8e2d69be86e55f2f7b1d0eb179c68a4bbcc206ba9572(c.phone_num,c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,l))))));else{var f=[];0!=c.phone_num_clean&&(f=$.jStorage.get(c.phone_num_clean,"no-jstorage-val-found"));f.name?(e=f.name,console.log(c.phone_num_clean+" - Local Storage contact match to name: "+e),""!=f.thumbnail_image_google_base_url&&(g=f.thumbnail_image_google_base_url+"&oauth_token="+a,n++,n<l?(q="g-thumb-image-load-now",k="src"):(q="g-thumb-image-load-later",
k="srcloadlater")),l=_1e9fbc18ca5ec5b21ce15543b1330e1e2441224c3c5174b71d24aa217f93fc1b7439c1ee25e11556()-f.time_stored,21600<l&&d&&(console.log("should refresh local contact cache for "+c.phone_num_clean+" -- seconds old: "+l),globalContactsRefreshCacheQueue.push(c.phone_num_clean))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call globalContactsRefreshCacheQueue for "+c.phone_num+" .... "+c.phone_num_clean),e=c.phone_num,d&&globalContactsRefreshCacheQueue.push(c.phone_num_clean))}calling_from_chrome_extension||
(l='<li id="tab'+b+"-"+c.phone_num_clean+'">',l+='<a title="'+c.phone_num+'" id="'+c.phone_num_clean+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+c.phone_num_clean+'" class="threadnamenumber">'+e+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+c.phone_num_clean+'">'+c.count+'</span>)<br><span id="timestamp-last-msg">'+_0c800fd990afaa098e2b4c4a8e59f273d3cdb66372a63f72e856d8ded49ee65077238a4ec8b5b453DisplayPurposes(c.ts_server,
!0)+"</span></span></span>",l+='<img id="thumbnail-if-known-'+c.phone_num_clean+'" class="'+q+'" style="margin-right:0px;float:right" width=45 height=45 '+k+'="'+g+'"> ',document.getElementById("tabs-phone-threads").innerHTML+=l,document.getElementById("tabs-phone-threads").innerHTML+="</a></li>",h+=c.count)});setTimeout(_5d3dbd5832e18d7ee010382aba2221be4ecfd94a81e6223370b91f1b5f9b935852a2344ecf75d659,5E3);_aef2348797de797727a06003469e45990b5ceb8d3cc029a12596531e565dc7e4aa6afaa23b515f55();"NO_CONTACTS_TOKEN"!=
a&&(global_oauth_contacts_token=a,setTimeout(_95d3edce2b6861ad17dfa204eb3010a3fb658c9bd15fdeb82334b0c3d6d598c5858417681197888b,1E3));setTimeout(_5f4f6cb15f830719a5c2b64f07777075a0c9d4562556af72938140ff8f4c9f483f0714e27e18f6af,2E3);e=c.messages.length;_gaq.push(["_trackEvent","WebApp","Count-Num-Threads-Pulled","",e]);_gaq.push(["_trackEvent","WebApp","Count-Num-Total-Messages-Pulled-All-Threads","",h]);calling_from_chrome_extension||(generate_tabs(-1,b),$("#resultholder").show(),$.unblockUI())}})}
function _5d3dbd5832e18d7ee010382aba2221be4ecfd94a81e6223370b91f1b5f9b935852a2344ecf75d659(){for(var a="";0<globalQueueContactImagesToFetch.length;)a+=globalQueueContactImagesToFetch.shift(),0<globalQueueContactImagesToFetch.length&&(a+="|");0<a.length&&_f32e31e48d857b015de9bb06c3959667202be5685f599cb178b9b0a47cb3bec9fffe20189561247d("push_phone_contact_photos_to_cloud",a)}
function _95d3edce2b6861ad17dfa204eb3010a3fb658c9bd15fdeb82334b0c3d6d598c5858417681197888b(){var a=globalContactsRefreshCacheQueue.shift();console.log("SHIFT OFF ARRAY: checking google contacts api for "+a);_c16fabed31187524afaa97b16dbbb3bca5f5a315c0814343bfc82b2b2cec6bd4ff4927a5cf2aa09f(a,global_oauth_contacts_token,!0);0<globalContactsRefreshCacheQueue.length&&setTimeout(_95d3edce2b6861ad17dfa204eb3010a3fb658c9bd15fdeb82334b0c3d6d598c5858417681197888b,300)}
function _aef2348797de797727a06003469e45990b5ceb8d3cc029a12596531e565dc7e4aa6afaa23b515f55(){if(1>globalPHONEContactsRefreshCacheQueue.length)return!1;var a=globalPHONEContactsRefreshCacheQueue.shift(),b=a[1];$("#thumbnail-if-known-"+a[0]).attr("src",b);0<globalPHONEContactsRefreshCacheQueue.length&&setTimeout(_aef2348797de797727a06003469e45990b5ceb8d3cc029a12596531e565dc7e4aa6afaa23b515f55,100)}
function _0528c33ced1d2963843b662d86e46288852c8e2d69be86e55f2f7b1d0eb179c68a4bbcc206ba9572(a,b,c,d){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContactPhotos&phone_num_clean="+b+"&phone_num_full="+a,global:!1,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:function(a,g,f){"0"!=a.phone_contact_photo_status&&0<a.phone_contact_photo_status.length?($(c).attr("src","data:image/jpeg;base64,"+a.phone_contact_photo_status),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+
b,{contactThumbnailBinary:a.phone_contact_photo_status})):0==a.phone_contact_photo_status.length?(console.log("photo was previously requested and sent as blank to MT system for phone num: "+b),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+b,{contactThumbnailBinary:a.phone_contact_photo_status},{TTL:6048E5})):28800<d&&5>globalQueueContactImagesToFetch.length&&(globalQueueContactImagesToFetch.unshift(b),g=1728E5,$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+b,{contactThumbnailBinary:a.phone_contact_photo_status,
ts_last_c2dm_pic_request:_1e9fbc18ca5ec5b21ce15543b1330e1e2441224c3c5174b71d24aa217f93fc1b7439c1ee25e11556()},{TTL:g}))}})}function _12b0e5e2eeac32e29b8eaf0208bfaf504f740dc2b5450a4fd388eae91dd005a4e0136148767ea741(){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContacts",global:!1,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:function(a,b,c){_84f68ae19fb6c8f2576baff0ba54ce82c0a4f509cc0152ff71fc8243f70c8e8478bd7de2aa387e2c(a)}})}
function _45845d6a7229fa82eedeb9ef80f910a1515ea79182517e6de979bb1ee47e35ec24261b2b26e30ae3(a){var b;$.each(contactsFromPhoneGlobal,function(c,d){if(a==d.phoneNumClean)return b=d,$.jStorage.set(username_prefix_jstrg_purpose+"|PC_"+a,{contactName:d.contactName,phoneNum:d.phoneNum,phoneNumType:d.phoneNumType}),!1});return b}
function _84f68ae19fb6c8f2576baff0ba54ce82c0a4f509cc0152ff71fc8243f70c8e8478bd7de2aa387e2c(a){if(0==a.contacts_status)return console.warn("No Phone contacts in cloud for this user"),!1;$.each(a,function(a,c){contactid=c.contactId;contactName=c.displayName;$.each(c.phoneList,function(a,b){phoneNumType=b.type;phoneNum=b.phoneNumber;cleanPhoneNum=_c8fc9058d7c18b9c6b3b026df2cc1f9648b5940d30300cf3e152e70679acbf4b36af0ebadb2607ee(phoneNum);contactsFromPhoneGlobal.push({phoneNum:phoneNum,phoneNumType:phoneNumType,
phoneNumClean:cleanPhoneNum,contactName:contactName})})})}function _5f4f6cb15f830719a5c2b64f07777075a0c9d4562556af72938140ff8f4c9f483f0714e27e18f6af(){var a=$(".g-thumb-image-load-later").first();a&&(a.attr({src:a.attr("srcloadlater")}),a.removeClass("g-thumb-image-load-later"),a.addClass("g-thumb-image-LOADED-later-DONE"),setTimeout(_5f4f6cb15f830719a5c2b64f07777075a0c9d4562556af72938140ff8f4c9f483f0714e27e18f6af,300))}
function _92ec6acb953df16a0f8b05b6a2cdc3796a82a199f60e33bbc540d77d01793a1504ec1b04aab7ca81(){console.log("Forcing  contacts token refresh...");$.ajax({url:baseUrl+"/contact?function=revokeGoogleContactsToken",global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},error:function(a,b,c){alert("** Error in revoking google contacts token: "+c)},success:function(a,b,c){$.jStorage.flush();alert("Successfully Unlinked from Google Contacts");window.location.reload()}})}
function _e1c1531648610cee6255a7f24bba7de0aabca09050ce41dc05c4888b3cb778b060c044741b100565(a){console.log("*** NEW CONTACTS TOKEN REFRESH!");$.ajax({url:baseUrl+"/contact?function=refreshGoogleContactsAccessToken",global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},error:function(a,c,d){console.log("** Error in refresh_google_contacts_access_token: "+d);_99ad8a9d0416cdaa68acf1c47175228eaaf2ce464a67a03015e2a35a689751627e3771cac80681ef("NO_CONTACTS_TOKEN")},success:function(b,c,d){console.log("in force contacts token refresh -- success!");
console.log("get_new_access_token_value is: "+b);calling_from_chrome_extension&&$.jStorage.set("google_contacts_token",{contacts_token_value:b,time_captured:_1e9fbc18ca5ec5b21ce15543b1330e1e2441224c3c5174b71d24aa217f93fc1b7439c1ee25e11556()});-1<b.search("error")?_99ad8a9d0416cdaa68acf1c47175228eaaf2ce464a67a03015e2a35a689751627e3771cac80681ef("NO_CONTACTS_TOKEN",a):_99ad8a9d0416cdaa68acf1c47175228eaaf2ce464a67a03015e2a35a689751627e3771cac80681ef(b,a)}})}
function _d3e4ae6327d7194ae5445d0afa613c2c323ce3179d90ff42c13e1a1159651e7103812fd3eddec3b1(a){var b="https://www.google.com/m8/feeds/contacts/default/full?alt=json&v=3.0&max-results=6000&oauth_token="+a;localGoogleContactsFeed="NOTHING-STORED";"NOTHING-STORED"==localGoogleContactsFeed?(console.log("**CONTACTS: No local contacts TOKEN stored; calling google Contacts feed using stored token"),$.ajax({url:b,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(b,d,e){console.log(b);
_e62779b59368571ab1f9ee7d797bff2c980e96c4e6fb360f3c6a7d335be6f8ed8c16092586557661(b,a)}})):_e62779b59368571ab1f9ee7d797bff2c980e96c4e6fb360f3c6a7d335be6f8ed8c16092586557661(localGoogleContactsFeed,a)}
function _c16fabed31187524afaa97b16dbbb3bca5f5a315c0814343bfc82b2b2cec6bd4ff4927a5cf2aa09f(a,b,c){console.log("in getSingleNumberContactsFeeeed");if(0==a)return 1;var d="https://www.google.com/m8/feeds/contacts/default/full?q="+a+"&alt=json&v=3.0&max-results=2000&oauth_token="+b;console.log(d);$.ajax({url:d,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontacts"+a,success:function(d,g,f){console.log("In GetSingleNumberContacts Feed. . .");console.log(d);0<d.feed.openSearch$totalResults.$t&&
_f6ad6b56cc398c2b3a700d803d94efaa43b9c261a602143828b77067022f6e0f10623fad4f346ce7(d,b,a,c)}});return 1}
function _16307c967bdef8d9a6a1267684ba9ed466f4047adaa446c9925db212579eae2db081b4bc6bdf1091(a){a=a.feed.entry;for(var b=0;b<a.length;b++){var c=a[b];console.log("name = "+c.getTitle().getText());for(var d=c.getEmailAddresses(),e=0;e<d.length;e++){var g=d[e].getAddress();console.log("email = "+g)}c=c.getPhoneNumbers();if(0==c.length)console.log("phone number = N/A");else for(e=0;e<c.length;e++)d=c[e].getValue()||"N/A",console.log("phone number = "+d)}0==a.length&&console.log("no contacts are found ")}
function _e62779b59368571ab1f9ee7d797bff2c980e96c4e6fb360f3c6a7d335be6f8ed8c16092586557661(a,b){contacts_bkg_page=[];contacts_autocomplete_per_unique_phone_num=[];googleContactsArray=[];for(var c="",d=0,e;e=a.feed.entry[d];d++){var g={name:e.title.$t,id:e.id.$t,emails:[],phonenums:[]};g.name||(g.name=g.emails[0]||"<Unknown>");if(e.link&&e.gd$phoneNumber)for(var f=e.link,k=0,h;k<f.length;k++)h=f[k],"image/*"==h.type&&void 0!=h.gd$etag&&(c=h.href);if(e.gd$phoneNumber)for(f=e.gd$phoneNumber,k=0;k<f.length;k++){h=
f[k];g.phonenums.push(h.$t);googleContactsArray.push({name:g.name,phone_number_full:h.$t,thumbnail:c});var n=h.rel,p="";void 0===n?p="Other":0<n.search("mobile")?p="Mobile":0<n.search("work")?p="Work":0<n.search("home")&&(p="Home");contacts_autocomplete_per_unique_phone_num.push({label:g.name+" "+h.$t+" ("+p+")",value:h.$t,contact_name:g.name,type_home_mobile:h.rel,g_contact_id:e.id?e.id:""})}e.gd$phoneNumber&&contacts_bkg_page.push(g)}console.log("*** Done parsing google contacts feed*****");console.log("num entries in googleContactsArray: "+
googleContactsArray.length)}var buildLongInfoString="";
function _f6ad6b56cc398c2b3a700d803d94efaa43b9c261a602143828b77067022f6e0f10623fad4f346ce7(a,b,c,d){console.log("number ending, to match, is: "+c);var e=_cd728dc99608f03b47a0ba2f76eeadb7d6722c11722944f89091ce5d9b1c5fbdfd00568555f67a8a(c,7);console.log("number ending, to match, ZERO PADDED to 7 digits is: "+e);for(var g="",f="",k=!1,h=a.feed.entry.length,n=0;n<h;n++){var p=a.feed.entry[n],s=p.title.$t;if(p.link&&p.gd$phoneNumber){console.log(p.gd$phoneNumber);console.log("For number_ending="+c+' -- in entry: Link and PhoneNumber, now traverse "links" and check for image/* and gd$etag\u2026.');
for(var r=p.gd$phoneNumber,m=0,q;m<r.length;m++){q=r[m];var t=_c8fc9058d7c18b9c6b3b026df2cc1f9648b5940d30300cf3e152e70679acbf4b36af0ebadb2607ee(q.$t),l=t.substring(t.length-7);console.log("For zero padded number_ending="+e+"..Phone Number in Google Contacts is: "+q.$t);console.log("Sanitized Google Contact Phone Number is: "+t);console.log("last 7 digits of  sanitized g contact # is: "+l);if(l==e)for(k=!0,""==f&&(f=s),t=p.link,q=0;q<t.length;q++)console.log("linklist index is  "+q),l=t[q],"image/*"==
l.type&&void 0!=l.gd$etag&&(console.log('found "image" and gd$etag entry in links list for contact: '+s),g=l.href,console.log("**** Single Num - GOT IMAGE FOR: "+s+" --\x3e "+g+"&oauth_token="+b))}}else if(p.gd$phoneNumber)for(console.log("For "+c+" -- At least one Phone Number found in this entry.."),p=p.gd$phoneNumber,q=0;q<p.length;q++)console.log("----------------------------------------")}k?(console.log("** Found explicit phone number match! -- Best info --- "+c+" -- Name: "+f+" -- Best Image: "+
g),newBestGoogleContactsArray.push({phone_num_clean:c,name:f,thumbnail_image:g}),$.jStorage.set(c,{name:f,thumbnail_image_google_base_url:g,time_stored:_1e9fbc18ca5ec5b21ce15543b1330e1e2441224c3c5174b71d24aa217f93fc1b7439c1ee25e11556()}),a="",e="#name-if-known-"+c,k="#thumbnail-if-known-"+c,h=$(".ui-tabs-selected a").attr("id"),a=""==g?"img/silhouette.jpg":g+"&oauth_token="+b,d&&($(e).text(f),c==h&&$("#thread-heading-name").text(f),$(k).attr("src",a))):console.log("No contact match found based on # ending with: "+
c)}
function _00699f4ff4b42502944be8f6fa618b1e08958a494c347a9fa2a1d08c15bfb52b406542ef0b3c7137(a){document.getElementById("top-notif-bar").innerHTML="";_9fee5110996487c12e15f4583e83702e4af6ce6e0b1ea91d44be154a5ee3041cc94b172fa6647528("Current google_login_status is "+google_login_status);_9fee5110996487c12e15f4583e83702e4af6ce6e0b1ea91d44be154a5ee3041cc94b172fa6647528("Current login_and_beta_ready is "+login_and_beta_ready);selected_tab=$("#resultholder").tabs("option","selected");void 0!=selected_tab.length&&(selected_tab=
0);void 0!=a&&(document.getElementById("msg").innerHTML=a)}function _d3744bc90540ec86c8470146f104603fc58ed86050e68542dc4be53f00ed0641d3508e4f733c0eed(a){a="#thread-count-live-updated-"+a;$(a).text(parseInt($(a).text())+1);$(a).hide().fadeIn(600);$(a).siblings("#timestamp-last-msg").text(_0c800fd990afaa098e2b4c4a8e59f273d3cdb66372a63f72e856d8ded49ee65077238a4ec8b5b453DisplayPurposes(new Date,!1))}
function _584503bdee9904e8081d6b1df289b6147019d5150477294143a2af1f1cdd9e0915f4377e707270ac(a){a=jQuery.parseJSON(a);if(void 0!==a.new_content){if(a=a.new_content,!(-1<a.body.search("CAPI_HEALTH_CHECK")||-1<a.body.search("USER_UPDATED_SETTINGS_IN_WEBAPP"))){var b=$(".ui-tabs-selected a").attr("id");a.phone_num_clean==b&&(b="",61==a.inbox_outbox&&(b="sms-reply"),$("#sms-thread-content").append('<li id="sms-line-item-msgid-'+a.id+'" class="sms-line-item JUST-PUSHED-FROM-CLOUD '+b+'"><div id="sms-body-msgid-'+
a.id+'" class="sms-body" >'+_397e68292780b95b477b271743ac79e22ecb5d195d24c716d253c75dd7fd34b1cb1d60c0dde5bbe1(a.body)+'</div>  <span class="sms-time" id="unknown">(just now...)</span></li>'),$("#sms-body-msgid-"+a.id).show("highlight",{color:"#F9EEC0"},3E3),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()));if(61!=a.inbox_outbox&&84!=a.type&&85!=a.type){var c="",d="";10==a.type?(c="Message from ",d="'"+a.body+"'"):11==a.type?void 0!==a.mms_object_key?(c="MMS from ",d="'"+a.body+
"' (MMS Downloaded)"):(c="MMS from ",d="Image Downloading on Phone..."):80==a.type?c="Incoming Call from ":81==a.type&&(c="Missed Call from ");d=_397e68292780b95b477b271743ac79e22ecb5d195d24c716d253c75dd7fd34b1cb1d60c0dde5bbe1(d);b=[];0!=a.phone_num_clean&&(b=$.jStorage.get(a.phone_num_clean,"no-jstorage-val-found"));var e="",e=b.name?b.name:a.phone_num;$("#msg").fadeOut(500,function(){$(this).html("<B>"+c+e+': </B><span style="font-weight:normal">'+d+"</span>").fadeIn(1E3)});var g="#"+a.phone_num_clean;
objNewSettings&&0==objNewSettings.notif_toggle_on_off?(console.log("*** DONT POPUP NOTIFICATION - USER PREFERENCE"),b=!1):b=!0;if(window.webkitNotifications&&"Chrome"!=BrowserDetect.browser&&b){var f=3E4,k="";objNewSettings&&objNewSettings.notif_dismiss_time&&(f=1E3*objNewSettings.notif_dismiss_time,console.log("setting notif_dismissal_time to: "+f));var k=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click to see message...":d,h=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png",
c+e,k);h.ondisplay=function(a){inWebAppGlobalNotifArray.push(h);setTimeout("_1ba3e20aafd6ecb913e8a6c1e74a0c5a9a1bd212e5b04e8f96bcc15ec5629ac6fcc1bfff00a089a5();",f)};h.onclick=function(a){window.focus();$(g).click();this.cancel()};h.show()}!window.webkitNotifications&&b&&(k=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click OK to see message...":d,alert(c+e+": "+k),!1==_470d0873cc9b1ae26ac0580a3deb2efc620ab4aad968a767646085e6d1c1daebd04a1905adb0ad0c(1)&&$(g).click())}if(10==a.type||
11==a.type)_d3744bc90540ec86c8470146f104603fc58ed86050e68542dc4be53f00ed0641d3508e4f733c0eed(a.phone_num_clean),_0abd17084151c29148c0fd65fd6c6a5a09754d5ca220684e782a74375c752833a4cc0c9a108d9f05(a.phone_num_clean,a.phone_num)}}else void 0!==a.ack_processed?(b=a.ack_processed,a="message-status-text-msgid-"+b.id,b="outbox-message-msgid-"+b.id,null!=document.getElementById(a)&&(document.getElementById(a).innerHTML='<B>Phone Sent Message</B> <img style="margin-top:5px" src="checkmark-yes.png">'),null!=
document.getElementById(b)&&(document.getElementById(b).innerHTML='<B>Phone Sent</B> <img src="checkmark-yes.png">')):console.log("unknown incoming CAPI content")}
function _c8fc9058d7c18b9c6b3b026df2cc1f9648b5940d30300cf3e152e70679acbf4b36af0ebadb2607ee(a,b){for(;-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");for(;-1<a.search("[.]");)a=a.replace(".","");for(;-1<a.search("[/]");)a=a.replace("/","");for(;-1<a.search("[+]");)a=a.replace("+","");return a=!b&&7>a.length?_cd728dc99608f03b47a0ba2f76eeadb7d6722c11722944f89091ce5d9b1c5fbdfd00568555f67a8a(a,
7):a.substring(a.length-7)}function _0c6a407c73ba9823ff591cad5618ac637bd42bf5f1afe98d024fc538833cc0547966e204ed82591f(){$("#resultholder").tabs("select",-1);$(".ui-tabs-selected").removeClass("ui-state-active").removeClass("ui-tabs-selected")}
function _e38ce5e85ef34605495ae43d262095f48b02e483cf3cae73b4aa510b0dd531923eacb87bcbe8158a(){_gaq.push(["_trackEvent","WebApp","Compose-New-Msg-Click","WebAppPageView",1]);if(!$("#settingsPane")[0]&&_470d0873cc9b1ae26ac0580a3deb2efc620ab4aad968a767646085e6d1c1daebd04a1905adb0ad0c())return!1;_0c6a407c73ba9823ff591cad5618ac637bd42bf5f1afe98d024fc538833cc0547966e204ed82591f();$("#sms-container").css("height","auto");document.getElementById("sms-container").innerHTML='<div id="compose-single-text" style="text-align:left;clear:both;font-size:18px;padding:5px;padding-left:9px;border-left:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-radius:10px">';
contact_box_prompt="Start typing a name or number...";document.getElementById("compose-single-text").innerHTML+='<h3 style="font-size:21px;margin-bottom:15px;margin-top:10px;padding-bottom:5px;border-bottom: 1px solid rgba(0,0,0,.1)"><b>New Message</b></h3><br><p><B>Send To:</B>  <span style="font-size:12px;color:#3F8CD9;margin-left:10px">(Up to 3 recipients) <a style="font-size:12px;color:#E60;float:right" href="#" onclick="alert(\'Please Note: Your carrier will count an SMS for each recipient. As a reminder, MightyText sends SMS via your phone.\');">important note</a></span></p>';
document.getElementById("compose-single-text").innerHTML+='<div id="friends" style="color:darkgrey; border:1px solid #CCC;margin:0px;margin-right:40px;padding:8px;font-size:15px;height:60px"></div>';document.getElementById("friends").innerHTML+='<input id="compose-number" type="text" size=20 name="compose-number" style="border:none;" />';document.getElementById("compose-single-text").innerHTML+="<br><p><B>Message:</B></p>";document.getElementById("compose-single-text").innerHTML+='<div id="single-text-elements">';
document.getElementById("compose-single-text").innerHTML+='<textarea id="send-one-text" value="starting val" onfocus="document.getElementById(\'error-text-content-single-text\').innerHTML=\'\';" style="float:left;height:70px;max-height:80px;width:400px;border:1px solid #CCC;margin:0px;padding:5px;font-size:16px;"></textarea>';document.getElementById("compose-single-text").innerHTML+='<span id="holder-adjacent-sendbox-single-text" style="float:left"><button id="send-button-single-text" style="font-size:14px;margin:0px;padding:7px;margin-left:18px;cclear:both" onclick="_e3176ceb5ee5c61a5df32a9f2dfc7a4124273c83b3138eb871419a1b90f7f275251f38b8ee2ae5bd();"> Send</button><br><br><span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;font-family:arial;margin-left:20px" id="charsLeft-one-text"></span></span>';
document.getElementById("compose-single-text").innerHTML+='<span id="mms-canvas-single-text" style="">'+_f261c6fd9154bc9b1fbfafcb8112c1c330b71d2bd13d24e627d55580ff200ab5750065c5b747445f();document.getElementById("compose-single-text").innerHTML+="</span>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+="<br><br>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+=
'<br><div id="single-text-texts" style="font-size:14px"></div>';document.getElementById("compose-single-text").innerHTML+='<br><div id="error-text-content-single-text" style="font-weight:bold;color:red;font-size:14px"></div>';$("#compose-number").focus();objNewSettings&&0==objNewSettings.enter_to_send||$("#send-one-text").unbind("keydown").keydown(function(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),$("#send-one-text").blur(),$("#send-button-single-text").click())});$("#send-one-text").NobleCount("#charsLeft-one-text");
$("#send-one-text").click(function(){0<$("#compose-number").val().length&&_c7921046f13f0d94441c5882afcde650ea5ad7b5881605d60dbb38012019f3c51560b100b275df79()});$("#compose-number").delegate("","keydown",function(a){8==a.keyCode&&1>$("#compose-number").val().length&&$(this).prev("span").remove();188==a.keyCode&&0<$("#compose-number").val().length&&_c7921046f13f0d94441c5882afcde650ea5ad7b5881605d60dbb38012019f3c51560b100b275df79()});$(function(){$("#compose-number").bind("keydown",function(a){a.keyCode===
$.ui.keyCode.TAB&&($(this).data("autocomplete").menu.active?a.preventDefault():_c7921046f13f0d94441c5882afcde650ea5ad7b5881605d60dbb38012019f3c51560b100b275df79())});$("#compose-number").autocomplete({source:contacts_autocomplete_per_unique_phone_num,autoFocus:!0,delay:100,open:function(a,b){$(".ui-menu").css({"z-index":"9999"});$(".ui-menu").css({border:"1px solid #c0c0c0"});_7de7463e8ccf1ad6d83279de9e798d6cc2a613419897b3fa8f1942fdee459e7b45d3bb4afce4ca95()},select:function(a,b){if(_7de7463e8ccf1ad6d83279de9e798d6cc2a613419897b3fa8f1942fdee459e7b45d3bb4afce4ca95()){var c;
c=0<b.item.contact_name.length?'<div id="single-compose-contact-name" style="font-size:14px">'+b.item.contact_name+'</div><span id="single-compose-target-phone-num" style="border:none;font-size:12px">'+b.item.value+"</span>":b.item.value;$("<span class='contact-bubble'>").html(c).insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}},change:function(){}});$("#compose-number").autocomplete("widget").addClass("compose-single-text-autocomplete-box");$("#friends").click(function(){$("#compose-number").focus()});
$(".remove",document.getElementById("friends")).live("click",function(){$(this).parent().remove();0===$("#friends span").length&&$("#compose-number").css("top",0)})})}function _7de7463e8ccf1ad6d83279de9e798d6cc2a613419897b3fa8f1942fdee459e7b45d3bb4afce4ca95(){return 2<$(".contact-bubble").length?($("#compose-number").val(""),$("#compose-number").autocomplete("close"),alert("You already have selected 3 recipients."),!1):!0}
function _c7921046f13f0d94441c5882afcde650ea5ad7b5881605d60dbb38012019f3c51560b100b275df79(){if(!(1>$("#compose-number").val().length)&&_7de7463e8ccf1ad6d83279de9e798d6cc2a613419897b3fa8f1942fdee459e7b45d3bb4afce4ca95()){var a;a=$("#compose-number").val().replace(",","");a=a.replace("\t","");if(_ba77d28e360896a595d6ebd8cc8d403e714a29afef632290ee4f46327a7d0faac6c032378101477f(a)){a='<span id="single-compose-target-phone-num" style="border:none">'+a+"</span>";var b=$("<span class='contact-bubble'>").html(a);
$("<a>").addClass("remove").attr({href:"javascript:",title:"Remove "+a}).text("x").appendTo(b);b.insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}else alert(a+" is not a valid phone number"),$("#compose-number").val($("#compose-number").val().replace("\t","")),setTimeout("$('#compose-number').focus();",50)}}
function _f6a7c7cd8b516513d221101b6751309b0f957c5dbabae1e79eb2a7e338229387dbdaa33d4684d012(){var a=!1,b=0,c=[];$("#friends .contact-bubble").each(function(){$(this);var a=$(this).children("#single-compose-target-phone-num").text();_ba77d28e360896a595d6ebd8cc8d403e714a29afef632290ee4f46327a7d0faac6c032378101477f(a)?(b++,c.push(a)):alert(a+" is not in a valid phone number.")});$("#friends input").each(function(){var d=$(this).val();0<d.length&&(b++,_ba77d28e360896a595d6ebd8cc8d403e714a29afef632290ee4f46327a7d0faac6c032378101477f(d)?
c.push(d):(alert(d+" is not a valid number"),a=!0))});0==b?alert("No recipients entered"):a||_b01fa3da901c0c85eb7de0c2ca91fd56346ecabaee26b68529680b6a0e334831912806778f51617a(c,b)}
function _b01fa3da901c0c85eb7de0c2ca91fd56346ecabaee26b68529680b6a0e334831912806778f51617a(a,b){_gaq.push(["_trackEvent","WebApp","Send-Message-Compose-New-Window-Click","",b]);$("#msg").empty();$("#send-button-single-text").css({background:"lightgrey",color:"grey"});$("#send-button-single-text").html("Sending...");$("#send-button-single-text").attr("disabled",!0);var c=0==$("#mms-blob-id-holder").text().length;$(a).each(function(a,b){var g=_c8fc9058d7c18b9c6b3b026df2cc1f9648b5940d30300cf3e152e70679acbf4b36af0ebadb2607ee(b,
!0);c?_58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1("send_sms","single-compose",b,g,b,_a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182,a):_58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1("send_mms","single-compose",b,11111,b,"_a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182",a,$("#mms-blob-id-holder").text())})}
function _cfd7bec6290bc5f5f96ad48b21aa9812f7bcc9c1061203ef2a778d038c14f769b4dcbe4c08c574c8(a){a=_c8fc9058d7c18b9c6b3b026df2cc1f9648b5940d30300cf3e152e70679acbf4b36af0ebadb2607ee(a);return a.substring(a.length-7)}function _ba77d28e360896a595d6ebd8cc8d403e714a29afef632290ee4f46327a7d0faac6c032378101477f(a){if(""!=a){for(i=0;i<a.length;i++){var b=a.charAt(i);if(0>"+- 1234567890()/][.".indexOf(b))return!1}return!0}return!1}
function _bb1f70b20ac2e5e99dc9d0ec46cb11604cd11c911ac50171f4bfe8fb94e614933b2ec21e22462d47(){$.ajax({type:"GET",url:baseUrl+"/getJson?function=getChannelTokenForWebApp&client=CRX_WEBAPP&mins=120",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){console.log("Response from cloud after channel attempt (should have valid_token prepend): "+a);if(0>a.search("valid_token:"))console.log("No valid_token prepend found from Channel API!");else{a=a.replace("valid_token:","");var b=new goog.appengine.Channel(a);
console.log(b);b=b.open();b.onopen=function(){global_time_last_CAPI_msg_received_webapp=new Date;console.log("Channel Opened via Channel API with token: "+a);console.log("Current time - when channel API new socket is opened : "+Date());_gaq.push(["_trackEvent","Background","ChannelAPI-Open-Socket","",1])};b.onmessage=function(a){3>Math.floor(10*Math.random())&&_gaq.push(["_trackEvent","Background","ChannelAPI-Message-Received","",1]);global_time_last_CAPI_msg_received_webapp=new Date;console.log("**** CHANNEL SOCKET ONMESSAGE *** ");
console.log("Message arrived via CAPI= "+a.data);process_incoming_channel_api_msg(a.data)};b.onerror=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onerror callback)!!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONERROR","",1])};b.onclose=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onclose callback) !!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONCLOSE","",1]);setTimeout("_bb1f70b20ac2e5e99dc9d0ec46cb11604cd11c911ac50171f4bfe8fb94e614933b2ec21e22462d47();",
300);console.log("------\x3e get a new Channel Token")}}}}).responseText}function _e6ea260c3435d6c1a45f6d7f0aa03bca26a28e394ae565ae0f9305f6181cd5d25bcf02123dba3be8(){_780cfecf82b4047aee12ffb6a272caad5d5ddda49590821242cf96e9181c5565e727ad265fb7f630();alert("Welcome to the MightyText Web App!");window.location.reload()}
function _f642e3d25035e97661a87a092c55ae4cd81b379c26a2c2ac2e35a07a256a81578fc4a56991c10722(a){$.ajax({url:"uservoice_sso.php",global:!1,type:"POST",timeout:1E4,data:"useremail="+a,error:function(a,c,d){},success:function(a,c,d){0<=a.indexOf("success")?(uvOptions={sso:a.split(/\{([^}]+)\}/)[1]},a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/mJ2EXFuxIoJI4z24dEDKTA.js",c=document.getElementsByTagName("script")[0],
c.parentNode.insertBefore(a,c)):console.log("proper sso token not retrieved from uservoice helper php script")}})}function promptUserForNewContactsOauthFlow(){document.getElementById("one-off-notify-user").innerHTML='<a style="font-size:14px;color:cyan"  href="'+newContactsOAuthURL+'" onclick="">Sync with Google Contacts</a>to see names'}
function _b3eb7ff0bedfbc9aea444650951c5576a37a88623d822bbd20cd19a099367badedcc660322b3c1c9(){document.getElementById("user-actions").innerHTML="";document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="positive button" onclick="if(_99327423eb61abce6a85713ff0d8db0be22427c87f60301ea0a36c2bf5f99a403be5421787eeb17b()) {document.getElementById(\'msg\').innerHTML=\'\';_e38ce5e85ef34605495ae43d262095f48b02e483cf3cae73b4aa510b0dd531923eacb87bcbe8158a();}"> <span class="pen icon"></span>Compose New</button>';
document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="button" onclick="_744fc7d735496c5b46e1016b59fd52bf89fde49e80afc31c17f0f8cd0909768a69cc3889257acfc9();"><span class="reload icon"></span>Reload</button>';_c676b3e91561699859aa20e335df3937754768a8aeef731687bd499e74382a4a880e1b1c36f83938()}
function _99327423eb61abce6a85713ff0d8db0be22427c87f60301ea0a36c2bf5f99a403be5421787eeb17b(){if(google_login_status)return!0;document.getElementById("msg").innerHTML='<span style="color:black">** Unable to send any new text messages. Not signed in. ** </span>';return!1}
function _744fc7d735496c5b46e1016b59fd52bf89fde49e80afc31c17f0f8cd0909768a69cc3889257acfc9(){_gaq.push(["_trackEvent","WebApp","App-Reload-Within-App","WebAppPageView",1]);$("#main-section").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#resultholder").tabs("disable");$("#resultholder").tabs("destroy");$("#resultholder").unbind("tabsselect");$("#tabs-phone-threads").empty();$("#sms-thread-content").empty();
_86e45313538ef0607d402d36647189f3abfd7c014cd2b8a202de26c1477eb5795bb7921d3bc66a0a();_e1c1531648610cee6255a7f24bba7de0aabca09050ce41dc05c4888b3cb778b060c044741b100565(!0)}
function _b64937dc327afe2d365d100e3be45ae7b6cac4303b720f877ff66a07fbac5ef806c851b807594eb4(){document.getElementById("sign-in-status").innerHTML+='<img src="green-dot-icon.png"><span style="color:white;"> '+google_username_currently_logged_in+' | <a id="sign-out-link" href="'+signOutUrl+'"> Sign Out</a></span>';$("#sign-out-link").click(function(){_gaq.push(["_trackEvent","WebApp","SignOut-Link-Click","",1])})}var highlight_msg_id_from_search_global="";
function _0ae52b0e5516c0d38ae7ed6833b89a1ce6fe457ba4c6c8f246c23fbc87c8253d440dfbac7c2fe847(){$.ui.autocomplete.prototype._renderItem=function(a,b){var c=b.label.replace(RegExp("^"+this.term),"<span style='font-weight:bold;color:Blue;'>"+this.term+"</span>");return $("<li></li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)}}
function _342ea311c4b67ce6f849f9855b2c2cab3d1297929e434fbc18017b851fbe8eda491f202f583e9d7a(){searchAutocompleteArray=[];var a=baseUrl+"/content?function=getPendingMessages&time_delay=180";console.log("getting Pending Outbound Messages");$.ajax({url:a,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){$.each(a.messages,function(a,b){4>a&&$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+b.id+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">'+
b.body+" --\x3e "+b.phone_num_clean+'<span class="sms-time" id="outbox-message-msgid-'+b.id+'">Request sent. <img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span></li>')})}})}
function _78ff22c6aeb3c34c8832e5f4268e33204d9a627de77f722f7f442edc2952c99df5ee445a3d913d72(a,b,c){var d="",e="",g="",f="";"END"==b?(f="&start_range=0&end_range=40",$("#sms-thread-content").empty()):f="&start_range=40&end_range=20000";f=baseUrl+"/content?function=GetMessages"+f;console.log("Get Messages for: "+a);""!=a&&(f+="&phone_num="+encodeURIComponent(a));$.ajax({url:f,global:!1,type:"GET",timeout:9E3,dataType:"json",error:function(a,b,c){$("#main-section").unblock();$("#list-of-tabs").unblock();
_0c6a407c73ba9823ff591cad5618ac637bd42bf5f1afe98d024fc538833cc0547966e204ed82591f();alert("Error in GetMessages: "+c)},statusCode:{500:function(){alert("Error 500")}},success:function(f,h,n){_gaq.push(["_trackEvent","WebApp","Load-Thread-Tab-Click","WebAppPageView",1]);$("#main-section").unblock();$("#list-of-tabs").unblock();$.each(f.messages,function(a,b){var c,f="",h="";c=!1;e="";if("80"==b.type||"81"==b.type||"82"==b.type||"83"==b.type||"84"==b.type||"85"==b.type)c=!0;"61"!=b.inbox_outbox||c||
(e=" sms-reply");if("11"==b.type||"70"==b.type)h=baseUrl+"/imageserve?function=fetchFile&id="+b.id,f='<div id="mms-scale-down" style="height: 60px"><a id="fancyimagepopup" style="margin-left:25px;" href="'+h+'"> <img style="vertical-align:middle;height:100%" src="'+h+'" alt="Photo in process"></a></div>';var k="",h="";c&&(k=" calling-line-item",h=" calling-line-item-color-styling");c=""+('<li id="sms-line-item-msgid-'+b.id+'" class="sms-line-item'+e+k+'">');b.body=_397e68292780b95b477b271743ac79e22ecb5d195d24c716d253c75dd7fd34b1cb1d60c0dde5bbe1(b.body);
c+='<div id= "sms-body-msgid-'+b.id+'" class="sms-body'+h+'" >'+b.body+f+"</div>";f="";h=b.ts_server;2==b.status_route?f='Pending<span class="tooltip"><span>Message has been sent to MightyText. Waiting for confirmation from your phone that it got sent.</span><img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span>':99==b.status_route&&(h=b.ts_phone_forward);c+='<span class="sms-time" id="message-status-text-msgid-'+b.id+'">'+f+"</span>";b.is_starred?(star_image_url="starred.png",
star_class_at_load="starred"):(star_image_url="unstarred.png",star_class_at_load="unstarred");c=c+'<span class="sms-time">'+_0c800fd990afaa098e2b4c4a8e59f273d3cdb66372a63f72e856d8ded49ee65077238a4ec8b5b453DisplayPurposes(h,!0);c+='<a id="STAR-'+b.id+'" href="#" onclick="_8b1a6df74ebc4a98d361f68bfc60785fbe182fe2c2ec848a283c6aa7a6808b2bb88e262e7e3fa605(this);" class="'+star_class_at_load+'"  style="margin-left:5px;margin-right:5px"><img src="'+star_image_url+'"/></a>';c+='<a id="DELETE-MESSAGE-'+b.id+
'"" href="#" onclick="_4c5752e054a2632e13e58f18b0550b3ea6b84f62764ce6668df3ee44d80e3478312a3f81197ae82f(\''+b.id+"','"+b.phone_num_clean+"','"+b.type+'\'  );" class="delete-message" style="visibility:hidden"><img width=11 height=12 src="trashcan.png"/></a>';c+="</span></li>";d=c+d;g="#sms-body-msgid-"+b.id});"END"==b?($("#sms-thread-content").empty(),$("#sms-thread-content").html(d),$("#thread-heading-name").text(c),40==f.messages.length&&($("#sms-thread-content").prepend("<button id='show-more-messages-prompt' class='button-angel' style='display:block;margin:0px auto;width:90%;font-size:13px;margin-bottom:20px;margin-top:10px; height:35px' onclick=''><B>\u2191 &nbsp&nbsp Show more messages &nbsp&nbsp\u2191</B></button>"),
f="_78ff22c6aeb3c34c8832e5f4268e33204d9a627de77f722f7f442edc2952c99df5ee445a3d913d72('"+a+"','"+g+"');",f+="$('#show-more-messages-prompt').html('<img id=\"getting-more-messages-graphic\" src=\"transparent-ajax-loader.gif\">');_gaq.push(['_trackEvent','WebApp','User-Click-See-More-Messages','',1]);",$("#show-more-messages-prompt").attr("onclick",f)),setTimeout('$("#sms-thread-content").scrollTop(4000000+$("#sms-thread-content").height());',10)):($("#show-more-messages-prompt").remove(),$("#sms-thread-content").prepend(d).fadeIn("slow"),
$("#sms-thread-content").scrollTo(b,4,{offset:-50}));$("#sendbox-main").focus();$("#toggle-calls").attr("checked")||$(".calling-line-item").hide();objNewSettings&&1==objNewSettings.enter_to_send&&$("#sendbox-main").unbind("keydown").keydown(function(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),$("#sendbox-main").blur(),console.log("enter triggered, and blur attempt - KEYDOWN"),$("#send-button-main").click())});""!=highlight_msg_id_from_search_global&&(f="#sms-body-msgid-"+highlight_msg_id_from_search_global,
$(f).css({"font-size":"14px","font-weight":"bolder"}),$(f).css({color:"#243443"}),$("#sms-thread-content").scrollTo(f,400,{offset:-5}));highlight_msg_id_from_search_global="";$(".sms-line-item").mouseover(function(){$(this).find(".delete-message").css("visibility","visible")});$(".sms-line-item").mouseout(function(){$(this).find(".delete-message").css("visibility","hidden")});$("a#fancyimagepopup").fancybox({type:"image",transitionIn:"elastic",transitionOut:"elastic"})}})}
function _397e68292780b95b477b271743ac79e22ecb5d195d24c716d253c75dd7fd34b1cb1d60c0dde5bbe1(a){for(;-1<a.search("[\n]");)a=a.replace("\n","<br >");return a=_d650f34642346b66d8960867689b22ec8f4fb2e1432cee131835e0372b4fbdae960bbe69178fb8e7(a)}
function _58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1(a,b,c,d,e,g,f,k){var h="",n="";"single-compose"==b?(n="#send-button-single-text",h=$("#send-one-text").val()):"test-sms-send"==b?(n="N/A",h="Sending Test SMS from MightyText"):(n="#send-button-main",h=$("#sendbox-main").val());var p="",p="",s=baseUrl+"/client?function=send";isCorsSupported||(s="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM");var r=new XMLHttpRequest;r.open("POST",s,!0);r.withCredentials=
"true";r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.onreadystatechange=function(){if(4==this.readyState&&200==r.status){var k=r.responseText;if(-1<k.indexOf("OK"))if(0<k.indexOf("phone call initiated successfully"))document.getElementById("msg").innerHTML="Your phone is now dialing "+c,document.getElementById("remote-phone-dial").innerHTML="Dial from Phone",alert("Your phone is now dialing "+c+". You should get your phone to talk.");else{if(0<k.indexOf("sent to phone")){var k=
k.split(/\{([^}]+)\}/)[1],m="";"send_sms"==a?m="SMS":"send_mms"==a&&(m="MMS");_d3744bc90540ec86c8470146f104603fc58ed86050e68542dc4be53f00ed0641d3508e4f733c0eed(d);_0abd17084151c29148c0fd65fd6c6a5a09754d5ca220684e782a74375c752833a4cc0c9a108d9f05(d,c);var l="outbox-message-msgid-"+k;$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+k+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">"'+h+'" --\x3e '+e+'<span class="sms-time" id="'+
l+'">Sending\u2026</span></li>');document.getElementById(l).innerHTML='Request sent<br>to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">';"single-compose"==b?($("#send-one-text").val(""),$("#compose-number").val(""),_e38ce5e85ef34605495ae43d262095f48b02e483cf3cae73b4aa510b0dd531923eacb87bcbe8158a(),$("#msg").append(m+" to "+e+"\u2026"),0==f&&$("#msg").prepend("Request sent to MightyText: ")):(document.getElementById("msg").innerHTML="Request sent to MightyText. "+
m+" to "+e,$("#mms-image-preview").hide(),$("#mms-image-preview").attr("src",""),$("#mms-blob-id-holder").text(""),$("#send-button-main").text("Send"),$("#send-button-main").attr("disabled",!1),$("#send-button-main").css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"}),$("#charsLeft-main").text("500"),m="message-status-text-msgid-"+k,h=_397e68292780b95b477b271743ac79e22ecb5d195d24c716d253c75dd7fd34b1cb1d60c0dde5bbe1(h),$('<li id="sms-line-item-msgid-'+
k+'"  class="sms-line-item sms-reply JUST-SENT"><div id="sms-body-msgid-'+k+'" class="sms-body" style="display:none" '+p+">"+h+'</div>  <span class="sms-time" id="'+m+'">Sending\u2026</span></li>').appendTo("#sms-thread-content"),$("#sms-body-msgid-"+k).fadeIn("fast"),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()),document.getElementById(m).innerHTML='Sent to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">',$("#sendbox-main").val(""),
setTimeout('$("#sendbox-main").focus();',0))}}else-1<k.indexOf("LOGIN_REQUIRED")?(alert("Not logged in to MightyText."),_324efaf4ac97608b3d2f948bea9e89b06ee863a73751d247493039b964ddd24585934e15aaf753bd(n)):-1<k.indexOf("DEVICE_NOT_REGISTERED")?(alert("Android Phone not registered with MightyText with this Google Account, or MightyText Android App not installed properly."),_324efaf4ac97608b3d2f948bea9e89b06ee863a73751d247493039b964ddd24585934e15aaf753bd(n)):-1<k.indexOf("DeviceQuotaExceeded")?(alert("Android Phone Quota Exceeded.  Error Code: DeviceQuotaExceeded (C2DM)"),
_324efaf4ac97608b3d2f948bea9e89b06ee863a73751d247493039b964ddd24585934e15aaf753bd(n)):(alert("General Error when issuing C2DM request."),_324efaf4ac97608b3d2f948bea9e89b06ee863a73751d247493039b964ddd24585934e15aaf753bd(n),g("general_error",r))}};if("send_sms"==a)if(-1<h.search("0-35")){var m="deviceType=ac2dm&action=set_env&action_data="+encodeURIComponent(h);alert("Switching Android Env to: "+h)}else-1<h.search("MIGHTYPROD")?(m="deviceType=ac2dm&action=set_env&action_data=prod",alert("Switching Android Env to: "+
h)):m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=send_sms&action_data="+encodeURIComponent(h);else"send_mms"==a?m="phone="+encodeURIComponent(c)+"&type=11&source_client=31&deviceType=ac2dm&action=send_mms&action_data="+encodeURIComponent(h)+"&mms_object_key="+encodeURIComponent(k):"make_automated_call"==a?m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=make_automated_call&action_data="+encodeURIComponent(h):"get_latest_messages_from_phone"==
a?m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=get_latest_messages_from_phone&action_data="+encodeURIComponent(h):"mark_single_message_read"==a?m="deviceType=ac2dm&type=10&source_client=31&action=mark_single_message_read&action_data="+encodeURIComponent(h):"mark_whole_thread_read"==a&&(m="deviceType=ac2dm&action=mark_whole_thread_read&action_data="+encodeURIComponent(h));isCorsSupported||(m=m+"&wagdaedunn="+ckSharedGlobal);r.send(m)}
function _324efaf4ac97608b3d2f948bea9e89b06ee863a73751d247493039b964ddd24585934e15aaf753bd(a){$(a).text("Send");$(a).attr("disabled",!1);$(a).css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"});"#send-button-main"==a?$("#sendbox-main").focus():$("#send-one-text").focus()}
function _a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182(a,b){console.log("listener called for sendSMS function. status returned is: "+a)}
function _83bec2825c468a4f94114007a829977d8aef1f5d39f7acb23971414ba7ffc744581d2da32f24ac59(a){$.ajax({url:"easyXDM/easyXDM.min.js",dataType:"script",cache:!0,success:function(b,c){easyXDM.DomHelper.requiresJSON("easyXDM/json2.js");console.log(b);console.log(c);console.log("XDM JS Load was performed.");_6f0a52808fc0b15e5ff6bf34a923eb859eebe39fa5e2c6d80c3180635188e6c2af73625dd4450818(a)}})}
function _089b83136c84f93951e68c96f7181729c7c6ba9b99fafe97b8ff57816a377815ed949e828a2e7ab7(a,b){a=a.toString();console.log("rightmost_digits_to_find is: "+a);console.log("length of rightmost_digits_to_find is: "+a.length);7>a.length&&(a=_cd728dc99608f03b47a0ba2f76eeadb7d6722c11722944f89091ce5d9b1c5fbdfd00568555f67a8a(a,7),console.log("after padding: "+a));for(var c=Array(2),d=0;d<googleContactsArray.length;d++){var e=_c8fc9058d7c18b9c6b3b026df2cc1f9648b5940d30300cf3e152e70679acbf4b36af0ebadb2607ee(googleContactsArray[d].phone_number_full).search(a);
if(-1<e)return console.log("FOUND "+a+" in Google Contact Array- substring match position is: "+e+" matched with: "+googleContactsArray[d].phone_number_full),c[0]=googleContactsArray[d].name,c[1]=googleContactsArray[d].thumbnail,c}return""}function _db960629f2cb7dfed486aacc38109b3046d255447e4ab81ea5221cb8283f975bc1c05f0524114278(a){return""}
function _6044221ed68bcb4c1246f745e4f5ab54da008991a7049815a37937d6372f1885a4fa7a75ebc425bc(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"}
function _80ef4168edef24af41d4cf923d31940474ad55e74f9ed562bee7d01b41b9afd4421d0c4f2106af4b(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}function _9a9db423bcff1ee633cf0379639aa0cc5e45c09bc01241bc27952ef71d09ca048b6840d14df1d8ee(a){_6044221ed68bcb4c1246f745e4f5ab54da008991a7049815a37937d6372f1885a4fa7a75ebc425bc(a,"",-1)}
function _cd728dc99608f03b47a0ba2f76eeadb7d6722c11722944f89091ce5d9b1c5fbdfd00568555f67a8a(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function _780cfecf82b4047aee12ffb6a272caad5d5ddda49590821242cf96e9181c5565e727ad265fb7f630(){$.ajax({type:"GET",url:baseUrl+"/whitelist?function=setBetaFlag",dataType:"json",success:function(a,b,c){window.location.reload()}}).responseText}
function _69a34e4334326fd73534d6117fd23ce2b46af0606187516dc19d24d43f0a6a349c8d325c1d783d13(){$.blockUI({message:""});$.ajax({type:"GET",url:baseUrl+"/imageupload",dataType:"json",timeout:3E3,success:function(a,b,c){_83bec2825c468a4f94114007a829977d8aef1f5d39f7acb23971414ba7ffc744581d2da32f24ac59(a);$.unblockUI();_92a8a5a516392e82358375535d47302572f6d85012b9f789459cd37bf83f6ed3d6c21ca34e1c2bf6()},error:function(a,b,c){alert("Error in getting File Upload URL: "+c);$.unblockUI();console.log("error in _69a34e4334326fd73534d6117fd23ce2b46af0606187516dc19d24d43f0a6a349c8d325c1d783d13")}});
return!1}function _b82ab02eb52822c110ad078f6281a3a1472fc40c917da7fd9bf8ca11489aa8c816947e56c02cefd1(a){$.ajax({type:"POST",url:"check_admin.php",data:{email_check_pso:a},success:function(a){"true"!=a&&(alert("No dev access!"),window.location="https://mightytext.net")}})}
function _c7b2092f5680ab4137628949adcad21a2e819067136303b4a4869cb7c2c2facd23bb93827f0e7d55(a){$.ajax({type:"POST",url:"https://mightytext.net/app/checkpwd.php",data:{pwd:a},success:function(a){"true"==a?(_780cfecf82b4047aee12ffb6a272caad5d5ddda49590821242cf96e9181c5565e727ad265fb7f630(),setTimeout("window.location.reload();",2E3)):(alert("Not a valid passcode..."),window.location="http://mightytext.net")}})}
function _8b1a6df74ebc4a98d361f68bfc60785fbe182fe2c2ec848a283c6aa7a6808b2bb88e262e7e3fa605(a){var b=$(a).attr("id").substr(5),c=baseUrl+"/content?function=updateMsgInfo";$(a).hasClass("starred")?$.ajax({type:"GET",url:c,dataType:"json",data:{id:b,is_starred:0},success:function(b){!1==b.updated?alert("Error - Message not Un-Favorited. Please report to MightyText team (Error Code: UNFAV7411)"):($(a).removeClass("starred"),$(a).addClass("unstarred"),$(a).find("img").attr("src","unstarred.png"))}}).responseText:
$.ajax({type:"GET",url:c,dataType:"json",data:{id:b,is_starred:1},success:function(b){!1==b.updated?alert("Error - Message not Favorited. Please report to MightyText team (Error Code: FAV3985)"):($(a).removeClass("unstarred"),$(a).addClass("starred"),$(a).find("img").attr("src","starred.png"))}}).responseText}
function _47c7620a1d25f31e1b789d8e7aa325f5c867a78dcf4a12ee1a0802d74aebb93efd3e44bfdfb2cb71(){if(_470d0873cc9b1ae26ac0580a3deb2efc620ab4aad968a767646085e6d1c1daebd04a1905adb0ad0c())return!1;_0c6a407c73ba9823ff591cad5618ac637bd42bf5f1afe98d024fc538833cc0547966e204ed82591f();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"POST",dataType:"json",success:function(a){_74258047da5d3101b89aa110613cc23b83a79aabc06dcec4b5978e64d32f7d5c292d7612cbe9dde7(a.usersettings)}})}
function _cab9c4f958aada761512a6695040e68e742b9965406be5d7bdf47ebe0bd179182b3cf580c4dd2923(a){if(_470d0873cc9b1ae26ac0580a3deb2efc620ab4aad968a767646085e6d1c1daebd04a1905adb0ad0c())return!1;_0c6a407c73ba9823ff591cad5618ac637bd42bf5f1afe98d024fc538833cc0547966e204ed82591f();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"GET",dataType:"json",success:function(b){a&&_74258047da5d3101b89aa110613cc23b83a79aabc06dcec4b5978e64d32f7d5c292d7612cbe9dde7(b.usersettings);
globalSettingsJSONUponLoad=b.usersettings;globalSettingsJSONUponLoad.settings_list?objNewSettings=jQuery.parseJSON(globalSettingsJSONUponLoad.settings_list.value):(objNewSettings=jQuery.parseJSON("{}"),_8fcc5141ed945cc9a883f41de7755e53da7c1651cec79fe85692f6a999a9f2d890a447a2435b1158("settings_list",'{"enter_to_send":1,"notif_content":2}',!1))}})}var helperGlobalSettingsObjectSetter;
function _6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(a,b){helperGlobalSettingsObjectSetter=objNewSettings;eval("helperGlobalSettingsObjectSetter."+a+" = "+b);var c=$.toJSON(helperGlobalSettingsObjectSetter);_8fcc5141ed945cc9a883f41de7755e53da7c1651cec79fe85692f6a999a9f2d890a447a2435b1158("settings_list",c,!0)}
function _8fcc5141ed945cc9a883f41de7755e53da7c1651cec79fe85692f6a999a9f2d890a447a2435b1158(a,b,c){c&&$("#msg").html("Saving Settings...");var d="",e=baseUrl+"/usersettings?function=updateUserSettings",e=e+("&"+a+"="+encodeURIComponent(b));isCorsSupported||(e="https://mightytext.net/proxy-in-root.php?route=updateUserSettings",d="&wagdaedunn="+ckSharedGlobal,d+="&"+a+"="+encodeURIComponent(b));$.ajax({url:e,global:!1,xhrFields:{withCredentials:!0},type:"POST",data:d,dataType:"json",success:function(a){c&&
("success"==a.usersettings?document.getElementById("msg").innerHTML="Settings saved.":document.getElementById("msg").innerHTML="Error updating setting.",_b422c0de77ee799574484936c0a047c235fbc57659129aacfb6cebbe2c52f30ef3424209f7252e82("USER_UPDATED_SETTINGS_IN_WEBAPP:"))}})}
function _03bea6486e9232b2f6e393fdcb2bcbe64a3720e3279f3bd62bfd2e9493a5df9f7686836a85b3c403(a){var b=$("#sendbox-main").val();if(a){if(1>b.length)return alert("Message is blank"),$("#sendbox-main").focus(),!1;if(500<b.length)return alert("Message is > 500 Characters long."),!1}return!0}
function _d7879a5e1d9d34f0a376f330d569e5056e9d13a8ebe35006bbca824e3752728a4b84618c476ae97f(){var a;a='<div id="holder-msg"> <div id="msg" class="user-alert" style=""></div></div><div id="sms-container"><div id="sms-thread-heading" style="float:left;width:100%;z-index:10;padding-bottom:10px;margin-bottom:0px;margin-top:0px;text-align:left;clear:both;border-bottom:1px solid #CCC;background-color:#0099CC;border-radius: 5px 5px 0px 0px;">';a+='<span id="thread-heading-name" style="font-size:22px;padding-left:10px;margin-top:13px;margin-left:5px;color:white;float:left;-webkit-text-stroke: 1px transparent;font-weight:500" class="tk-proxima-nova-condensed"></span>';
a+='<span id="thread-heading-actions" style="float:right;margin-top:5px">';a+='<button id="delete-all-from-sender" style="float:right;font-size:11px;padding:7px" class="negative button" onclick="nothing_placeholder"><span class="trash icon"></span> Delete all</button>';a+='<button id="remote-phone-dial" style="float:right;font-size:13px;margin-left:10px;padding-left:5px" class="positive" onclick="_58edec4e040ebe537c1596b243f6238311bd2d929ebd73c45a1f7ac5c0cc48cd226748fc95464ed1(\'send_sms\',\'test-SMS from stub\',111111,11111,\'_a6dc18be3db5139e884762e9ef5ed4ad59e535ebc171530817c1ccbc43a464a505ce7b7f70eab182\');"> <img height=14 width=14 style="margin-right:10px" src="phone_call_icon.png">Dial from Phone</button>';
a+='<span style="float:left;color:white;font-size:12px;margin-left:10px;margin-top:7px;margin-right:10px;padding-left:5px"><input type="checkbox" name="show-calls-toggle" value="x" id="toggle-calls" checked onclick="$(\'.calling-line-item\').toggle();"/>Show Calls</span>';a+="</span></div>";a+='<div id="sms-thread-content" class="text-message-list"></div>';a+='<div id="inputsms-main">';a+='<textarea id="sendbox-main" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-inputsms-main\').innerHTML=\'\';" style="float:left;margin-left:10px;width:60%;max-width:60%;height:50px;max-height:90%;border:1px solid #CCC;padding:5px;font-size:16px"></textarea>';
a+='<span style="margin-top:160px"></span>';a+='<span id="holder-adjacent-sendbox" style="float:left"><button id="send-button-main" style="float:left;font-size:13px;margin-left:10px" class="positive" onclick=""> <span class="mail icon"></span>Send</button>';a+='<span id="charsLeft-main" style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;margin-left:10px;margin-top:10px;clear:both;float:left"> </span>';a+="</span>";a+=_f261c6fd9154bc9b1fbfafcb8112c1c330b71d2bd13d24e627d55580ff200ab5750065c5b747445f();
a+='<div id="error-text-content-inputsms-main" style="font-weight:bold;color:red;font-size:14px"></div>';a+="</div>";a+="</div>";document.getElementById("main-section").innerHTML=a;$("#sendbox-main").NobleCount("#charsLeft-main")}function _1e78a8503fea8e453abd2b2a21ef2c9761a55b939e91bd01096eb8ec8ab42b9e4b8ee6b4ebddcc75(a){$(a).toggleClass("pressed")}function _9f531cae0a76de50d4ebc6d69ed8c663213a099a1da11062581c8cf0aba6f2c16ffe60328956712a(a,b,c){b=$(b).val().length;a-=b;$(c).text(a)}
function _f261c6fd9154bc9b1fbfafcb8112c1c330b71d2bd13d24e627d55580ff200ab5750065c5b747445f(){var a;a='<button id="upload-image-mms" style="float:left;font-size:11px;margin-left:10px" class="positive" onclick="_69a34e4334326fd73534d6117fd23ce2b46af0606187516dc19d24d43f0a6a349c8d325c1d783d13();"><img height=14 width=14 src="attach-mms-icon.png">MMS</button><div id="holder-mms-image-preview" style="height:60px;max-width: 160px;overflow: auto;border: 1px dashed lightgray;">';a+='<img id="mms-image-preview" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';
a+="</div>";a+='<span id="mms-blob-id-holder" style="display:none"></span>';return a+='<div id="mms-upload-dialog" style="display:none;text-align:left"></div>'}
function _df5f16a9133f94d14789fbb118f419fee897794bd75de97e68f5c95cc4ee2e13dbf4bbc6210f2b68(){$("#mms-upload-dialog").empty();var a;a='<form id="frmUpload" style="font-size:20px" method="POST" target="upload_target" enctype="multipart/form-data"> <input id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="104" type="hidden" /><input id="mms-file-attach" type="file" name="myFile" onchange="_c8cb4f925b2580b0cd6a1c0d07dc8b758ca03c806b6ca6fce3ceae0c3804ce7954530baa32c41df0();"  style="font-size:14px;font-family:arial"/><input type="submit" id="btnSubmit" style="display:none" value="Upload file"/></form>';a+=
'<br><img id="file-upload-progress-indicator" style="display:none" src="upload-progress-pie.gif">';a+='<div id="mms-upload-image-preview-pane" style="height:100px">';a+='<img id="file-just-uploaded" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';a+='<span id="file-uploaded-temp-blobid-holder-in-dialog" style="display:none"></span>';a+="</div>";$("#mms-upload-dialog").html(a)}
function _92a8a5a516392e82358375535d47302572f6d85012b9f789459cd37bf83f6ed3d6c21ca34e1c2bf6(){_df5f16a9133f94d14789fbb118f419fee897794bd75de97e68f5c95cc4ee2e13dbf4bbc6210f2b68();$("#mms-upload-dialog").dialog({open:function(){$("#mms-dialog-button-ok").attr("disabled",!0);$("#mms-dialog-button-ok").css("color","#BFBFBF");$("#mms-dialog-button-ok").removeClass("hover")},width:400,modal:!0,title:"Attach a Picture (MMS)",buttons:[{text:"OK",id:"mms-dialog-button-ok",click:function(){$("#mms-blob-id-holder").text($("#file-uploaded-temp-blobid-holder-in-dialog").text());
var a=$("#file-just-uploaded").attr("src");$("#mms-image-preview").show();$("#mms-image-preview").attr("src",a);$(this).dialog("close")}},{text:"Cancel",id:"mms-dialog-button-cancel",click:function(){$("#mms-upload-dialog").empty();$("#mms-blob-id-holder").text("");$(this).dialog("close")}}]})}
function _6f0a52808fc0b15e5ff6bf34a923eb859eebe39fa5e2c6d80c3180635188e6c2af73625dd4450818(a){var b,c=baseUrl;new easyXDM.Rpc({remote:c+"/itest2.htm",swf:c+"/../easyxdm.swf",onReady:function(){var c=document.getElementById("mms-upload-dialog"),e=document.getElementById("frmUpload");e.action=a;e.style.display="block";c.style.display="block";b=document.getElementById("btnSubmit");e.onsubmit=function(){b.disabled="disabled";$("#file-upload-progress-indicator").show()}}},{local:{returnUploadResponse:function(a){b.disabled=
null;"success"!=a.status?alert("Error uploading attachment."):($("#mms-dialog-button-ok").attr("disabled",!1),$("#mms-dialog-button-ok").css("color","green"),$("#file-upload-progress-indicator").hide(),$("#file-just-uploaded").attr("src",baseUrl+"/imageserve?function=viewFile&blob-key="+a.blobID),$("#file-just-uploaded").show(),$("#file-uploaded-temp-blobid-holder-in-dialog").text(a.blobID))}}})}
function _c8cb4f925b2580b0cd6a1c0d07dc8b758ca03c806b6ca6fce3ceae0c3804ce7954530baa32c41df0(){"undefined"!==typeof FileReader&&2097152<$("#mms-file-attach")[0].files[0].fileSize?alert("File too large. File upload limit is 2MB"):$("#frmUpload").submit()}var globalSettingsJSONUponLoad,objNewSettings;
function _74258047da5d3101b89aa110613cc23b83a79aabc06dcec4b5978e64d32f7d5c292d7612cbe9dde7(a){_gaq.push(["_trackEvent","WebApp","Settings-Pane-Load","",1]);document.getElementById("msg").innerHTML="";$("#sms-container").unblock();$("#sms-container").css("height","90%");document.getElementById("sms-container").innerHTML="";document.getElementById("sms-container").innerHTML='<h2 style="padding:10px;padding-bottom:0px;margin:0;text-align:left"><B>Settings</B></h2><div id="settingsPane" style="color:#333;padding:10px;text-align:left;background-color:white;margin-top:5px;height:90%;overflow-y:scroll"></div>';
document.getElementById("settingsPane").innerHTML+='<div id="numDaysKeepMessagesSelection" class="options-section" style="margin-top:0px"><strong>How Long to Keep Messages</strong>: How long should MightyText keep a copy of SMS, MMS, Call Logs<br><br> <select id="setting_num_days_keep" name="num_days_keep" onchange="_8fcc5141ed945cc9a883f41de7755e53da7c1651cec79fe85692f6a999a9f2d890a447a2435b1158(this.name,this.value,true);"><option value="1">1 day</option><option value="14">14 days</option><option value="30">30 days</option><option value="60">60 days</option><option value="180">6 months</option></select></div>';
$('#setting_num_days_keep option[value="'+a.num_days_keep+'"]').attr("selected","selected");if(a.settings_list)if(objNewSettings=jQuery.parseJSON(a.settings_list.value),void 0==objNewSettings||void 0==objNewSettings.enter_to_send)objNewSettings.enter_to_send=1,_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb("enter_to_send",1);else{document.getElementById("settingsPane").innerHTML+='<div id="shouldEnterSendMessage" class="options-section"><strong>Pressing Enter to send message (when typing message)</strong><br><br> <input type="radio" name="enter_to_send" value="1" onclick="_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(this.name,this.value);">Yes, pressing Enter sends message <span style="font-size:11px;color:green">&nbsp (Can use Shift-Enter for new line)</span><br> <input type="radio" name="enter_to_send" value="0" onclick="_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(this.name,this.value);">No, pressing Enter will not send message</div>';
a='[value="'+objNewSettings.enter_to_send+'"]';$("input:radio[name=enter_to_send]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_toggle_on_off)objNewSettings.notif_toggle_on_off=1,_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb("notif_toggle_on_off",1);document.getElementById("settingsPane").innerHTML+='<div id="notificationToggleOnOff" class="options-section"><strong>Popup Notifications</strong>: Display a Popup  on Incoming SMS, MMS, Calls<br><br> <input type="radio" name="notif_toggle_on_off" value="1" onclick="_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(this.name,this.value);">Popup Notifications ON <br> <input type="radio" name="notif_toggle_on_off" value="0" onclick="_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(this.name,this.value);">Popup Notifications OFF<br></div>';
a='[value="'+objNewSettings.notif_toggle_on_off+'"]';$("input:radio[name=notif_toggle_on_off]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_dismiss_time)objNewSettings.notif_dismiss_time=9999,_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb("notif_dismiss_time",9999);document.getElementById("settingsPane").innerHTML+='<div id="notifDismiss" class="options-section"><strong>Popup Notification Auto-Close</strong>: If &amp when to automatically close Popup Notifications<br><span style="font-size:11px;color:green">(Chrome Extension & Firefox-PC only)<a onclick="_679ac6aa6ed0f6caf42c7d88998abcb4204a75f4ba290436fa528309a3512b6b7f459a469c365dcc();"> <U>Learn more</U></a></span><br><br> <select id="setting_notif_dismiss" name="notif_dismiss_time" onchange="_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(this.name,this.value);"><option value="9999">Do Not Auto-Close</option><option value="10">After 10 seconds</option><option value="30">After 30 seconds</option><option value="60">After 1 minute</option><option value="300">After 5 minutes</option></select></div>';
$('#setting_notif_dismiss option[value="'+objNewSettings.notif_dismiss_time+'"]').attr("selected","selected");if(void 0==objNewSettings||void 0==objNewSettings.notif_content)objNewSettings.notif_content=2,_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb("notif_content",2);document.getElementById("settingsPane").innerHTML+='<div id="notificationLevelSelection" class="options-section"><strong>Popup Notification Privacy</strong>: When a new text message arrives, what to show in the popup.<br><br> <input type="radio" name="notif_content" value="2" onclick="_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(this.name,this.value);">Sender Name &amp Message Text ("<B>Message from Bob:</B> Running 15 minutes late") <br> <input type="radio" name="notif_content" value="1" onclick="_6f1671600111ecd56480b0021bc7258078178d165c1278e52cbe05b09d231cca3bf156b7b33499eb(this.name,this.value);">Only Sender Name ("<B>Message from Bob:</B> Click to see message...")</div>';
a='[value="'+objNewSettings.notif_content+'"]';$("input:radio[name=notif_content]").filter(a).attr("checked",!0);document.getElementById("settingsPane").innerHTML+='<div id="adminTools" class="options-section"><strong>Misc</strong><br><br>';document.getElementById("adminTools").innerHTML+='<button onclick="_ec19f39b66288e3d1bb727f9b165748b45d4c2119de34ca93cb26a5ed14901fe2d9cb732e418d397();">Send a test SMS (to USA #)</button>';void 0==current_server_stored_google_contacts_token?document.getElementById("adminTools").innerHTML+=
"<button onclick=\"window.location='"+newContactsOAuthURL+"';\">Link Google Contacts</button><br>":document.getElementById("adminTools").innerHTML+='<button onclick="_92ec6acb953df16a0f8b05b6a2cdc3796a82a199f60e33bbc540d77d01793a1504ec1b04aab7ca81();">Unlink from Google Contacts</button><br>';document.getElementById("adminTools").innerHTML+="<button onclick=\"_f32e31e48d857b015de9bb06c3959667202be5685f599cb178b9b0a47cb3bec9fffe20189561247d('push_phone_contacts_to_cloud','na');\">Refresh Contacts from Phone</button>";
document.getElementById("adminTools").innerHTML+='<button onclick="_869c0bf96400dfb18fe189729a9b86e1bdc429ccf3c226f386ed5a341a5eb23c368a1684df62460e();">Clear local Contact Name Cache</button>';document.getElementById("settingsPane").innerHTML+="</div>"}else objNewSettings=jQuery.parseJSON("{}"),_8fcc5141ed945cc9a883f41de7755e53da7c1651cec79fe85692f6a999a9f2d890a447a2435b1158("settings_list",'{"enter_to_send":1,"notif_content":2}',!1)}
function _869c0bf96400dfb18fe189729a9b86e1bdc429ccf3c226f386ed5a341a5eb23c368a1684df62460e(){var a=$.jStorage.index();console.log(a);$.jStorage.flush()}
function _679ac6aa6ed0f6caf42c7d88998abcb4204a75f4ba290436fa528309a3512b6b7f459a469c365dcc(){alert("This setting will only work if running the Chrome Extension(PC or Mac), or using Firefox on a PC.  \n\n It won't work for Firefox-Mac users using Growl as the notification dismiss timeout is set within Growl.\n\nSafari & Internet Explorer users: We plan to have a notifications feature soon.")}
function _00ccac220b4f5f163bcf1a1b72f4efcf7ddc1f19019a954af7fbddb9f1d38528b0d2a6d328b35039(a){null==window.localStorage?_9fee5110996487c12e15f4583e83702e4af6ce6e0b1ea91d44be154a5ee3041cc94b172fa6647528("Local storage is required!"):(a=a.value,3==a?window.localStorage.notifLevel=3:2==a?window.localStorage.notifLevel=2:1==a&&(window.localStorage.notifLevel=1),document.getElementById("msg").innerHTML="Updated Notification Preference")}
function _e25f8d8d5a60f78f5dfcb22d9e6086b91c3bb9833d7c4df01c05d458af8bc910fd9615729685c3a3(){$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:null,max_chars:500,block_negative:!0,cloak:!1,in_dom:!1}}
function _3b01ed5e0e50a72facc3a69036c54852ca66aff4be82e672d352e6e819364baa09a5851f210dd0ae(a){null==window.localStorage?_9fee5110996487c12e15f4583e83702e4af6ce6e0b1ea91d44be154a5ee3041cc94b172fa6647528("Local storage is required!"):(a=a.value,1==a?window.localStorage.overridePrefix=1:0==a&&(window.localStorage.overridePrefix=0),document.getElementById("msg").innerHTML="Updated +1 Override Setting",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _72cec463e1a0879411dd274b7fceb1755a1b3bfeb87cd0820d8917261590765f1c9c45ddb352fcf2(a,b,c){a=document.getElementById(a);b=document.getElementById(b);a.value.length>c?a.value=a.value.substring(0,c):b.value=c-a.value.length}
function _31f9cd93fc9e616cbb2c3cb329c50ae1d11ec962f45a41d551874cc903335c90360e8ff40de71b5d(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);b='<table class="'+b+'">';if(c){b+="<thead><tr>";for(var d in a[0])b+='<th scope="col">'+d+"</th>";b+="</tr></thead>"}b+="<tbody>";for(c=0;c<a.length;c++){b+=0==c%2?'<tr class="alt">':"<tr>";for(d in a[c])b+="<td>"+a[c][d]+"</td>";b+="</tr>"}return b+="</tbody></table>"}
function _180eee0dd0e7bb0bc37afd978850d397b4fa62b2ca977fed2f66ca39587b4456e6cd3007f76b8c43(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);a=JSON.parse(a);b='<table class="'+b+'"><tbody>';for(var d=0;d<a.length;d++){var e=0,g;for(g in a[d])b+=0==e%2?'<tr class="alt">':"<tr>",c&&(b+='<th scope="row">'+g+"</th>"),b+="<td>"+a[d][g]+"</td>",b+="</tr>",e++}b+="</tbody>";return b+="</table>"}
function _83fc48126010efa6ab30a339c5172746bb46f16c6983d829dac9373cfe4ef62823e254d806a3c847(){setTimeout("_445b0a4fd3d20cc27aaf7b1d4fcfa5c933237e327581f9f7cb4e2c129cf3994be96f620fca5eb4c0();",5E3)}function _445b0a4fd3d20cc27aaf7b1d4fcfa5c933237e327581f9f7cb4e2c129cf3994be96f620fca5eb4c0(){$.titleAlert("New SMS Received!",{requireBlur:!1,stopOnFocus:!0,duration:3E4,interval:1500})}
function _d650f34642346b66d8960867689b22ec8f4fb2e1432cee131835e0372b4fbdae960bbe69178fb8e7(a){return a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a target='_blank' href='$1'>$1</a>")}function _0c800fd990afaa098e2b4c4a8e59f273d3cdb66372a63f72e856d8ded49ee65077238a4ec8b5b453DisplayPurposesOnlyTimeNoDay(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("h:mm a")}
function _0c800fd990afaa098e2b4c4a8e59f273d3cdb66372a63f72e856d8ded49ee65077238a4ec8b5b453DisplayPurposes(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("MMM DD h:mm a")}function _8365683bfc7178af634b06bc1620bb504624a905e5f8304ca74a58759752fc92def55ab7e9d82c70(){$.ajax({url:"https://textyserver.appspot.com/test?function=test500",global:!1,type:"POST",xhrFields:{withCredentials:!0},statusCode:{500:function(){alert("Error 500")}},success:function(a,b,c){alert(a);console.log(a)}})}
var ckSharedGlobal="";function _0a538bfcd7817a58574a93c93ad8c540c025e1f9a6fbc67cf8603e34ea170b5229baf0cf68b43c8d(a){ckSharedGlobal=a}function _7b924decc6477ce1a3d6874e3467ee272314968e4b80b513a4c9fab1d54410760d7edac236b32c40(){$.ajax({url:baseUrl+"/test?function=showstuff",global:!1,type:"GET",timeout:8E3,dataType:"json",xhrFields:{withCredentials:!0},error:function(a,b,c){},success:function(a,b,c){}})}isCorsSupported||_7b924decc6477ce1a3d6874e3467ee272314968e4b80b513a4c9fab1d54410760d7edac236b32c40();
function _6044221ed68bcb4c1246f745e4f5ab54da008991a7049815a37937d6372f1885a4fa7a75ebc425bc(a,b,c){var d=new Date;d.setDate(d.getDate()+c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}function _6044221ed68bcb4c1246f745e4f5ab54da008991a7049815a37937d6372f1885a4fa7a75ebc425bcInSeconds(a,b,c){var d=new Date;d.setTime((new Date).getTime()+1E3*c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}
function _eb0af7d866381401dcf9a07532f89aed7ad10e45ae20365483a1922da98536998a3e069e916b2b90(){return"withCredentials"in new XMLHttpRequest?!0:!1}function _c15c787bf71f1ac6b9756a1e9ec79cd1a1a367866900f96898d712178c88e3e019fe1e8ac92332d4(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}
function _4daeab1269d433045d6f1b41fe98deb11b21c814952e870c8d717ac9ec22065f8e2cd801763fbc05(){return $.ajax({type:"GET",url:"https://www.googleapis.com/plus/v1/people/me?pp=1&key=testwgda",cache:!1,jsonpCallback:"testConnection",dataType:"jsonp",success:function(a){console.log("Network ping to FB -- fine...");return!0},error:function(a){alert(1);return!1}})}
function _ef727e6c3ac23f027336370f43b74f22ea812bbdf32901307b28ba26eca14dea775e9bf9e76d814d(){var a=new XMLHttpRequest;a.overrideMimeType("text/plain; charset=x-user-defined");a.open("GET","http://jonathanleighton.com/images/me.jpg",!1);a.send(null);for(var b="",c=0;c<a.responseText.length;c++)b+=String.fromCharCode(a.responseText.charCodeAt(c)&255);a="data:image/jpeg;base64,"+window.btoa(b);$("#mtlogo").attr("src",a)}
function _b422c0de77ee799574484936c0a047c235fbc57659129aacfb6cebbe2c52f30ef3424209f7252e82(a){console.log(" ");console.log("------------------------------------------------ Sending CAPI Test Message from WebApp -----------------------------------");body_text_to_send=a+" ---- "+Date();$.ajax({url:baseUrl+"/test?function=capi&body="+body_text_to_send+"&phone_num=555555555",global:!1,type:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(a){console.log(a);-1!=a.search("user not logged in")?
console.log("User is not logged in to MightyText -- found out during CAPI time check"):-1!=a.search("CAPI test sent successfully")&&console.log("Successfully SENT CAPI test message from WebAPP")}})};
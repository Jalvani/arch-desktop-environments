var notification_html_webapp_new,webapp_capi_health_check_string_to_match,healthCheckArrayPending=[],webapp_crx_time_last_channel_token_obtained=0,webapp_crx_time_last_successful_health_check_received=0,webapp_crx_globalUserSettingsUponCRXLoad,ts_last_battery_alert_notif_invoked=0;window.setTimeout(function(){_30dc6216c7a260a043c2ea92a542e52caf0e80420182fe82795f5aecf43f128f5efaafd4a87b5b9f()},0);
function _30dc6216c7a260a043c2ea92a542e52caf0e80420182fe82795f5aecf43f128f5efaafd4a87b5b9f(){var a=document.body.appendChild(document.createElement("iframe"));a.src="https://mightytext.net/prod-assets/chrome_ext_heartbeat";a.height=0;a.onload=function(){console.log("set localstorage of CRX alive via iframe")}}function _5d8d464d0b8682570d4a3811037cc37223b2ab5e264fa9d3a7d18c4fc607e919fad352340a7dbe4e(){}
function _2ede96b2656ba50d6f3699f4ac0ae8147b6968e3ceacde550c6a4fbb57e7f66cff6a223ce68cae07(){for(var a="",b=0;5>b;b++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return a}function _abcaa559d8efc88aee85bbf489134bd3053d9b0bf145850b9dfdbca9d497da0b5364ff4674c37b69(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}
function _04f4d2de8065bbfc01230aa7ddc23cee747df8a3c9bf83cc0d30bde2484757ae4e1eadf4d66d17f8(){checkLastMightyNetworkPing();_a14e3f68eb8ecb63144f7dd61010f1fa8f518841c5dbfe80dfc245f68f4b87563908e3d769267f99();_a9fb05278327ef9e5e5b15f5dc7496fcdbd472f1f87c3c1bbda07013241250d5b6154b9de7838988();console.log("-------------------------\x3e Heartbeat WEBAPP USER @ "+Date()+" ###")}
function _a9fb05278327ef9e5e5b15f5dc7496fcdbd472f1f87c3c1bbda07013241250d5b6154b9de7838988(){var a=((new Date).getTime()-webapp_crx_time_last_successful_health_check_received.getTime())/1E3;console.log(" ");console.info("Seconds Since LAST SUCCESSFUL INCOMING CAPI: "+_abcaa559d8efc88aee85bbf489134bd3053d9b0bf145850b9dfdbca9d497da0b5364ff4674c37b69(a,2)+" ("+_abcaa559d8efc88aee85bbf489134bd3053d9b0bf145850b9dfdbca9d497da0b5364ff4674c37b69(a/60,2)+" minutes)");300<a&&_51d372e38a15bab02d1e17e3a2fc28c94ee1fd9996acf5738669ee6ba68f888e0a771bbee3145f79();
480<a?(_gaq.push(["_trackEvent","CRX-Background","CRX-Restart","HealthCheck-PreEmptive-Restart",1]),console.log("ALERT! has been >8 minutes since last incoming CAPI. Will RESTART CRX in 5 seconds . . ."),window.setTimeout(function(){window.location.reload()},5E3)):console.log("----- has NOT been > 8 minutes since last incoming CAPI -- OK");console.log(" ")}var global_count_request_phone_status=0;
function _bc982a7a76d2f497e6ce53fbe2b7471f88d883780ba2f05311895df24ab6af43cc79819288260cfb(){global_count_request_phone_status++;1E3>global_count_request_phone_status?_a4f23c8057530c1af73ed120ef7e7f2d469899dcce50b60c685ba31a1d359a5c68bce9c521fcded2("get_phone_status","check-phone-status-not-needed"):alert("Error CRX-PSTUS50 \r\n \r\n If this continues please notify MightyText team at info@mightytext.net")}
function _a4f23c8057530c1af73ed120ef7e7f2d469899dcce50b60c685ba31a1d359a5c68bce9c521fcded2(a,b,c){b=baseUrl+"/client?function=send&deviceType=ac2dm&source_client=31&action="+a+"&action_data="+b;c&&(b+=c);console.log("send url for Custom C2DM is: "+b);$.ajax({url:b,global:!1,type:"POST",xhrFields:{withCredentials:!0},data:"",dataType:"text",success:function(b,c,g){console.log(b);-1<b.search("sent to phone")||_9eadfaadb20c777d7eac15d3c75be8bd2da2271e3741d59112eee8ae8d8c64eab52203d4e26fe541(a,b)},error:function(a,
b,c){console.log("Error in C2DM: "+c);console.log("Error details: "+c.error)}})}
function _9eadfaadb20c777d7eac15d3c75be8bd2da2271e3741d59112eee8ae8d8c64eab52203d4e26fe541(a,b,c){a="";-1<b.indexOf("LOGIN_REQUIRED")?(_gaq.push(["_trackEvent","CRX","C2DM-Error","LOGIN_REQUIRED",1]),a="Error: Not logged in to MightyText."):-1<b.indexOf("DEVICE_NOT_REGISTERED")?(_gaq.push(["_trackEvent","CRX","C2DM-Error","DEVICE_NOT_REG",1]),a="Error: Android Phone not registered with MightyText with this Google Account, or MightyText Android App not installed properly on your phone."):-1<b.indexOf("DeviceQuotaExceeded")?
(_gaq.push(["_trackEvent","CRX","C2DM-Error","DEVICE_QUOTA_EXCEEDED",1]),a="Android Phone Quota Exceeded.  Error Code: DeviceQuotaExceeded (C2DM)"):(a="C2DM/GCM Error.  Please retry. \r\n\r\n Error Info: \r\n\r\n"+b,_gaq.push(["_trackEvent","CRX","C2DM-Error","GENERAL C2DM ERROR",1]));alert(a)}
function _a14e3f68eb8ecb63144f7dd61010f1fa8f518841c5dbfe80dfc245f68f4b87563908e3d769267f99(){var a=((new Date).getTime()-webapp_crx_time_last_channel_token_obtained.getTime())/1E3;console.log(" ");console.info("Seconds Since LAST CHANNEL TOKEN OBTAINED: "+_abcaa559d8efc88aee85bbf489134bd3053d9b0bf145850b9dfdbca9d497da0b5364ff4674c37b69(a,2)+" ("+_abcaa559d8efc88aee85bbf489134bd3053d9b0bf145850b9dfdbca9d497da0b5364ff4674c37b69(a/60,2)+" minutes)");13500<a?(_gaq.push(["_trackEvent","Background","CAPI-PreEmptive-Restart-1_75hrs",
"",1]),console.log("has been > 3.75 hours, get a new channel token"),window.location.reload()):console.log("has not been > 3.75 hours since last CAPI channel token was retrieved, no need to get a new one.");console.log(" ")}var GLOBAL_CAPI_SOCKET_LAST_KNOWN_FOR_MANUAL_CLOSE_UPON_LOGOUT;
function _e626da806166aadc4391ebd23a569b7a781dc13baede001f62ff41061142370cef111e3eddef5738(){console.log(".");console.log("Getting channel API token . . . for client_id_name=CRX-Notif");$.ajax({type:"GET",url:baseUrl+"/getJson?function=getChannelTokenForWebApp&client=CRX_WEBAPP&mins=120",success:function(a){console.log("Response from cloud after channel attempt (should have valid_token prepend): "+a);healthCheckArrayPending=[];time_last_success_mighty_ping=new Date;_7bdb38fc5d2171bc452cccd25fc9e2476f90cb8c677ad7334d33ccd1ae3ee9e57f1814634342c0ec();
if(0>a.search("valid_token:"))console.error("No valid_token prepend found from Channel API!");else{a=a.replace("valid_token:","");var b=(new goog.appengine.Channel(a)).open();GLOBAL_CAPI_SOCKET_LAST_KNOWN_FOR_MANUAL_CLOSE_UPON_LOGOUT=b;b.onopen=function(){webapp_crx_time_last_channel_token_obtained=new Date;time_last_success_mighty_ping=new Date;console.log("Socket Opened via Channel API with token id: "+a);console.log("Current time.. - when channel API new socket is opened : "+Date());console.log("-------------------------------");
window.setTimeout(function(){_51d372e38a15bab02d1e17e3a2fc28c94ee1fd9996acf5738669ee6ba68f888e0a771bbee3145f79()},2E3);_gaq.push(["_trackEvent","Background","ChannelAPI-Open-Socket","",1])};b.onmessage=function(a){_gaq.push(["_trackEvent","Background","ChannelAPI-Message-Received","",1]);console.info("**** CHANNEL SOCKET ONMESSAGE *** ");console.log("Message arrived via channel API= "+a.data);time_last_success_mighty_ping=new Date;_35b1381699eecf87e0bb3bed78bbaf12951a715b47b6f51b73330a33bb5068826d54fbfa21de803f(a.data)};
b.onerror=function(a){console.error("CAPI ONError called - msg from GCAPI is: "+a);_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONERROR","",1])};b.onclose=function(a){console.error("!!!!!!!!!!!!! TOKEN GONE - probably expired (via onclose callback) !!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONCLOSE","",1]);_e626da806166aadc4391ebd23a569b7a781dc13baede001f62ff41061142370cef111e3eddef5738()}}}}).responseText}var globalNotifArray=[];
function _e3d4c0083640b080ac9341929c071f0a85257f1d41d45b3e7b8c8e80f75910a005cf27a9c05d9687(){console.log("**** IN REMOVE TOP NOTIF FUNCTION ***");var a=globalNotifArray.shift(this);a.onclose=function(a){console.log("unsetting notification onclose event so it doesnt get marked as read by phone when auto-dismissing!")};a.cancel()}
function _9a8f343d6389c3ce9001dbd7fedac7a2e0c96ec52830b9d7cf70e458bec81992a43af938b1eb596e(a){if(3>a.replace(/[^%]/g,"").length)return a;a=a.replace(/\+/g,"%20");return a=decodeURIComponent(a)}var globalNewNotifMetadata={};
function _d4db6fdaac2237fc829090c3626d9e7b1dd1bf42ec436fd62343afd5315a8c2d17f90c93029a267d(a){chrome.notifications.clear(a,function(a){});var b;-1<a.indexOf("-picture")&&globalIfIncomingSMSThenUseLegacyQuickReply?(b=a.replace("-picture",""),b="https://mightytext.net/web/#mode=quick&num="+globalNewNotifMetadata[b].phone_num):b=10==globalNewNotifMetadata[a].type&&globalIfIncomingSMSThenUseLegacyQuickReply?"https://mightytext.net/quick-reply/quick#"+globalNewNotifMetadata[a].phone_num:11==globalNewNotifMetadata[a].type&&
globalIfIncomingSMSThenUseLegacyQuickReply?"https://mightytext.net/quick-reply/quick#"+globalNewNotifMetadata[a].phone_num:80==globalNewNotifMetadata[a].type||81==globalNewNotifMetadata[a].type?"https://mightytext.net/web/#mode=quick&num="+globalNewNotifMetadata[a].phone_num:"https://mightytext.net/web/#mode=quick&msgid="+globalNewNotifMetadata[a].id;_303a50fd896e591178c9c557184acba2b1ed602b282f0b00419a4cdd2d6157f4243a2e8f0b65f861(b);_628a188a5986572215c69660a2e13832ec1c8318fcc991d3feac50b1829c604c1c54783564ce9148(globalNewNotifMetadata[a].body,
globalNewNotifMetadata[a].phone_num_clean)}
function _326d5a053766e6978a9edc45b2bfbc0ebac438f6a78e81b7b61294a9c58a3f70e07fdf403c50f65d(a){console.log(globalNewNotifMetadata[a]);var b=new Date,c=b.getHours(),b=b.getMinutes(),d="",d=10>b?"0"+b.toString():b.toString(),c=c.toString()+":"+d;-1==globalNewNotifMetadata[a].body.indexOf("snoozed")&&(globalNewNotifMetadata[a].body=globalNewNotifMetadata[a].body+"' \r\n\r\n(First reminded at "+c+")");a='{"new_content":'+JSON.stringify(globalNewNotifMetadata[a],null,2)+"}";console.log(a);_35b1381699eecf87e0bb3bed78bbaf12951a715b47b6f51b73330a33bb5068826d54fbfa21de803f(a)}
chrome.notifications.onButtonClicked.addListener(function(a,b){0==b?_d4db6fdaac2237fc829090c3626d9e7b1dd1bf42ec436fd62343afd5315a8c2d17f90c93029a267d(a):1==b&&chrome.notifications.clear(a,function(b){b&&(10==globalNewNotifMetadata[a].type||20==globalNewNotifMetadata[a].type?window.setTimeout(function(){_326d5a053766e6978a9edc45b2bfbc0ebac438f6a78e81b7b61294a9c58a3f70e07fdf403c50f65d(a)},3E5):11!=globalNewNotifMetadata[a].type&&21!=globalNewNotifMetadata[a].type||_9a6c95432213b8a8b09ce79b1ac8854dcf9d943fac0b23a697610b6251c1f7394999db64acd2de58(a))})});
function _9a6c95432213b8a8b09ce79b1ac8854dcf9d943fac0b23a697610b6251c1f7394999db64acd2de58(a){globalNewNotifMetadata[a].enlargeMMSMode=1;a='{"new_content":'+JSON.stringify(globalNewNotifMetadata[a],null,2)+"}";_35b1381699eecf87e0bb3bed78bbaf12951a715b47b6f51b73330a33bb5068826d54fbfa21de803f(a)}chrome.notifications.onClicked.addListener(function(a){var b=globalNewNotifMetadata[a].type;if(-1<a.indexOf("-picture")||81==b||80==b)return!1;_d4db6fdaac2237fc829090c3626d9e7b1dd1bf42ec436fd62343afd5315a8c2d17f90c93029a267d(a)});
chrome.notifications.onClosed.addListener(function(a,b){if(-1<a.indexOf("-picture"))return!1;b&&_628a188a5986572215c69660a2e13832ec1c8318fcc991d3feac50b1829c604c1c54783564ce9148(globalNewNotifMetadata[a].body,globalNewNotifMetadata[a].phone_num_clean)});
function _35b1381699eecf87e0bb3bed78bbaf12951a715b47b6f51b73330a33bb5068826d54fbfa21de803f(a){webapp_crx_time_last_successful_health_check_received=new Date;a=jQuery.parseJSON(a);if(void 0!==a.new_content)if(a=a.new_content,-1<a.body.search("CAPI_HEALTH_CHECK"))_671c1e6fbe2c84faf306c3220ab461c8409973004682dfb0e9ac0ef75bfa7d281362977cc0275a4e();else if(-1<a.body.search("USER_UPDATED_SETTINGS_IN_WEBAPP"))_19f3b92d83cc72c955beb3929d9ac04cd18e5a6af97e08edf822d73b14e2915c8d566799a863fc60();else if(webapp_crx_globalUserSettingsUponCRXLoad&&
0==webapp_crx_globalUserSettingsUponCRXLoad.notif_toggle_on_off)console.log("*** DONT POPUP NOTIFICATION - USER PREFERENCE");else{if(61!=a.inbox_outbox&&84!=a.type&&85!=a.type){var b="",c="",d="",e=_9a8f343d6389c3ce9001dbd7fedac7a2e0c96ec52830b9d7cf70e458bec81992a43af938b1eb596e(a.body);10==a.type?(b="",c=e,d="SMS"):11==a.type?void 0!==a.mms_object_key?(b="Picture Message from ",c=e):(b="MMS from ",c="Image is downloading on phone...",d="MMS"):20==a.type?(b="Group text from ",c=e,d="GroupText"):21==
a.type?(b="Group text & picture from ",c=e,d="GroupText"):80==a.type?b="Incoming Call from ":81==a.type&&(b="Missed Call from ");var g="",f="https://mightytext.net/app/Misc-Buddy-Blue-icon.png",g=_41ef7562928934e55d10ce31a2586582bbfaa1f7a5752f3d9b2365ee9a8a2efad28743396371b13f(a.phone_num_clean,a.phone_num),f=_5ea7e846deaa5bcc299f2470963e51ff05dc54a9bb7aa5a065e5d980ec6e5e54790538509980b9e3(a.phone_num_clean,a.phone_num);""!=d&&_kmq.push(["record","Incoming-Message",{Type:d,Client:"CRX"}]);webapp_crx_globalUserSettingsUponCRXLoad&&
1==webapp_crx_globalUserSettingsUponCRXLoad.notif_content&&10==a.type&&(c="Click to see message...");e=3E4;webapp_crx_globalUserSettingsUponCRXLoad&&webapp_crx_globalUserSettingsUponCRXLoad.notif_dismiss_time?e=1E3*webapp_crx_globalUserSettingsUponCRXLoad.notif_dismiss_time:console.log("No Setting found - NOTIF DISMISS TIME - set to default....");console.log("setting notif_dismissal_time to: "+e);globalNewNotifMetadata[a.id]=a;b+=g;g=c+"\r\n\r\n"+_455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75DisplayPurposesOnlyTimeNoDay(a.ts_server,
!0);d="Reply";if(20==a.type||21==a.type)f=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(a.content_author,!0),d=_41ef7562928934e55d10ce31a2586582bbfaa1f7a5752f3d9b2365ee9a8a2efad28743396371b13f(f,a.content_author),f=_5ea7e846deaa5bcc299f2470963e51ff05dc54a9bb7aa5a065e5d980ec6e5e54790538509980b9e3(f,a.content_author),b="Group message from\r\n"+d,d=_98ed7609851c1925fb6f599bb5841722a205784186fd99a41d247015ce386a9a0d15a45ac1d05017("N/A",a.phone_num),g=c+"\r\n\r\n("+
d+")",d="GroupText",d="Reply to group";secondButtonTitle="Remind me in 5 minutes";secondButtonActionIconURL="img/alarm_bell_snooze-48.png";if(11==a.type||21==a.type)f=baseUrl+"/imageserve?function=fetchFile&id="+a.id,secondButtonTitle="View full-size picture",secondButtonActionIconURL="img/photoview_32.png";if(80==a.type||81==a.type)d="Send text message";c={type:"basic",title:b,message:g,priority:2,eventTime:Date.now(),iconUrl:f,buttons:[{title:d,iconUrl:"img/Reply-256.png"},{title:secondButtonTitle,
iconUrl:secondButtonActionIconURL}]};if(void 0!==a.enlargeMMSMode)c={type:"image",title:b,message:g,iconUrl:f,priority:2,eventTime:Date.now(),imageUrl:f,buttons:[{title:d,iconUrl:"img/Reply-256.png"}]},chrome.notifications.create(a.id+"-picture",c,function(){});else{var h=a.id;console.log(c);chrome.notifications.create(h,c,function(){});window.setTimeout(function(){chrome.notifications.clear(h,function(a){})},e)}}}else if(void 0!==a.initial_mms_wakeup)a=a.initial_mms_wakeup,e=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(a.content_author,
!0),c=_41ef7562928934e55d10ce31a2586582bbfaa1f7a5752f3d9b2365ee9a8a2efad28743396371b13f(e,a.content_author),e=_5ea7e846deaa5bcc299f2470963e51ff05dc54a9bb7aa5a065e5d980ec6e5e54790538509980b9e3(e,a.content_author),f="",f=20==a.type?"Incoming Group Message from "+c+"...":"Incoming Picture Message from "+c+"...",a=webkitNotifications.createNotification(e,f,""),a.ondisplay=function(a){setTimeout(function(){a.currentTarget.cancel()},1E4)},a.show();else if(void 0!==a.phone_status){a=a.phone_status;c="";
e=Math.floor(a.battery_level);if("true"==a.battery_is_charging)return console.log("phone is charging - no notification to consider"),!1;f=((new Date).getTime()-parseInt($.jStorage.get("ts_last_battery_alert_notif_shown",0)))/1E3;console.info("Num seconds since last battery alert notification on this CRX: "+f);900<f&&(10>=e||12==e||15==e||17==e||20==e)&&(void 0!==a.ts_phone_utc&&(c="(as of "+moment.unix(a.ts_phone_utc/1E3).format("h:mm a")+")"),a=webkitNotifications.createNotification("img/low_battery_48.png",
"Phone Battery Alert","Your phone battery is low: "+e+"%  "+c),c=(new Date).getTime().toString(),$.jStorage.set("ts_last_battery_alert_notif_shown",c),a.ondisplay=function(a){setTimeout(function(){a.currentTarget.cancel()},12E4)},a.show())}else void 0!==a.ack_processed?(c=a.ack_processed,a="message-status-text-msgid-"+c.id,c="outbox-message-msgid-"+c.id,null!=document.getElementById(a)&&(document.getElementById(a).innerHTML='<B>Phone Sent Message</B> <img style="margin-top:5px" src="checkmark-yes.png">'),
null!=document.getElementById(c)&&(document.getElementById(c).innerHTML='<B>Phone Sent</B> <img src="checkmark-yes.png">')):console.log("unknown incoming CAPI content")}var ntest;
function _98ed7609851c1925fb6f599bb5841722a205784186fd99a41d247015ce386a9a0d15a45ac1d05017(a,b){var c=b;if("GOOGLE_CONTACTS"==globalContactsSyncMethod){var d=[];0!=a&&(d=$.jStorage.get(a,"no-jstorage-val-found"));return c=d.name?d.name:b}d=[];b&&-1<b.indexOf("|")?d=b.split("|"):d.push(b);for(var e=d.length,g="",f=0;f<e;f++){b=d[f];a=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(b,"do_not_zeropad");if("09999999999"==a)return"Unknown / Misc";c=$.jStorage.get(username_prefix_jstrg_purpose+
"|PC_"+a,"no-jstorage-val-found");c="no-jstorage-val-found"==c||void 0==c?b:c.contactName;g+=c;f<e-1&&(g+=", ")}return g}
function _41ef7562928934e55d10ce31a2586582bbfaa1f7a5752f3d9b2365ee9a8a2efad28743396371b13f(a,b){var c=b;"GOOGLE_CONTACTS"==globalContactsSyncMethod?(c=[],0!=a&&(c=$.jStorage.get(a,"no-jstorage-val-found")),c=c.name?c.name:b):(console.log("Attempt to get PHONE CONTACT for phone_num_clean: "+a),phoneContactObj=$.jStorage.get(username_prefix_jstrg_purpose+"|PC_"+a,"no-jstorage-val-found"),c="no-jstorage-val-found"==phoneContactObj||void 0==phoneContactObj?b:phoneContactObj.contactName);return c}
function _5ea7e846deaa5bcc299f2470963e51ff05dc54a9bb7aa5a065e5d980ec6e5e54790538509980b9e3(a,b){var c="img/silhouette.jpg";if("GOOGLE_CONTACTS"==globalContactsSyncMethod){0!=a&&(d=$.jStorage.get(a,"no-jstorage-val-found"));d.name&&""!=d.thumbnail_image_google_base_url&&(c=d.thumbnail_image_google_base_url+"&oauth_token="+global_oauth_contacts_token);var d=[];0!=a&&(d=$.jStorage.get(a,"no-jstorage-val-found"));var e=[],e=$.jStorage.get("google_contacts_token","NONE");e.contacts_token_value&&(current_g_contacts_token=
e.contacts_token_value);d.thumbnail_image_google_base_url&&""!=d.thumbnail_image_google_base_url&&(console.log("thumbnail from jstorage is: "+d.thumbnail_image_google_base_url),c=d.thumbnail_image_google_base_url+"&oauth_token="+current_g_contacts_token)}else photoThumbnailObj=$.jStorage.get(username_prefix_jstrg_purpose+"|PH_PIC_"+a,"no-jstorage-val-found"),"no-jstorage-val-found"==photoThumbnailObj?(console.log("NO PHOTO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+a),c=chrome.extension.getURL("img/silhouette.jpg")):
"NO_PHOTO"!=photoThumbnailObj.contactThumbnailBinary&&2<photoThumbnailObj.contactThumbnailBinary.length&&(c="data:image/jpeg;base64,"+photoThumbnailObj.contactThumbnailBinary);return c}
function _628a188a5986572215c69660a2e13832ec1c8318fcc991d3feac50b1829c604c1c54783564ce9148(a,b){a=unescape(a);var c=b+"|"+a;console.log("attempting to mark message read on phone: "+a+"---  "+b);_a668ab203652e2683e3212291dcdb63c1011cd0bc5f13adf25bee421676addc34c88639417fc9d2c("mark_single_message_read",c,"msgid_local - not needed actually")}
function _7e552e6e5d3a2fa3610779f1948f9dd9403432e4340aae5212fe71205bc8dd98d728b4835e493a3a(a){80!=a.type&&83!=a.type&&70!=a.type||$.jStorage.set("most_recent_call_alert_info",a)}function _303a50fd896e591178c9c557184acba2b1ed602b282f0b00419a4cdd2d6157f4243a2e8f0b65f861(a){_4ff2879272c669c298155235dbf0dff914464d01b0524a3264ee6282bb15b52a8991dc4c5c81c905(a,quickTabExistsJustSwitchToExistingTab,popupQuickReplyWidget)}var popupQuickReplyWidget=function(a){_054bb9bba9fc8cc0f75e1812ce7c20c0c5b5cc808a7d162594038def7fa20343c0c02cc870f23736UpperRight(a)};
function _16a932486c4565ae96c34496656c4bc7dceda536f76ba90a2c298628d3ac325a1d0161f606fadd75(){chrome.tabs.query({},function(a){for(var b=0,c;c=a[b];b++)console.log("Tab is: "+c.url),console.log(c)})}
function _4ff2879272c669c298155235dbf0dff914464d01b0524a3264ee6282bb15b52a8991dc4c5c81c905(a,b,c){chrome.tabs.query({},function(d){for(var e=0,g;g=d[e];e++)if(console.log("Tab is: "+g.url),-1<g.url.indexOf(a))return console.log("found it...stop looping through tabs"),b(g),"RETURN VAL - WAS FOUND";c(a)})}var quickTabExistsJustSwitchToExistingTab=function(a){console.log("TAB EXISTS - heres tab info URL");console.log(a.url);chrome.tabs.update(a.id,{active:!0})};
function _b59519fba70394a71c11ffad3d3b9d5be40cbfea9609857d5a11327ac2b5458f2f868e4a41d94ce2(a){void 0===a&&(a="");chrome.tabs.getAllInWindow(void 0,function(b){for(var c=0,d;d=b[c];c++)if(console.log("Tab is: "+d.url),d.url&&_f21914af57f967753703454d22c996a68b746c532298f69f754c40300b8b07f5c19174bda5d951a4(d.url)){console.log("found MT tab, switching to it now...");console.log("index thing is: "+d.url.indexOf(a));b="";-1<d.url.indexOf("app")?b="app":-1<d.url.indexOf("IE-DEV")&&(b="IE-DEV");-1<d.url.indexOf(a)?
chrome.tabs.update(d.id,{selected:!0},_6d6d9dca7d27099419e66c81c438e0dfc468b8f5f8b99291f38fb719950d6477491306071c530aff):chrome.tabs.update(d.id,{selected:!0,url:"https://mightytext.net/"+b+a},_6d6d9dca7d27099419e66c81c438e0dfc468b8f5f8b99291f38fb719950d6477491306071c530aff);return}chrome.tabs.create({url:_90c814b6dc279671e7c78d86d56d15329edc7c564471c687000c7475a1bef4d2fdc7293c6bcfcd72()+a},function(a){chrome.tabs.update(a.id,{selected:!0});_6d6d9dca7d27099419e66c81c438e0dfc468b8f5f8b99291f38fb719950d6477491306071c530aff()})})}
function _6d6d9dca7d27099419e66c81c438e0dfc468b8f5f8b99291f38fb719950d6477491306071c530aff(){chrome.tabs.getCurrent(function(a){console.log("tab info of closepopupcrxwindow fn is: ");console.log(a);a&&chrome.tabs.remove(a.id,function(){})})}function _90c814b6dc279671e7c78d86d56d15329edc7c564471c687000c7475a1bef4d2fdc7293c6bcfcd72(){return"https://mightytext.net/app"}
function _f21914af57f967753703454d22c996a68b746c532298f69f754c40300b8b07f5c19174bda5d951a4(a){console.log("val is: "+(a.indexOf("https://mightytext.net/app")+a.indexOf("https://mightytext.net/dev")));return-1<a.indexOf("https://mightytext.net/app")||-1<a.indexOf("https://mightytext.net/web")?!0:!1}var notification_restart,notification_signed_out_must_be_global,capi_helper_global_login_state="UNKNOWN";
function _51d372e38a15bab02d1e17e3a2fc28c94ee1fd9996acf5738669ee6ba68f888e0a771bbee3145f79(){console.log(" ");console.log("------------------------------------------------ NEW POLL - HealthCheckCAPI -----------------------------------");console.log("webapp-loop at: "+Date()+" for user email -> "+google_username_currently_logged_in);_a14e3f68eb8ecb63144f7dd61010f1fa8f518841c5dbfe80dfc245f68f4b87563908e3d769267f99();console.log("user status is: "+extra_login_status_info+". . . Log In Status is: "+capi_helper_global_login_state);
body_text_to_send="CAPI_HEALTH_CHECK_FROM_CRX -- "+Date();$.ajax({url:baseUrl+"/test?function=capi&body="+body_text_to_send+"&phone_num=123456789",global:!1,type:"POST",dataType:"text",success:function(a){console.log(a);time_last_success_mighty_ping=new Date;-1!=a.search("user not logged in")?(console.log("User is not logged in to MightyText"),_5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5eeWebAppCRXHelper(!1),GLOBAL_CAPI_SOCKET_LAST_KNOWN_FOR_MANUAL_CLOSE_UPON_LOGOUT.close(),
"SIGNED_IN"==capi_helper_global_login_state&&(notification_signed_out_must_be_global=webkitNotifications.createNotification("img/mightytext_square_logo_48px.png","Signed Out of MightyText","You are now signed out."),notification_signed_out_must_be_global.show(),window.setTimeout(function(){notification_signed_out_must_be_global.cancel()},4E3)),capi_helper_global_login_state="SIGNED_OUT"):-1!=a.search("CAPI test sent successfully")&&(_7bdb38fc5d2171bc452cccd25fc9e2476f90cb8c677ad7334d33ccd1ae3ee9e57f1814634342c0ec(),
capi_helper_global_login_state="SIGNED_IN")}})}function _671c1e6fbe2c84faf306c3220ab461c8409973004682dfb0e9ac0ef75bfa7d281362977cc0275a4e(){webapp_crx_time_last_successful_health_check_received=new Date}
function _5a3d2fe99d5f7a03d48d8a67a841ab620fff88bf369d869bd6c427a6fdd534091ee37b028fdeb2b4(a,b){window.localStorage.usingWebAppNew=1;_e626da806166aadc4391ebd23a569b7a781dc13baede001f62ff41061142370cef111e3eddef5738();b&&console.log(b);b.user_token.accessToken?(globalContactsSyncMethod="GOOGLE_CONTACTS",console.log("YES - Google contacts token"),_458c1767884b1039a38c78c216c0b99a0a696d3e0fcc91c44ddf278b1ff01892596bca22f85c53b5(),window.setInterval(function(){_458c1767884b1039a38c78c216c0b99a0a696d3e0fcc91c44ddf278b1ff01892596bca22f85c53b5()},
33E5)):(console.log("no g contacts token"),_bf0d7192227b0e71fb5ad7fd38613b5436dd2dea5a444a561f3e3fa9eb0070de742a36c08a9cdbb5("NO_CONTACTS_TOKEN"));_19f3b92d83cc72c955beb3929d9ac04cd18e5a6af97e08edf822d73b14e2915c8d566799a863fc60()}
function _7bdb38fc5d2171bc452cccd25fc9e2476f90cb8c677ad7334d33ccd1ae3ee9e57f1814634342c0ec(){webapp_crx_globalUserSettingsUponCRXLoad&&(0==webapp_crx_globalUserSettingsUponCRXLoad.notif_toggle_on_off?chrome.browserAction.setIcon({path:"img/mightytext_square_logo_19px_notif_off.png"}):chrome.browserAction.setIcon({path:"img/mt_new_19x19.png"}))}
function _19f3b92d83cc72c955beb3929d9ac04cd18e5a6af97e08edf822d73b14e2915c8d566799a863fc60(){$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"POST",dataType:"json",success:function(a){a.usersettings.settings_list&&(webapp_crx_globalUserSettingsUponCRXLoad=jQuery.parseJSON(a.usersettings.settings_list.value),_7bdb38fc5d2171bc452cccd25fc9e2476f90cb8c677ad7334d33ccd1ae3ee9e57f1814634342c0ec())}})}
function _c707f315a3293d9fba96fa6709d44ed7ed1ab1c55f7cdd17231273f03c3699e3d41c13930dc7d910(){for(var a="",b=0;5>b;b++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return a}function _5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5eeWebAppCRXHelper(a){a?chrome.browserAction.setIcon({path:"img/icon-19-on.png"}):chrome.browserAction.setIcon({path:"img/icon-19-off.png"})}
function _de1337f27dee2c2934f430cb22f089369935084d151551de4f6b8b91b239e55a1a4eca84ddbc1f47(){var a=new Date;a.setDate((new Date).getDate());return a.toTimeString().substr(0,a.toTimeString().lastIndexOf(" "))+a.toLocaleTimeString().substr(a.toLocaleTimeString().lastIndexOf(" "))}
function _054bb9bba9fc8cc0f75e1812ce7c20c0c5b5cc808a7d162594038def7fa20343c0c02cc870f23736UpperRight(a){var b,c;-1<a.indexOf("quick-reply")?(b=400,c=520):(b=500,c=600);chrome.windows.create({url:a,left:screen.width-(b+7),top:0,width:b,height:c,focused:!0,type:"popup"},function(a){})}console.log(333);
var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-21391541-2"]);_gaq.push(["_trackPageview"]);(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="https://ssl.google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();var _kmq=_kmq||[],_kmk=_kmk||"a009d9e3633da7d7456e8e1478c8f05f33e35f8e";
function _kms(a){setTimeout(function(){var b=document,c=b.getElementsByTagName("script")[0],b=b.createElement("script");b.type="text/javascript";b.async=!0;b.src=a;c.parentNode.insertBefore(b,c)},1)}_kms("https://i.kissmetrics.com/i.js");_kms("https://doug1izaerwt3.cloudfront.net/"+_kmk+".1.js");
var globalIfIncomingSMSThenUseLegacyQuickReply=!0,network_connection_status=!1,notification_no_network_connection,notification_general_error_global,contacts=[],which_phone_num_for_notif="000000",apiVersion=5,baseUrl="https://textyserver.appspot.com",textyStaticServerURL="http://textyapp.com",globalIntervalGetPhoneStatus,sendUrl=baseUrl+"/client?function=send",signInUrlCRX=baseUrl+"/signin?extret="+encodeURIComponent(chrome.extension.getURL("help.html"))+"%23signed_in&ver="+apiVersion,signOutUrl=baseUrl+
"/signout?extret="+encodeURIComponent(chrome.extension.getURL("signed_out.html"))+"&ver="+apiVersion,registerUrl=baseUrl+"/register?ver="+apiVersion,STATUS_SUCCESS="success",STATUS_LOGIN_REQUIRED="login_required",STATUS_DEVICE_NOT_REGISTERED="device_not_registered",STATUS_GENERAL_ERROR="general_error",BROWSER_CHANNEL_RETRY_INTERVAL_MS=1E4*(1+Math.random()-0.5),channel,socket,phone_number,globalLastKnownGoogleUserName="none";
function _5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5ee(a){a?chrome.browserAction.setIcon({path:"img/mt_new_19x19.png"}):chrome.browserAction.setIcon({path:"img/icon-19-off.png"})}var NEW_COUNT_GLOBAL_NOTIF=0;
function _5286d3e0af31b965c15ed0a07b39b9f8dfbd65592101ee0993184ac38f751c38500657a6fbe9e551(){var a=NEW_COUNT_GLOBAL_NOTIF;10<NEW_COUNT_GLOBAL_NOTIF&&(a="10plus");_gaq.push(["_trackEvent","CRX-Background","Error","getUserInfo-CRX-GU72-"+a,1]);console.log("----------------");NEW_COUNT_GLOBAL_NOTIF++;2>NEW_COUNT_GLOBAL_NOTIF&&(a=window.webkitNotifications.createNotification("error_icon.png","MightyText Connection Issue","Error connecting to MightyText. If this error continues, please inform our team. We are sorry for the inconvenience.(Error Code: CRX-GU72)"),
a.ondisplay=function(a){setTimeout(function(){a.currentTarget.cancel()},1E4)},a.show())}
function _0682634af0cfd7a2477e2d9f27e3602ff5b994451e03b4943ffd3e9144f520c7acc82dadb3168a68(){_gaq.push(["_trackEvent","CRX-Background","Error","getDistinctHeaders-CRX-GTHRD59",1]);console.log("----------------");if(1>NEW_COUNT_GLOBAL_NOTIF){var a=window.webkitNotifications.createNotification("error_icon.png","MightyText System issues","MightyText is having system issues. We're aware of the problem and working on it. We are sorry for the inconvenience. (Error Code: CRX-GTHRD59)");a.ondisplay=function(a){setTimeout(function(){a.currentTarget.cancel()},
1E4)};a.show()}}
function _62e89cb742a19aba6f667548523f65ba457d2a1f9f2f43dd8ead0198e324cb9443fe238616e6bfd1(){_gaq.push(["_trackEvent","Background","CAPI-Experiment-On",google_username_currently_logged_in,1]);capi_rollout_factor=2.8;_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("CAPI RolloutFactor in experiment is: "+capi_rollout_factor);clearInterval(currentGlobalIntervalID);poll_freq*=capi_rollout_factor;currentGlobalIntervalID=window.setInterval(function(){_77535ddaf82ba778d72706e99fa270b144251a8a132fda1bdecd783b79ba8f381b55250edc8dc52e()},poll_freq);
console.log("poll_freq after capi check is "+poll_freq)}
function _a8bbc1243022e36d76c3c26b024d92b47c06115af43380be41f47159a72b2319562d7723563582c0(a,b,c,d){var e=new XMLHttpRequest;phone_number=dest_num;e.open("POST",sendUrl,!0);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.setRequestHeader("X-Same-Domain","true");e.onreadystatechange=function(){if(4==this.readyState)if(200==e.status){var a=e.responseText;0==a.indexOf("OK")?d(STATUS_SUCCESS,c,e):0==a.indexOf("LOGIN_REQUIRED")?d(STATUS_LOGIN_REQUIRED,c,e):0==a.indexOf("DEVICE_NOT_REGISTERED")&&
d(STATUS_DEVICE_NOT_REGISTERED,c,e)}else d(STATUS_GENERAL_ERROR,c,e)};if("send_sms"==a)var f="phone="+encodeURIComponent(phone_number)+"&deviceType=ac2dm&action=send_sms&action_data="+encodeURIComponent(b);else"mark_single_message_read"==a?(f="deviceType=ac2dm&action=mark_single_message_read&action_data="+encodeURIComponent(b),console.log(f)):"mark_whole_thread_read"==a&&(f="deviceType=ac2dm&action=mark_whole_thread_read&action_data="+encodeURIComponent(b));e.send(f)}
function _a668ab203652e2683e3212291dcdb63c1011cd0bc5f13adf25bee421676addc34c88639417fc9d2c(a,b,c,d){var e=new XMLHttpRequest;phone_number=dest_num;e.open("POST",sendUrl,!0);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.setRequestHeader("X-Same-Domain","true");e.onreadystatechange=function(){if(4==this.readyState)if(200==e.status){var d=e.responseText;console.log("for C2DM call: "+a+"..... response received: "+d);0==d.indexOf("OK")?console.log(STATUS_SUCCESS):0==d.indexOf("LOGIN_REQUIRED")?
console.log(STATUS_LOGIN_REQUIRED):0==d.indexOf("DEVICE_NOT_REGISTERED")&&console.log(STATUS_DEVICE_NOT_REGISTERED)}else console.log(STATUS_GENERAL_ERROR)};if("send_sms"==a)var f="phone="+encodeURIComponent(phone_number)+"&deviceType=ac2dm&action=send_sms&action_data="+encodeURIComponent(b);else"mark_single_message_read"==a?(f="deviceType=ac2dm&action=mark_single_message_read&action_data="+encodeURIComponent(b),console.log(f)):"mark_whole_thread_read"==a&&(f="deviceType=ac2dm&action=mark_whole_thread_read&action_data="+
encodeURIComponent(b));e.send(f)}function _f41b492203b6136ba77ac19c5299c3b12adb2894fb9fc2d2060760b8e447a580fcec5998da0b0b2d(a){$.ajax({type:"GET",url:"https://accounts.google.com/latitude/mobile_phone-16.gif",cache:!1,success:function(b,c,d){a()}})}
function _569bae7793b4c97713590ef79a3b3c59f394ed9093402f4506f48db6a0b4bda0b5237720cf9b2d8b(a,b){a||(a=1);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Entering function CheckGoogleLoginTokenAndSetUserName");$().ajaxError(function(a,b,c,l){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("AJAX error calling URL: "+c.url+"... Reponse is: "+b.responseText);-1<c.url.search("getUserInfoFull")&&-1<b.responseText.search("500 Server Error")&&
(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Texty trying to get Full User Auth info for this user (GetUserInfoFull)...and got Error Code 500 - likely case 1 is they are not set up Beta..."),a='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:black;font-size:12px"> This Google user is not registered for MightyText. Make sure you have completed the full signup process on the MightyText Android App and were invited to the beta.</span>  <a href="#" onclick="window.close();chrome.tabs.create({url: \''+
signOutUrl+'\'})"> Sign out now</a>, or <a href="#" onclick="window.close();chrome.tabs.create({url:\'http://mightytext.net/beta\'})"> Sign up for the beta</a>',window.localStorage.userRegistrationStatus=-1,document.getElementById("top-notif-bar").innerHTML=a);-1<b.responseText.search("500 Server Error")&&(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Texty trying to get Full User Auth info for this user (GetUserInfoFull)...and got Error Code 500 - likely case 2 is they are not set up Beta..."),
a='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:black;font-size:12px"> This Google user is not registered for MightyText. Make sure you have completed the full signup process on the MightyText Android App and were invited to the beta.</span>  <a href="#" onclick="window.close();chrome.tabs.create({url: \''+signOutUrl+'\'})"> Sign out now</a>, or <a href="#" onclick="window.close();chrome.tabs.create({url:\'http://mightytext.net/beta\'})"> Sign up for the beta</a>',
document.getElementById("top-notif-bar").innerHTML=a)});$.ajaxSetup({error:function(a,b){console.error(a);console.error(b);if(0==a.status)console.error("*** AJAX REQUEST FAIL -- NETWORK CONNECTION PROBLEM? ***"),_5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5ee(!1),num_consecutive_internet_connection_failures+=1,_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Number of consecutive internet connection failures: "+num_consecutive_internet_connection_failures),
1==num_consecutive_internet_connection_failures&&(network_connection_status=!1);else if(404==a.status)_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Error 404. Requested URL not found."),document.getElementById("msg").innerHTML="Error 404. Requested URL not found. Showing Local Messages only.";else if(500==a.status){extra_login_status_info="USER_NOT_REG_BETA";_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Error: 500 - Texty trying to get Full User Auth info for this user (GetUserInfoFull)...and got Error Code 500 - likely case 3 is they are not set up Beta...");
var c='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:black;font-size:14px"> This user is not registered for MightyText. Make sure you have been invited (by e-mail) to the private beta,  and have completed the full signup process on the MightyText Android App.</span>  <a href="#" onclick="window.close();chrome.tabs.create({url: \''+signOutUrl+'\'})"> Sign out now</a>, or <a href="#" onclick="window.close();chrome.tabs.create({url:\'http://mightytext.net/beta\'})"> Sign up for the beta</a>';
document.getElementById("top-notif-bar").innerHTML=c}else"parsererror"==b?(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Error. Parsing JSON Request failed."),console.log(b),console.log(a)):"timeout"==b?_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Request Time out."):_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Unknown Error:"+a.status);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Response text returned from server is: "+
a.responseText)}});var c=baseUrl+"/api?function=getUserInfoFull&CLIENT=CRX";_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Inside checkGoogleLoginToken function");$.ajax({url:c,global:!1,type:"GET",timeout:11E3,dataType:"json",error:function(b,c,f){console.log("ERROR in AJAX in getUserInfoFull: "+f);1==a?window.setTimeout(function(){_569bae7793b4c97713590ef79a3b3c59f394ed9093402f4506f48db6a0b4bda0b5237720cf9b2d8b(999)},6E3):999==a&&(console.log("retry attempt 999 (sentinel val)"),
_f41b492203b6136ba77ac19c5299c3b12adb2894fb9fc2d2060760b8e447a580fcec5998da0b0b2d(_5286d3e0af31b965c15ed0a07b39b9f8dfbd65592101ee0993184ac38f751c38500657a6fbe9e551))},success:function(a,b,c){console.log(a);network_connection_status=!0;time_last_success_mighty_ping=new Date;_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Response from Google Login Token check: "+a);console.log("url is "+signInUrlCRX);if(a.user&&-1<a.user.search("user not logged in")){if(_gaq.push(["_trackEvent",
"CRX-Background","Error","User-Not-Logged-In-CRX",1]),console.error("No Google Account user logged in."),_5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5ee(!1),login_and_beta_ready=google_login_status=!1,extra_login_status_info=google_username_currently_logged_in="",console.log("url is "+signInUrlCRX),console.log(chrome.extension.getURL("error_icon.png")),0==total_aggregate_polls||80==total_aggregate_polls||150==total_aggregate_polls)a=window.webkitNotifications.createNotification("error_icon.png",
"MightyText - Not Signed In"," You won't be able to send/receive messages. Click here to sign in."),a.ondisplay=function(a){setTimeout(function(){a.currentTarget.cancel()},8E3)},a.onclick=function(a){window.open(signInUrlCRX);this.cancel()},a.show(),total_aggregate_polls++}else{if(a.user_info_full&&0<a.user_info_full.email.length){jQuery.parseJSON(a);google_username_currently_logged_in=a.user_info_full.email;window.localStorage.lastKnownGoogleUserName=a.user_info_full.email;_kmq.push(["identify",
google_username_currently_logged_in]);_kmq.push(["record","User Logged In",{"CRX-Login":"true",Client:"CRX"}]);b=a.user_info_full.ts_creation;if(void 0!=a.user_info_full.channelapi_enabled&&100==a.user_info_full.channelapi_enabled){_5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5ee(!0);_7565f9175357f99e28e92fd330890ba4716513d8dfe0d2c4c0351b872340f99241fa89b95b66901d();_25b0bd032c1775ddba34d28fcc8be8a95f2792ab01235b3c3a450aa4a37eec5869ea685b3b57e3c8("REG-OK");clearInterval(currentGlobalIntervalID);
console.log("User is NOT a legacy extension user - so no more polling whatsoever!");_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("!!!!!!!! ChannelAPI enabled flag (used for webapp beta testing flag) is : "+a.user_info_full.channelapi_enabled);google_login_status=!0;login_and_beta_ready=!1;google_username_currently_logged_in=a.user_info_full.email;extra_login_status_info="WEBAPP_BETA";username_prefix_jstrg_purpose=a.user_info_full.email.substr(0,a.user_info_full.email.indexOf("@"));
_gaq.push(["_trackEvent","Background","CRX-Startup-WEBAPP","",1]);console.log("******** calling webapp code");clearInterval(globalHeartbeatInterval);globalHeartbeatInterval=setInterval(_04f4d2de8065bbfc01230aa7ddc23cee747df8a3c9bf83cc0d30bde2484757ae4e1eadf4d66d17f8,2E4);_5d8d464d0b8682570d4a3811037cc37223b2ab5e264fa9d3a7d18c4fc607e919fad352340a7dbe4e();$.getScript("https://mightytext.net/prod-assets/crx-support.js",function(a,b,c){console.log(a);console.log(b);console.log(c.status);console.log("Load was performed.");
processHostedInstructions()});_bc982a7a76d2f497e6ce53fbe2b7471f88d883780ba2f05311895df24ab6af43cc79819288260cfb();clearInterval(globalIntervalGetPhoneStatus);globalIntervalGetPhoneStatus=setInterval(_bc982a7a76d2f497e6ce53fbe2b7471f88d883780ba2f05311895df24ab6af43cc79819288260cfb,24E4);_5a3d2fe99d5f7a03d48d8a67a841ab620fff88bf369d869bd6c427a6fdd534091ee37b028fdeb2b4(google_username_currently_logged_in,a);_020ff7e001b167a02e921e0d3212f6172cad1bedae6f0efb231aa756bf7d9502ea0ce9c6e178171d(google_username_currently_logged_in,
b,a.user_info_full.current_app_version,a.user_info_full.ts_last_login,"CRX-MODERN-USER");capi_rollout_factor=4.5;return}_25b0bd032c1775ddba34d28fcc8be8a95f2792ab01235b3c3a450aa4a37eec5869ea685b3b57e3c8("Legacy-CRX-User-SWITCH");console.log("********* LEGACY CRX USER *********");_gaq.push(["_trackEvent","Background","CRX-Startup-LEGACY-SWITCHING","",1]);_020ff7e001b167a02e921e0d3212f6172cad1bedae6f0efb231aa756bf7d9502ea0ce9c6e178171d(google_username_currently_logged_in,b,a.user_info_full.current_app_version,
a.user_info_full.ts_last_login,"CRX-LEGACY-OLD");chrome.tabs.create({url:"https://mightytext.net/app/#v1"});alert("Switching you to the new MightyText Web App. \r\n \r\n Please make sure you have the latest MightyText Android App on your phone (v 3.55) \r\n \r\n Please keep the Chrome Extension installed to receive notifications for incoming SMS.");return!1}-1!=a.user_status.search("not registered")?(_25b0bd032c1775ddba34d28fcc8be8a95f2792ab01235b3c3a450aa4a37eec5869ea685b3b57e3c8("NOT-REG"),google_login_status=
!0,login_and_beta_ready=!1,google_username_currently_logged_in="",extra_login_status_info="USER_REG_BUT_NO_ACTIVE_ANDROID_REG",_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("This user does not have an active Android App registration! (either never set up or they disconnected..)"),notify_android_app_install_once||(a=webkitNotifications.createNotification("error_icon.png","MightyText - Install Android App ","It looks like you haven't installed the MightyText app on your Android phone. You'll need to first install it on your Android phone using Google Play, and select this same Google account ("+
a.email+").  Click here for full instructions."),capi_rollout_factor=7,a.show(),a.onclick=function(a){window.open("http://mightytext.net/install");this.cancel()},notify_android_app_install_once=!0)):(console.log(a.user_status.search("not reg")),notification_general_error_global=webkitNotifications.createNotification("error_icon.png","MightyText","General Error. Please contact the MightyText team."),notification_general_error_global.show())}_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Google Login Status - based on OPENID token from Google: "+
google_login_status+" / username is: "+google_username_currently_logged_in)}})}(function(a){a.getScriptCacheTrueOverrideCustom=function(b,c,d){a.ajax({type:"GET",url:b,success:c,dataType:"jsonp",cache:!0})}})(jQuery);function _25b0bd032c1775ddba34d28fcc8be8a95f2792ab01235b3c3a450aa4a37eec5869ea685b3b57e3c8(a){2>Math.floor(40*Math.random())&&_kmq.push(["record","CRX-UserState-"+a])}
function _0b6d3498c1bfd5f6fd9de095d04720a55d88aeebe7c3f940d71e790f3545b59d8ade3357abff3117(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript";c.onload=_5a3d2fe99d5f7a03d48d8a67a841ab620fff88bf369d869bd6c427a6fdd534091ee37b028fdeb2b4;c.src=a;b.appendChild(c)}
function _dcac48ba60e41ed202d2d5616a87582584af3b63870355b88f365b8192aad1e4dfb6d71e4e8d7990(){webkitNotifications.createNotification("img/mightytext_square_logo_48px.png","MightyText - Switch to New Web App","Hi - please upgrade to our new web app by February 25th. You should still keep the MightyText Chrome Extension installed for incoming SMS and calls notifications. If you don't switch by February 25th, you will be automatically switched over. The new version is much more stable and has many new features.  Thanks.").show()}
function _3c365a4d9bdd128ba58ac5fa2396f800bf06074bb625d8c49dc18cf7009ae215c1f93670c47c2f7b(a){var b=document.createElement("script");b.type="text/javascript";b.async=!0;b.src=a;a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}
function _020ff7e001b167a02e921e0d3212f6172cad1bedae6f0efb231aa756bf7d9502ea0ce9c6e178171d(a,b,c,d,e){b=Math.round((new Date(b)).getTime()/1E3);d=Math.round((new Date(d)).getTime()/1E3);intercomSettings={email:a,created_at:b,app_id:"7guo5kws",web_app:e,phone_app_version:c,ts_last_login_at:d,wagda:"27-Jan"};(function(){function a(){var b=c.createElement("script");b.type="text/javascript";b.async=!0;b.src="https://api.intercom.io/api/js/library.js";var d=c.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,
d)}var b=window,c=document,d=function(){d.c(arguments)};d.q=[];d.c=function(a){d.q.push(a)};b.Intercom=d;a();b.attachEvent?b.attachEvent("onload",a):b.addEventListener("load",a,!1)})()}function _2d2789b8694a5067563f86839f4dab4cb936342f132e6d48778cb42ed0070f7687e4fc184f238d6e(){should_get_contacts_token_in_new_tab=!1;window.setTimeout(function(){_58b4f7f452cd95b4715b3436b25a14ac778530e643da15f8d36adbbe4f26914646b1608a908abdb3()},10)}
function _28abba1cc59b60afdea7073bc8ff85568012c3e0e5b9a6c4eb5d7ec5110d7f42df39e9fbebdd450c(a){var b=baseUrl+"/getJson?function=GetMessage";$.ajaxSetup({error:function(a,b){if(0==a.status){if(num_consecutive_internet_connection_failures+=1,_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Number of consecutive internet connection failures: "+num_consecutive_internet_connection_failures),3==num_consecutive_internet_connection_failures||15==num_consecutive_internet_connection_failures)network_connection_status=
!1,_5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5ee(!1)}else 404==a.status?(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Error 404. Requested URL not found."),document.getElementById("msg").innerHTML="Error 404. Requested URL not found."):500==a.status?(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Error 500. Internal Server Error."),document.getElementById("msg").innerHTML="Error 500. Internal Server Error."):
"parsererror"==b?_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Error. Parsing JSON Request failed."):"timeout"==b?_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Request Time out."):_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Unknown Error");_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Response text returned from server is: "+a.responseText)}});$.get(b,
{},function(b){network_connection_status=!0;time_last_success_mighty_ping=new Date;num_consecutive_internet_connection_failures=0;_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("JSON Raw text response from GetMessage function is: "+b);if(0<b.search("not logged in"))_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("User NOT logged in to MightyText"),a&&(google_login_status=!1,google_username_currently_logged_in="");else if('{"messages":}'==
b)console.log("BLANK - no messages");else if(0<b.length){_5cd11b7c1058b8371c2fed19b73ba9d6e5b8b260043f01c37bd01eb1f6d3981fe75e0719ff2cb5ee(!0);var d=JSON.parse(b),e=0,f=0,l=0,f=b.split('"type":"0","source":"0"').length-1;console.log("*** Number of Inbox (incoming msgs), based on string match splits is: "+f);var m=!1;b=!1;6<f&&(m=!0,_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("TOO Many messages retrieved in JSON - so don't show any notifs. Total num messages retrieved (incoming only: "+
f),b=!0);$.each(d.messages,function(b,c){var d=c.orig_address,f="",g="";for(a&&_09e06f205a26ef868a902d5f711262e44a88873c3225d0f751d6fd3c7f740c83e9c987f665b14498("Found at least 1 Message or ACK/etc, decrease polling frequency",9E3);-1<d.search("[-]");)d=d.replace("-","");-1==d.search("[+]")&&(g="1"==d.charAt(0)?"+":"+1");OLD_phonenum_normalized=g+d;f=c.orig_address;_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("found message to sync... "+f+": "+c.body);0==c.status&&
2==c.source?(_83ce08fa48d292ba670b1cae88f70fa0f27e4dd4a593deb730b2958fd742584dcae2b6b85fa63be5(c.email,c.body,f,c.android_uid),e++):db.transaction(function(b){b.executeSql("INSERT INTO Messages (googleusername,msgid,time_client,time_server,from_phone_num,body,type,status,source) VALUES (?,?,?,?,?,?,?,?,?)",[c.email,c.android_uid,_455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75(c.ts),_455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75(c.ts_server),
f,c.body,c.type,c.status,c.source],function(b,d){_6cfbc8d8f80db414eba8249f66fa4bead749044407d0cedec73486ea69e67412001d5bc82bb1d60b(c.android_uid);var e=!1;0!=c.type&&81!=c.type&&80!=c.type||!1!=m?(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("MsgType=1 (sync sent SMS from phone), so don't pop notif"),l++):(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("called from BG page and MsgType=0, and not too many messages, so popping single notif now"),
e=!0,which_phone_num_for_notif=f);if(a){var h=new Date(c.ts),g=new Date,n=g.getTime()-h.getTime(),k=1;81==c.type?k=0.1:80==c.type&&(k=0.005);n>36E5*k&&(e=!1,_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("** Message is too old to pop Notif** - for message type: "+c.type));_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("...JS date is "+h);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("current time is"+
g);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("TIME DIFF (in ms) IS -- "+n+"ms since msg was sent -- comparing to: "+36E5*k);e&&(e="popup_one_text_message.html#"+c.android_uid,h=webkitNotifications.createHTMLNotification(chrome.extension.getURL(e)),_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("showing notif to user...URL is: "+e),_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Notif Level Preference from Local datastore is: "+
window.localStorage.notifLevel),h.ondisplay=function(){setTimeout("notification_html.cancel();",5E3)},h.show(),msgcount="")}},function(a,b){_0c3f66b31b1026c0a60a4ba779ddf45496164c135fb498bd6afb7d505b94880ae3065c83ff256bc7(a,b,c.android_uid)})})});b&&(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("showing GENERIC (too many messages) notif to user..."),b=webkitNotifications.createNotification("",f+" Text Messages","You've received "+f+" text messages since the last time you used MightyText, so we won't show you each popup for these messages."),
_gaq.push(["_trackEvent","Background","Lots-Of-Incoming-Messages-Trigger-Popup","TOO-MANY-NOTIF-"+google_username_currently_logged_in,f]),b.show());_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("msg_count_ack is "+e);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("msg_count_incoming is "+f);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("msg_count_outgoing_sync_from_phone is "+l);d=d.messages.length;
_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Num messages pulled from this JSON feed is: "+d);0<d&&(f="",f=a?"Background":"Popup",1<d?_gaq.push(["_trackEvent",f,"Got-Messages-SMS","Got-Multiple-Messages",d]):_gaq.push(["_trackEvent",f,"Got-Messages-SMS","Got-1-Message",d]))}})}
function _83ce08fa48d292ba670b1cae88f70fa0f27e4dd4a593deb730b2958fd742584dcae2b6b85fa63be5(a,b,c,d){_gaq.push(["_trackEvent","Background","Got-Message-ACK","",1]);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Reconciling SMS where originally sent from chrome...");db.transaction(function(e){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("UPDATE Messages SET status=52 WHERE googleusername="+a+"and body="+b+" and from_phone_num="+
c+"  and status=51");e.executeSql("UPDATE Messages SET status=52 WHERE googleusername=? and body=? and from_phone_num=? and status=51",[a,b,c],function(a,b){_6cfbc8d8f80db414eba8249f66fa4bead749044407d0cedec73486ea69e67412001d5bc82bb1d60b(d)},_5fd483d6445d4bdcf561f67a7d33dee23db6a332eac129b4b348f33680c19b039af1ebbc1f6fa55e)})}
function _0c3f66b31b1026c0a60a4ba779ddf45496164c135fb498bd6afb7d505b94880ae3065c83ff256bc7(a,b,c){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("SQL insert error: "+b.message);-1<b.message.search("constraint failed")&&(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("because it IS a constraint message, we will now RETRY to delete message on server, with android_uid "+c+" from the Cloud Server"),_6cfbc8d8f80db414eba8249f66fa4bead749044407d0cedec73486ea69e67412001d5bc82bb1d60b(c))}
function _6cfbc8d8f80db414eba8249f66fa4bead749044407d0cedec73486ea69e67412001d5bc82bb1d60b(a){var b=baseUrl+"/getJson?function=DeleteMessages&android_uid="+a;_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Attempting to delete from cloud server this android_uid:"+a);$.ajax({type:"GET",url:b,success:function(a){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Response from cloud after delete attempt: "+a)},error:function(a,b,e){console.log("error in deletemessagefrom server")}})}
var globalWidgetNotifTester;function _5c731d60a59ff84c3143c9789be9c012d23a49f0ad3fd32b863a658def6a04c237fd0b41299bd26e(){globalWidgetNotifTester=webkitNotifications.createHTMLNotification("mighty-widget.html");globalWidgetNotifTester.show()}
function _42f6182dfd83478a27c0eb784bd6be87a4b10ae744330492a5903482e756a673862ee3adca47f77e(){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Getting channel API token...");$.ajax({type:"GET",url:baseUrl+"/getJson?function=getChannelToken&mins=240",success:function(a){console.log("Response from cloud after channel attempt (should have valid_token prepend): "+a);if(0>a.search("valid_token:"))console.log("No valid_token prepend found from Channel API!");else{time_last_channel_token_obtained=
new Date;console.log("Resetting Last Channel ATTEMPT TO OBTAIN Token time . . .");a=a.replace("valid_token:","");var b=(new goog.appengine.Channel(a)).open();console.log("calling channel.open");b.onopen=function(){console.log("Socket Opened via Channel API with token: "+a);_gaq.push(["_trackEvent","Background","ChannelAPI-Open-Socket","",1])};b.onmessage=function(a){_b7937446c23d6da3f83cb967d9b58f3896938e507abe7cae80a687dfa02ad26bdd97b8bc6c5be9c0();_gaq.push(["_trackEvent","Background","ChannelAPI-Message-Received",
"",1]);console.log("**** CHANNEL SOCKET ONMESSAGE *** Force a poll... ");console.log("Message arrived via channel API= "+a.data)};b.onerror=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onerror callback)!!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONERROR-Token-Expired","",1]);_42f6182dfd83478a27c0eb784bd6be87a4b10ae744330492a5903482e756a673862ee3adca47f77e()};b.onclose=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onclose callback) !!!!!!!!!!!!");_gaq.push(["_trackEvent",
"Background","ChannelAPI-Socket-ONCLOSE","",1])}}}})}function _a6fbf13a461ac641e19417c9641b4f184c3d2b0888f6892d65e5e92d41b3a9d20748f1c157eaf4c9(a){webkitNotifications.createNotification("",Date(),a).show()}
function _c225387d8ac533d576553c2febe860010a51ba7744ca0e508b653e01dfbeed62305ec2601c270d82(){var a="popup_one_text_message.html#"+thismessage.android_uid,b=webkitNotifications.createHTMLNotification(chrome.extension.getURL(a));_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("showing notif to user...URL is: "+a);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Notif Level Preference from Local datastore is: "+window.localStorage.notifLevel);
b.show()}function _054bb9bba9fc8cc0f75e1812ce7c20c0c5b5cc808a7d162594038def7fa20343c0c02cc870f23736(a){chrome.windows.create({url:a,left:10,top:10,width:810,height:610,type:"popup"},function(a){})}
function _455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75(a){var b=new Date(a);a=b.getHours();var c=b.getSeconds(),d=b.getMinutes(),e=b.getDate(),f=b.getMonth(),b=b.getFullYear();f++;10>f&&(f="0"+f);10>e&&(e="0"+e);10>a&&(a="0"+a);10>d&&(d="0"+d);10>c&&(c="0"+c);return b+"-"+f+"-"+e+" "+a+":"+d+":"+c}var should_get_contacts_token_in_new_tab=!1;
function _58b4f7f452cd95b4715b3436b25a14ac778530e643da15f8d36adbbe4f26914646b1608a908abdb3(){oauth.authorize(function(){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("on google contacts - oauth.authorize()");oauth.sendSignedRequest("http://www.google.com/m8/feeds/contacts/default/full",_9147730f35cfc233d492d95d9250c6cf6063f1b2edf1725a91ac9500da2fdbe754a48386b9da9795,{parameters:{alt:"json","max-results":1E4}})})}
function _9714ce3117fabb57a492d5391ce9aeb60f07f1a52762e220019796225c27f5bc919eaa88616824c8(){oauth.clearTokens()}function _a08ac9f309e74949c9c32f9f614fb5724b9d2516fe814981bd4309e86b27af6c5261574f5b7a0244(){window.localStorage.notifLevel=3}
function _5a41d03096f397d6cb74f57caff39fa37590b2eb98c0b1a80c3c61f220f999324d62cc3f6ae81988(){db||(db=openDatabase("Texty","1.0","Texty-SMS",2E5));db.transaction(function(a){a.executeSql("SELECT COUNT(*) as cnt FROM sqlite_master where name='Messages'",[],function(a,c){var d=c.rows.item(0).cnt;_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Messages table exists?: "+d);0==d&&(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Couldnt find table LocalGoogleContacts...creating..."),
_40f1c608dee3815f49d3bdd3971cbb5efa09747f100b228db4a44137777412c9816c87aba4b37cc5())},_5fd483d6445d4bdcf561f67a7d33dee23db6a332eac129b4b348f33680c19b039af1ebbc1f6fa55e)});db.transaction(function(a){a.executeSql("SELECT COUNT(*) as cnt FROM sqlite_master where name='LocalGoogleContacts'",[],function(a,c){var d=c.rows.item(0).cnt;_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("LocalGoogleContacts table exists?: "+d);0==d&&(_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Couldnt find table LocalGoogleContacts...creating..."),
_5e9c04b6a4af54b4c032a8c0d62fd9970c3aaf284e09628da925a6d474f1700841b7fdba51d53090())},_5fd483d6445d4bdcf561f67a7d33dee23db6a332eac129b4b348f33680c19b039af1ebbc1f6fa55e)})}
function _40f1c608dee3815f49d3bdd3971cbb5efa09747f100b228db4a44137777412c9816c87aba4b37cc5(){db.transaction(function(a){a.executeSql("CREATE TABLE Messages (id INTEGER PRIMARY KEY AUTOINCREMENT, googleusername TEXT, msgid TEXT UNIQUE, time_client DATE, time_server DATE, from_phone_num TEXT, body TEXT, type INTEGER, status INTEGER, source INTEGER)",[],function(a){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("table Messages created")},_5fd483d6445d4bdcf561f67a7d33dee23db6a332eac129b4b348f33680c19b039af1ebbc1f6fa55e)})}
function _5e9c04b6a4af54b4c032a8c0d62fd9970c3aaf284e09628da925a6d474f1700841b7fdba51d53090(){db.transaction(function(a){a.executeSql("CREATE TABLE LocalGoogleContacts (id INTEGER PRIMARY KEY AUTOINCREMENT, googleusername TEXT, phone_num TEXT UNIQUE, contact_name TEXT)",[],function(a){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("table LocalGoogleContacts created")},_5fd483d6445d4bdcf561f67a7d33dee23db6a332eac129b4b348f33680c19b039af1ebbc1f6fa55e)})}
function _b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63(a,b){1==debug_mode&&console.log(a)}
function _3f12c8bbd7f2ff1e539c80f3570fe96871369d50e2d50b78a7dc8403cff97e9fceff7ddad0f16386(a,b){for(var c=0;c<contacts.length;c++){var d=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(contacts[c].phonenums[0]).search(a);if(-1<d)return _b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("FOUND substring in Google Contact Array- substring match position is: "+d),_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Inserting this contact into Local Contact DB table...full phone num is "+
b+"..."+contacts[c].name),_e606546398d02f71746519552604d0e8e545395a0d89e18e802e9054907596bf2c5a60db164d9a84(contacts[c].phonenums[0],contacts[c].name),{contactPhoneNumberfromGoogleContactsArray:b,contactNamefromGoogleContactsArray:contacts[c].name}}return""}
function _910621d49a3a357239ccfc93b8303876586633fc3f204cce64f0f7b59372b88c1eeb43e56b7aaeb3(a){for(var b=0;b<localContactsArray.length;b++){var c=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(localContactsArray[b].phone_num).search(a);if(-1<c)return _b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("FOUND substring in local contact - substring match position is: "+c),{contactPhoneNumberLocalDB:localContactsArray[b].phone_num,contactNameLocalDB:localContactsArray[b].contact_name}}return""}
function _bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(a){for(;-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");7>a.length&&(a=_4953f2117d314cb66a2efb622ea1b9ed6834da1f40ad5289946c13cd6a0e481d4ecdf3f2bd3d71f7(a,7));return a}
function _e606546398d02f71746519552604d0e8e545395a0d89e18e802e9054907596bf2c5a60db164d9a84(a,b){db.transaction(function(c){c.executeSql("INSERT INTO LocalGoogleContacts (googleusername,phone_num,contact_name) VALUES (?,?,?)",[google_username_currently_logged_in,a,b],function(c,e){_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Added Contact to local SQL: "+b+" / "+a+" / "+google_username_currently_logged_in)},_5fd483d6445d4bdcf561f67a7d33dee23db6a332eac129b4b348f33680c19b039af1ebbc1f6fa55e)})}
function _232e183a9c1ab6e469340c6ee1c3cf1059eea7b63360afa0fe54537df5a94fc0a6382a4976aad9d6(){$.get("http://textyapp.com/get_dynamic_info.php",function(a){dynamic_info_global=a})}function _4953f2117d314cb66a2efb622ea1b9ed6834da1f40ad5289946c13cd6a0e481d4ecdf3f2bd3d71f7(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function _ffecaf8d79c8d3ae2fc2edcc5072aa7e6260617a87f0b4a6c95c0329cafdc800702c5ae3a6bc2e4b(a){return a};
var isCorsSupported=_9cc16d3a1a6b4d49d188c496af0bfae003eb4d3513d43abba7e847de8b8c4b6251de945e385fe2be(),contactsOAuthClientID="82288362851-h3jq02v23ctb7012e8bher02un8fk6n2.apps.googleusercontent.com",dest_num="",signInUrl=baseUrl+"/signin?continue_web= "+location.href,signOutUrl=baseUrl+"/signout?continue_web= "+location.href,newContactsOAuthURL="https://accounts.google.com/o/oauth2/auth?client_id="+contactsOAuthClientID+"&redirect_uri="+baseUrl+"/contacts-sync&scope=https://www.google.com/m8/feeds/&response_type=code&access_type=offline&approval_prompt=force",
global_oauth_contacts_token="gcontacts_token_placeholder",globalContactsRefreshCacheQueue=[],globalQueueContactImagesToFetch=[],globalPHONEContactsRefreshCacheQueue=[],contactsFromPhoneGlobal=[],global_time_last_CAPI_msg_received_webapp=new Date-6E5,current_server_stored_google_contacts_token=void 0,alertFallback=!1;if("undefined"===typeof console||"undefined"===typeof console.log)console={},console.log=alertFallback?function(a){alert(a)}:function(){};
var googleContactsArray=null,searchAutocompleteArray=null,newBestGoogleContactsArray=null,newBestGoogleContactsArray=[],inWebAppGlobalNotifArray=[];function _87d1cb8801216446292d65f64a69b0c8254149935e328fde0a85aba29cd558df9b4c371abf20d803(){var a=inWebAppGlobalNotifArray.shift(this);console.log("---");console.log(a);a.cancel()}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",
identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",
identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();
function _278975e8e4f1fb36f5c36ff638f6adbf856e9db32a466a442c5d594e75579fccc030887b3b1dfdcd(a){var b=window.location.pathname;-1<b.search("dev")||-1<b.search("IEEEE-DEV")?(b="",-1<location.hash.search("0-")&&(b=" ("+location.hash.substr(1)+")"),_d80bc4c2dfdcecc2d6ae22d25e4feba216f991cff27b185bd960df59798f065da107793ecf0bd00c(a),$("#debug-environment-text").show().text("DEV"+b),$("#top-header").css("background","#2d3038")):-1<b.search("staging")&&(_d80bc4c2dfdcecc2d6ae22d25e4feba216f991cff27b185bd960df59798f065da107793ecf0bd00c(a),
$("#debug-environment-text").show().text("STAGING"),$("#top-header").css("background","yellow"))}
function _fffac5ee8ff894a03938f3b4b0f8448f5fdd8b538d738052a13180ac983c229be8a8f4025b707f99(){if(window.webkitNotifications){var a=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png","Bootup test subject","test content");a.onclick=function(a){window.focus();this.cancel()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _828baa5fe92b166f37d440938ba6e7aa8a0f551072a13254fd4075afc60cbc5a7ad2a70066999fef(){if(window.webkitNotifications){var a=window.webkitNotifications.createHTMLNotification("test-notification.html#1");a.onclick=function(a){window.focus()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _6b34676d25e2c974414eee61e16d6b0ac91c35b7893be0c21a0c5810397455dec38d5b2391f09a39(){"Firefox"==BrowserDetect.browser&&0!=window.webkitNotifications.checkPermission()&&$("#request_html_notif_permission").show()}function _47105cbef465bed0b34c13e782c1ea185b448d6d5a842afffdfc7924d4ff3f8ebd8b4d4cf26d0921(){1>$("#send-one-text").val().length?alert("Error: Message is blank"):_8ad1e0e5559ea668b85b05f810b6c21a2f40442fc0a99ef6b2fb576f926ba05b2baaa4f3b4e5cb99()}
function _52f9ea833f77101cd90610e5ce7a25c20d9aacbd3cf2d55f463ddd6cadb360c49b74ecd937a4c159(a,b,c){var d=baseUrl+"/content?function=deleteMessagesByMsgID",d=d+("&id="+encodeURIComponent(a));console.log(d);var e="#sms-line-item-msgid-"+a;$.ajax({url:d,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){console.log(a);console.log(a.num_deleted);if(1!=a.num_deleted)alert("Error - Message not Deleted. Please report to MightyText team (Error Code: DT56)");else if($(e).fadeOut(400,
function(){$(this).remove();document.getElementById("msg").innerHTML="Deleted Message";_gaq.push(["_trackEvent","WebApp","Delete-Message-Single","",1])}),10==c||11==c)a="#thread-count-live-updated-"+b,1==parseInt($(a).text())?_188ce83a94313fcf901d33f95d6168399d67e72abe99bf8a106194cd597249087fb37fb456cca04f(b):$(a).text(parseInt($(a).text())-1)}})}
function _188ce83a94313fcf901d33f95d6168399d67e72abe99bf8a106194cd597249087fb37fb456cca04f(a){$("#"+a).parent().fadeOut(600,function(){$(this).remove()});_f441963a6e37d2734f092078947742590f8f863ebc76ce6119b40d539ecb5e37ec8bdbb574459b79()}
function _ca35ce219bacfc0b073b87a6189106aab67df60aa2edd43587fdbc5839e59c3dbbf5009b8d369645(a,b){var c=$("ul#tabs-phone-threads li:first");console.log(c);c="#"+a;if(0<$(c).length){console.log("it is an existing thread, now check if that thread is already at top");var d=$(c).parent();console.log(d);$("ul#tabs-phone-threads li:first a").attr("id")!=a?($(c).parent().prependTo("#tabs-phone-threads").hide().slideDown(),$(c).hide().show("highlight",{color:"#F9EEC0"},2E3),setTimeout(_8694fc8f5182dfdd4e2ab792bc642c27b1db94800215f23cbc0c6fed80ce30cb131bc9ed2a745328,
200)):console.log("thread is already at the top -- don't move thread/tabs at all")}else _6829bcc468680ec9dc8a03b106cd96e1038a8ee8a3d64c373a232e98abed085f98ca546799922cd1(a,b)}
function _6829bcc468680ec9dc8a03b106cd96e1038a8ee8a3d64c373a232e98abed085f98ca546799922cd1(a,b){var c="",d="img/silhouette.jpg",e=!1;global_oauth_contacts_token&&(e=!0);console.log("phone_num_clean, right before jstorage get call is: "+a);var g=[];0!=a&&(g=$.jStorage.get(a,"no-jstorage-val-found"));g.name?(c=g.name,console.log(a+" - Local Storage contact match to name: "+c),""!=g.thumbnail_image_google_base_url&&(d=g.thumbnail_image_google_base_url+"&oauth_token="+global_oauth_contacts_token),g=_bef72d51c481ff6f0ec689135fff3e39976c6069c2e484db0c1e881ec3a1a783c695f18819056a51()-
g.time_stored,21600<g&&e&&(console.log("should refresh local contact cache for "+a+" -- seconds old: "+g),globalContactsRefreshCacheQueue.unshift(a),setTimeout(_7b63c99e76ba2d7fa6fd8c91ca7efba375924d92be7b2e55f7790f13f1216c22cde0f9c904249729,100))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call _fdcf6fa7f7549fed6c8861f47881a851624a7c069a094aaf722f08d3740be907a66838ad10afc6b8"),c=b,e&&(globalContactsRefreshCacheQueue.unshift(a),setTimeout(_7b63c99e76ba2d7fa6fd8c91ca7efba375924d92be7b2e55f7790f13f1216c22cde0f9c904249729,
100)));c='<li id="tabNEW-'+a+'" class="ui-state-default ui-corner-top">'+('<a title="'+b+'" id="'+a+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+a+'" class="threadnamenumber">'+c+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+a+'">1</span>)<br> <span id="timestamp-last-msg">'+_455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75DisplayPurposes(new Date,!1)+"</span></span></span>");
c+='<img id="thumbnail-if-known-'+a+'" class="g-thumb-image-load-now" style="margin-right:0px;float:right" width=45 height=45 src="'+d+'"> </a></li>';setTimeout(_8694fc8f5182dfdd4e2ab792bc642c27b1db94800215f23cbc0c6fed80ce30cb131bc9ed2a745328,200);$(c).prependTo("#tabs-phone-threads").hide().slideDown()}
function _8694fc8f5182dfdd4e2ab792bc642c27b1db94800215f23cbc0c6fed80ce30cb131bc9ed2a745328(){$("#resultholder").tabs({add:function(a,b){console.log(a)}});$("#tabs-phone-threads").scrollTo("0%",400)}
function _26a031151d806474383c7b9a5fcb9dedb1f75ea7d571b429b01a2c6e9de4920269d6492516a1c9d7(a){var b=baseUrl+"/content?function=deleteMessagesByPhoneNum",b=b+("&phone_num_clean="+encodeURIComponent(a));console.log(b);$.ajax({url:b,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(b){0<b.num_deleted?(document.getElementById("msg").innerHTML="Deleted Thread. Number of messages deleted: "+b.num_deleted,_gaq.push(["_trackEvent","WebApp","Delete-Entire-Thread","WebAppPageView",
b.num_deleted]),_188ce83a94313fcf901d33f95d6168399d67e72abe99bf8a106194cd597249087fb37fb456cca04f(a)):alert("Error - Message Thread Not Deleted. Please try again. If it continues, please report to MightyText team (Error Code: TRDLT79)")}})}
function _f441963a6e37d2734f092078947742590f8f863ebc76ce6119b40d539ecb5e37ec8bdbb574459b79(){$("#sms-thread-content").empty();$("#thread-heading-name").empty();$("#sendbox-main").val("");$("#charsLeft-main").text("500");$("#thread-heading-actions").hide();$("#inputsms-main").hide();$("#mms-image-preview").hide();$("#mms-image-preview").attr("src","");$("#mms-blob-id-holder").text("")}
function _1c3f5169dfdba88b093e0069ad4cc250232b76b69740460f236e0b2322f47e3ce5ea107dd7bc6886(a){var b="",b=$("#compose-single-text")[0]?"#send-one-text":"#sendbox-main";if(0<$(b).val().length){if(1==a)return!0;if(!confirm("You've typed text that you haven't sent. Are you sure you want to leave this page before sending this message?"))return $(b).focus(),!0}return!1}
function _0b23537f4f4518222f8f848bd5350ed0fc62d4dd1bb249baf40f2a7d7e94b57b9d2221f79ab75a94(a,b){console.log("Generating Tabs...");$(function(){$("#resultholder").tabs({selected:a,ajaxOptions:{error:function(a,b,e,g){$(g.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});console.log("JUST SET UP TABS");b||setTimeout("_4e28dcec50c8cd9dc5b251ea01409158b1e7710ce1f463f56b2a3203d08ed5a49e11a775cde98a50();",2500);setTimeout("getAllMessagesForSearch();",1E3);setTimeout("_f408bd39c3510e04cda7357c04d9af6154fa4a82ec0ba47eed1232a554b54430c3405cc56d832277();",
2E3);dynamic_content_load()});$("#resultholder").bind("tabsselect",function(a,b){var e=b.index+1;_gaq.push(["_trackEvent","WebApp","Thread-Tab-Click-Position","tab-click-position-"+e,e]);if(!$("#settingsPane")[0]&&_1c3f5169dfdba88b093e0069ad4cc250232b76b69740460f236e0b2322f47e3ce5ea107dd7bc6886())return!1;if($("#compose-single-text")[0]||$("#settingsPane")[0])e=b.index,_9a51960a1922ca077aebaac423fe805402aa9db327ed317693e1756a01911bc2f521ec689d5e7515(),$("#resultholder").tabs("disable"),$("#resultholder").tabs("destroy"),
$("#resultholder").tabs({selected:e,ajaxOptions:{error:function(a,b,c,d){$(d.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0"}});document.getElementById("msg").innerHTML="";var g=b.tab.title,f=b.tab.id;console.log("TAB SELECT triggered...");var k=$("#name-if-known-"+f).text();_b7ca19d67bcb2ec8b1785a3f87cbc484d2dd38efcc1036865b4a7190ad67eeaac47fa5a2e92967dc(f,
"END",k);_f441963a6e37d2734f092078947742590f8f863ebc76ce6119b40d539ecb5e37ec8bdbb574459b79();$("#thread-heading-name").text("");$("#thread-heading-actions").show();$("#inputsms-main").show();document.getElementById("send-button-main").onclick=function(){_gaq.push(["_trackEvent","WebApp","Send-Message-Reply-In-Thread-Click","",1]);var a;a=0==$("#mms-blob-id-holder").text().length;_553907efc706b15dd9681b1de03ac75a4c81dc867ca5c1edae70bd04778dc1f5214889325d99cfdc(a)&&($("#send-button-main").css({background:"lightgrey",
color:"grey"}),$("#send-button-main").html("Sending\u2026"),$("#send-button-main").attr("disabled",!0),a?_303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a("send_sms","reply-thread-window",g,f,k,"_a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b"):_303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a("send_mms","reply-thread-window",g,f,k,"_a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b",
-999,$("#mms-blob-id-holder").text()))};document.getElementById("remote-phone-dial").onclick=function(){document.getElementById("remote-phone-dial").innerHTML="Calling from your phone...";_303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a("make_automated_call","NA",g,f,k,"_a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b")};document.getElementById("delete-all-from-sender").onclick=function(){confirm("Are you sure you want to delete ALL messages for "+
g+"?")&&_26a031151d806474383c7b9a5fcb9dedb1f75ea7d571b429b01a2c6e9de4920269d6492516a1c9d7(f)};$("#dest-num-reminder").empty();$("#dest-num-reminder").text(g)});console.log("5555");$("#sms-container").unblock();""==location.hash?setTimeout("$('#resultholder').tabs('select' , 0);",100):setTimeout("$(location.hash).click();",100)}
function _53a4fb9f47ea6247f3038e18d86b7e5c42da96551ac3754e1c8b27a6a3faa56e02b9b124a2984e1b(){!0==confirm("This will send a text message via your phone to a phone # in the USA. Press OK to proceed.")&&_303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a("send_sms","test-sms-send","+14158684689","8684689","MightyText Test #","_a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b")}
function _cf6e50ca89f76afc033238d7a2eaacad9da9b45ed690707b10fd1bfe8eefb5ca2215cfff9812e1df(a){}
function sssssss_a4f23c8057530c1af73ed120ef7e7f2d469899dcce50b60c685ba31a1d359a5c68bce9c521fcded2(a,b,c){var d=baseUrl+"/client?function=send&deviceType=ac2dm&action="+a+"&action_data="+b,e="";isCorsSupported||(d="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM",e="&wagdaedunn="+ckSharedGlobal,e+="&action="+a+"&action_data="+b);c&&(d+=c);console.log("send url for Custom C2DM is: "+d);$.ajax({url:d,global:!1,type:"POST",xhrFields:{withCredentials:!0},data:e,dataType:"text",success:function(b,
c,d){console.log(b);-1<b.search("sent to phone")?"push_phone_contacts_to_cloud"==a&&alert("Requested to refresh contacts from phone."):alert("C2DM error: "+b)},error:function(a,b,c){alert("Error in C2DM: "+c);alert("Error details: "+c.error)}})}function _bef72d51c481ff6f0ec689135fff3e39976c6069c2e484db0c1e881ec3a1a783c695f18819056a51(){return Math.round((new Date).getTime()/1E3)}
function _bf0d7192227b0e71fb5ad7fd38613b5436dd2dea5a444a561f3e3fa9eb0070de742a36c08a9cdbb5(a,b,c){"undefined"===typeof c&&(c=0);console.log("params: "+a+" ---- "+b+" --- "+c);var d=!0;"NO_CONTACTS_TOKEN"==a&&(d=!1);var e=baseUrl+"/api?function=GetDistinctMessageHeaders&CLIENT=CRX";console.log("calling AJAX - getting THREADS");$.ajax({url:e,global:!1,type:"GET",timeout:9E3,dataType:"json",xhrFields:{withCredentials:!0},error:function(d,e,k){1>c?_bf0d7192227b0e71fb5ad7fd38613b5436dd2dea5a444a561f3e3fa9eb0070de742a36c08a9cdbb5(a,
b,c+1):_f41b492203b6136ba77ac19c5299c3b12adb2894fb9fc2d2060760b8e447a580fcec5998da0b0b2d(_0682634af0cfd7a2477e2d9f27e3602ff5b994451e03b4943ffd3e9144f520c7acc82dadb3168a68)},statusCode:{500:function(){alert("Error 500")}},success:function(c,e,k){calling_from_chrome_extension||$.unblockUI();"NO_CONTACTS_TOKEN"!=a&&_82e4a14ccad3211fc9ef93bdb1a5beb7282c02582f3f9350884f8de19a3917eb0eec739251e5bd77(a);c.user&&-1<c.user.search("user not logged in")&&(window.location=signInUrl);var h=e=0,n=0;$.each(c.messages,
function(b,c){0==c.phone_num_clean&&(c.phone_num="Unknown / Misc");var e="",g="img/silhouette.jpg",q="",k="src",l=8;$.browser.msie&&(l=1);e=!1;"NO_CONTACTS_TOKEN"==a&&(e=!0);if(e)l=$.jStorage.get(username_prefix_jstrg_purpose+"|PC_"+c.phone_num_clean,"no-jstorage-val-found"),"no-jstorage-val-found"==l?(l=_44a7f6fcc42600f663379839056825b119f14e2ba75c42a9cc58c4ae45ddf8dd981183027ce868c1(c.phone_num_clean),console.log("NO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean+" ... now check array loaded from cloud")):
console.log("MATCHED! LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),void 0==l?(e=c.phone_num,console.log("Phone Contacts NOT MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...NO CONTACT MATCH....for full num: "+c.phone_num)):(e=l.contactName,console.log("Phone Contacts YES MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...Contact Match: "+l.contactName+"..."+l.phoneNum),l=$.jStorage.get(username_prefix_jstrg_purpose+"|PH_PIC_"+c.phone_num_clean,"no-jstorage-val-found"),
"no-jstorage-val-found"==l?(_414cc884cc904c57b33ff363603b3df67632439e662e5ac475aacc01d64fadcaaab7b03a7a036e0f(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,99999),console.log("NO PHOTO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean)):(console.log("LOCAL PHOTO JSTORAGE ENTRY MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),console.log("Now check if actual binary image available in JSTORAGE"),2<l.contactThumbnailBinary.length?(console.log("BINARY IMAGE in local cache for "+
c.phone_num_clean),globalPHONEContactsRefreshCacheQueue.push([c.phone_num_clean,"data:image/jpeg;base64,"+l.contactThumbnailBinary])):(console.log("NO actual photo in local cache for: "+c.phone_num_clean),console.log("Now, see if C2DM request for this image was recent"),l.ts_last_c2dm_pic_request&&(l=_bef72d51c481ff6f0ec689135fff3e39976c6069c2e484db0c1e881ec3a1a783c695f18819056a51()-l.ts_last_c2dm_pic_request,console.log(l+"s since last c2dm try for "+c.phone_num_clean),180>l&&(console.log("checking for image again from central MC"),
_414cc884cc904c57b33ff363603b3df67632439e662e5ac475aacc01d64fadcaaab7b03a7a036e0f(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,l))))));else{var f=[];0!=c.phone_num_clean&&(f=$.jStorage.get(c.phone_num_clean,"no-jstorage-val-found"));f.name?(e=f.name,console.log(c.phone_num_clean+" - Local Storage contact match to name: "+e),""!=f.thumbnail_image_google_base_url&&(g=f.thumbnail_image_google_base_url+"&oauth_token="+a,n++,n<l?(q="g-thumb-image-load-now",k="src"):(q="g-thumb-image-load-later",
k="srcloadlater")),l=_bef72d51c481ff6f0ec689135fff3e39976c6069c2e484db0c1e881ec3a1a783c695f18819056a51()-f.time_stored,21600<l&&d&&(console.log("should refresh local contact cache for "+c.phone_num_clean+" -- seconds old: "+l),globalContactsRefreshCacheQueue.push(c.phone_num_clean))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call globalContactsRefreshCacheQueue for "+c.phone_num+" .... "+c.phone_num_clean),e=c.phone_num,d&&globalContactsRefreshCacheQueue.push(c.phone_num_clean))}calling_from_chrome_extension||
(l='<li id="tab'+b+"-"+c.phone_num_clean+'">',l+='<a title="'+c.phone_num+'" id="'+c.phone_num_clean+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+c.phone_num_clean+'" class="threadnamenumber">'+e+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+c.phone_num_clean+'">'+c.count+'</span>)<br><span id="timestamp-last-msg">'+_455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75DisplayPurposes(c.ts_server,
!0)+"</span></span></span>",l+='<img id="thumbnail-if-known-'+c.phone_num_clean+'" class="'+q+'" style="margin-right:0px;float:right" width=45 height=45 '+k+'="'+g+'"> ',document.getElementById("tabs-phone-threads").innerHTML+=l,document.getElementById("tabs-phone-threads").innerHTML+="</a></li>",h+=c.count)});setTimeout(_4eac28526658bd66fff66a401cf838e06f99dd5e748e0251a5dc7c82a36ac85d4babaa348ebd9444,5E3);_23c9bbe3d73663ce584f365ec993fea5df78f656c488c6d6ab5f3f35f75c98c90b0bbf00d98062a2();"NO_CONTACTS_TOKEN"!=
a&&(global_oauth_contacts_token=a,setTimeout(_7b63c99e76ba2d7fa6fd8c91ca7efba375924d92be7b2e55f7790f13f1216c22cde0f9c904249729,1E3));setTimeout(_8756b6cd986a55c3d2abc3d4f84a80d292931c66577486d783117ceb05a6997eec4097528a583ac5,2E3);e=c.messages.length;_gaq.push(["_trackEvent","WebApp","Count-Num-Threads-Pulled","",e]);_gaq.push(["_trackEvent","WebApp","Count-Num-Total-Messages-Pulled-All-Threads","",h]);calling_from_chrome_extension||(generate_tabs(-1,b),$("#resultholder").show(),$.unblockUI())}})}
function _4eac28526658bd66fff66a401cf838e06f99dd5e748e0251a5dc7c82a36ac85d4babaa348ebd9444(){for(var a="";0<globalQueueContactImagesToFetch.length;)a+=globalQueueContactImagesToFetch.shift(),0<globalQueueContactImagesToFetch.length&&(a+="|");0<a.length&&_a4f23c8057530c1af73ed120ef7e7f2d469899dcce50b60c685ba31a1d359a5c68bce9c521fcded2("push_phone_contact_photos_to_cloud",a)}
function _7b63c99e76ba2d7fa6fd8c91ca7efba375924d92be7b2e55f7790f13f1216c22cde0f9c904249729(){var a=globalContactsRefreshCacheQueue.shift();console.log("SHIFT OFF ARRAY: checking google contacts api for "+a);_fdcf6fa7f7549fed6c8861f47881a851624a7c069a094aaf722f08d3740be907a66838ad10afc6b8(a,global_oauth_contacts_token,!0);0<globalContactsRefreshCacheQueue.length&&setTimeout(_7b63c99e76ba2d7fa6fd8c91ca7efba375924d92be7b2e55f7790f13f1216c22cde0f9c904249729,300)}
function _23c9bbe3d73663ce584f365ec993fea5df78f656c488c6d6ab5f3f35f75c98c90b0bbf00d98062a2(){if(1>globalPHONEContactsRefreshCacheQueue.length)return!1;var a=globalPHONEContactsRefreshCacheQueue.shift(),b=a[1];$("#thumbnail-if-known-"+a[0]).attr("src",b);0<globalPHONEContactsRefreshCacheQueue.length&&setTimeout(_23c9bbe3d73663ce584f365ec993fea5df78f656c488c6d6ab5f3f35f75c98c90b0bbf00d98062a2,100)}
function _414cc884cc904c57b33ff363603b3df67632439e662e5ac475aacc01d64fadcaaab7b03a7a036e0f(a,b,c){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContactPhotos&phone_num_clean="+a,global:!1,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:function(d,e,g){"0"!=d.phone_contact_photo_status&&0<d.phone_contact_photo_status.length?($(b).attr("src","data:image/jpeg;base64,"+d.phone_contact_photo_status),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status})):
0==d.phone_contact_photo_status.length?(console.log("photo was previously requested and sent as blank to MT system for phone num: "+a),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status},{TTL:6048E5})):28800<c&&5>globalQueueContactImagesToFetch.length&&(globalQueueContactImagesToFetch.unshift(a),e=1728E5,$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status,ts_last_c2dm_pic_request:_bef72d51c481ff6f0ec689135fff3e39976c6069c2e484db0c1e881ec3a1a783c695f18819056a51()},
{TTL:e}))}})}function _7565f9175357f99e28e92fd330890ba4716513d8dfe0d2c4c0351b872340f99241fa89b95b66901d(){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContacts",global:!1,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:function(a,b,c){_690a6cc9b928df3496d5e84aba50f2729c31e4da1d103e7ba4dbeb695c72f440f4e318a54ea5af94(a)}})}
function _44a7f6fcc42600f663379839056825b119f14e2ba75c42a9cc58c4ae45ddf8dd981183027ce868c1(a){var b;$.each(contactsFromPhoneGlobal,function(c,d){if(a==d.phoneNumClean)return b=d,$.jStorage.set(username_prefix_jstrg_purpose+"|PC_"+a,{contactName:d.contactName,phoneNum:d.phoneNum,phoneNumType:d.phoneNumType}),!1});return b}
function _690a6cc9b928df3496d5e84aba50f2729c31e4da1d103e7ba4dbeb695c72f440f4e318a54ea5af94(a){if(0==a.contacts_status)return console.warn("No Phone contacts in cloud for this user"),!1;$.each(a,function(a,c){contactid=c.contactId;contactName=c.displayName;$.each(c.phoneList,function(a,b){phoneNumType=b.type;phoneNum=b.phoneNumber;cleanPhoneNum=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(phoneNum);contactsFromPhoneGlobal.push({phoneNum:phoneNum,phoneNumType:phoneNumType,
phoneNumClean:cleanPhoneNum,contactName:contactName})})})}function _8756b6cd986a55c3d2abc3d4f84a80d292931c66577486d783117ceb05a6997eec4097528a583ac5(){var a=$(".g-thumb-image-load-later").first();a&&(a.attr({src:a.attr("srcloadlater")}),a.removeClass("g-thumb-image-load-later"),a.addClass("g-thumb-image-LOADED-later-DONE"),setTimeout(_8756b6cd986a55c3d2abc3d4f84a80d292931c66577486d783117ceb05a6997eec4097528a583ac5,300))}
function _3cacfd9c7fb9cb4cb9e97f95107e5e56bf020c5d9616f11e2927ed20496cfe9d074f7bd06962bf34(){console.log("Forcing  contacts token refresh...");$.ajax({url:baseUrl+"/contact?function=revokeGoogleContactsToken",global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},error:function(a,b,c){alert("** Error in revoking google contacts token: "+c)},success:function(a,b,c){$.jStorage.flush();alert("Successfully Unlinked from Google Contacts");window.location.reload()}})}
function _458c1767884b1039a38c78c216c0b99a0a696d3e0fcc91c44ddf278b1ff01892596bca22f85c53b5(a){console.log("*** NEW CONTACTS TOKEN REFRESH!");$.ajax({url:baseUrl+"/contact?function=refreshGoogleContactsAccessToken",global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},error:function(a,c,d){console.log("** Error in refresh_google_contacts_access_token: "+d);_bf0d7192227b0e71fb5ad7fd38613b5436dd2dea5a444a561f3e3fa9eb0070de742a36c08a9cdbb5("NO_CONTACTS_TOKEN")},success:function(b,c,d){console.log("in force contacts token refresh -- success!");
console.log("get_new_access_token_value is: "+b);calling_from_chrome_extension&&$.jStorage.set("google_contacts_token",{contacts_token_value:b,time_captured:_bef72d51c481ff6f0ec689135fff3e39976c6069c2e484db0c1e881ec3a1a783c695f18819056a51()});-1<b.search("error")?_bf0d7192227b0e71fb5ad7fd38613b5436dd2dea5a444a561f3e3fa9eb0070de742a36c08a9cdbb5("NO_CONTACTS_TOKEN",a):_bf0d7192227b0e71fb5ad7fd38613b5436dd2dea5a444a561f3e3fa9eb0070de742a36c08a9cdbb5(b,a)}})}
function _82e4a14ccad3211fc9ef93bdb1a5beb7282c02582f3f9350884f8de19a3917eb0eec739251e5bd77(a){var b="https://www.google.com/m8/feeds/contacts/default/full?alt=json&v=3.0&max-results=6000&oauth_token="+a;localGoogleContactsFeed="NOTHING-STORED";"NOTHING-STORED"==localGoogleContactsFeed?(console.log("**CONTACTS: No local contacts TOKEN stored; calling google Contacts feed using stored token"),$.ajax({url:b,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(b,d,e){console.log(b);
_7aeb2b3bbdd0e1b96cf41bfe7e0e1a63d57e4f3465bed6662cb3058958c517ca3e81a65c7d70451e(b,a)}})):_7aeb2b3bbdd0e1b96cf41bfe7e0e1a63d57e4f3465bed6662cb3058958c517ca3e81a65c7d70451e(localGoogleContactsFeed,a)}
function _fdcf6fa7f7549fed6c8861f47881a851624a7c069a094aaf722f08d3740be907a66838ad10afc6b8(a,b,c){console.log("in getSingleNumberContactsFeeeed");if(0==a)return 1;var d="https://www.google.com/m8/feeds/contacts/default/full?q="+a+"&alt=json&v=3.0&max-results=2000&oauth_token="+b;console.log(d);$.ajax({url:d,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontacts"+a,success:function(d,g,f){console.log("In GetSingleNumberContacts Feed. . .");console.log(d);0<d.feed.openSearch$totalResults.$t&&
_f19a97157b78ac02089ebcc34249f5a102d74ee0cb027f9fb63a94dfa550837bca31f1cda9de5a8d(d,b,a,c)}});return 1}
function _7e1c16a11f7d5139bab266a99083a5430a4486ffcbbc2cd3dc5161e97763d36cf22377d43bf31a48(a){a=a.feed.entry;for(var b=0;b<a.length;b++){var c=a[b];console.log("name = "+c.getTitle().getText());for(var d=c.getEmailAddresses(),e=0;e<d.length;e++){var g=d[e].getAddress();console.log("email = "+g)}c=c.getPhoneNumbers();if(0==c.length)console.log("phone number = N/A");else for(e=0;e<c.length;e++)d=c[e].getValue()||"N/A",console.log("phone number = "+d)}0==a.length&&console.log("no contacts are found ")}
function _7aeb2b3bbdd0e1b96cf41bfe7e0e1a63d57e4f3465bed6662cb3058958c517ca3e81a65c7d70451e(a,b){contacts_bkg_page=[];contacts_autocomplete_per_unique_phone_num=[];googleContactsArray=[];for(var c="",d=0,e;e=a.feed.entry[d];d++){var g={name:e.title.$t,id:e.id.$t,emails:[],phonenums:[]};g.name||(g.name=g.emails[0]||"<Unknown>");if(e.link&&e.gd$phoneNumber)for(var f=e.link,k=0,h;k<f.length;k++)h=f[k],"image/*"==h.type&&void 0!=h.gd$etag&&(c=h.href);if(e.gd$phoneNumber)for(f=e.gd$phoneNumber,k=0;k<f.length;k++){h=
f[k];g.phonenums.push(h.$t);googleContactsArray.push({name:g.name,phone_number_full:h.$t,thumbnail:c});var n=h.rel,p="";void 0===n?p="Other":0<n.search("mobile")?p="Mobile":0<n.search("work")?p="Work":0<n.search("home")&&(p="Home");contacts_autocomplete_per_unique_phone_num.push({label:g.name+" "+h.$t+" ("+p+")",value:h.$t,contact_name:g.name,type_home_mobile:h.rel,g_contact_id:e.id?e.id:""})}e.gd$phoneNumber&&contacts_bkg_page.push(g)}console.log("*** Done parsing google contacts feed*****");console.log("num entries in googleContactsArray: "+
googleContactsArray.length)}var buildLongInfoString="";
function _f19a97157b78ac02089ebcc34249f5a102d74ee0cb027f9fb63a94dfa550837bca31f1cda9de5a8d(a,b,c,d){console.log("number ending, to match, is: "+c);var e=_4953f2117d314cb66a2efb622ea1b9ed6834da1f40ad5289946c13cd6a0e481d4ecdf3f2bd3d71f7(c,7);console.log("number ending, to match, ZERO PADDED to 7 digits is: "+e);for(var g="",f="",k=!1,h=a.feed.entry.length,n=0;n<h;n++){var p=a.feed.entry[n],s=p.title.$t;if(p.link&&p.gd$phoneNumber){console.log(p.gd$phoneNumber);console.log("For number_ending="+c+' -- in entry: Link and PhoneNumber, now traverse "links" and check for image/* and gd$etag\u2026.');
for(var r=p.gd$phoneNumber,m=0,q;m<r.length;m++){q=r[m];var t=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(q.$t),l=t.substring(t.length-7);console.log("For zero padded number_ending="+e+"..Phone Number in Google Contacts is: "+q.$t);console.log("Sanitized Google Contact Phone Number is: "+t);console.log("last 7 digits of  sanitized g contact # is: "+l);if(l==e)for(k=!0,""==f&&(f=s),t=p.link,q=0;q<t.length;q++)console.log("linklist index is  "+q),l=t[q],"image/*"==
l.type&&void 0!=l.gd$etag&&(console.log('found "image" and gd$etag entry in links list for contact: '+s),g=l.href,console.log("**** Single Num - GOT IMAGE FOR: "+s+" --\x3e "+g+"&oauth_token="+b))}}else if(p.gd$phoneNumber)for(console.log("For "+c+" -- At least one Phone Number found in this entry.."),p=p.gd$phoneNumber,q=0;q<p.length;q++)console.log("----------------------------------------")}k?(console.log("** Found explicit phone number match! -- Best info --- "+c+" -- Name: "+f+" -- Best Image: "+
g),newBestGoogleContactsArray.push({phone_num_clean:c,name:f,thumbnail_image:g}),$.jStorage.set(c,{name:f,thumbnail_image_google_base_url:g,time_stored:_bef72d51c481ff6f0ec689135fff3e39976c6069c2e484db0c1e881ec3a1a783c695f18819056a51()}),a="",e="#name-if-known-"+c,k="#thumbnail-if-known-"+c,h=$(".ui-tabs-selected a").attr("id"),a=""==g?"img/silhouette.jpg":g+"&oauth_token="+b,d&&($(e).text(f),c==h&&$("#thread-heading-name").text(f),$(k).attr("src",a))):console.log("No contact match found based on # ending with: "+
c)}
function _8f4c777bbe8515a85f66e226d2efc27ec31f63e6f60b874c096c8fbc840cf50d515b68a420e6a61f(a){document.getElementById("top-notif-bar").innerHTML="";_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Current google_login_status is "+google_login_status);_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Current login_and_beta_ready is "+login_and_beta_ready);selected_tab=$("#resultholder").tabs("option","selected");void 0!=selected_tab.length&&(selected_tab=
0);void 0!=a&&(document.getElementById("msg").innerHTML=a)}function _e8fec062cedca8395718af87308b940869b1e99d2d98d2c65fce016e3abab6728e05915fc60c1e4a(a){a="#thread-count-live-updated-"+a;$(a).text(parseInt($(a).text())+1);$(a).hide().fadeIn(600);$(a).siblings("#timestamp-last-msg").text(_455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75DisplayPurposes(new Date,!1))}
function _1de1d7c00ecf8241b1b36efee512050e385519491e1924932f29729c4fa4b8bb1fa4aa6bbbc56cfe(a){a=jQuery.parseJSON(a);if(void 0!==a.new_content){if(a=a.new_content,!(-1<a.body.search("CAPI_HEALTH_CHECK")||-1<a.body.search("USER_UPDATED_SETTINGS_IN_WEBAPP"))){var b=$(".ui-tabs-selected a").attr("id");a.phone_num_clean==b&&(b="",61==a.inbox_outbox&&(b="sms-reply"),$("#sms-thread-content").append('<li id="sms-line-item-msgid-'+a.id+'" class="sms-line-item JUST-PUSHED-FROM-CLOUD '+b+'"><div id="sms-body-msgid-'+
a.id+'" class="sms-body" >'+_4ae747571bb3e99bcd8ff7d7316df9ae4b2e20a8cba580c17892bf89f0f5ea48d0a65899e98baa38(a.body)+'</div>  <span class="sms-time" id="unknown">(just now...)</span></li>'),$("#sms-body-msgid-"+a.id).show("highlight",{color:"#F9EEC0"},3E3),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()));if(61!=a.inbox_outbox&&84!=a.type&&85!=a.type){var c="",d="";10==a.type?(c="Message from ",d="'"+a.body+"'"):11==a.type?void 0!==a.mms_object_key?(c="MMS from ",d="'"+a.body+
"' (MMS Downloaded)"):(c="MMS from ",d="Image Downloading on Phone..."):80==a.type?c="Incoming Call from ":81==a.type&&(c="Missed Call from ");d=_4ae747571bb3e99bcd8ff7d7316df9ae4b2e20a8cba580c17892bf89f0f5ea48d0a65899e98baa38(d);b=[];0!=a.phone_num_clean&&(b=$.jStorage.get(a.phone_num_clean,"no-jstorage-val-found"));var e="",e=b.name?b.name:a.phone_num;$("#msg").fadeOut(500,function(){$(this).html("<B>"+c+e+': </B><span style="font-weight:normal">'+d+"</span>").fadeIn(1E3)});var g="#"+a.phone_num_clean;
objNewSettings&&0==objNewSettings.notif_toggle_on_off?(console.log("*** DONT POPUP NOTIFICATION - USER PREFERENCE"),b=!1):b=!0;if(window.webkitNotifications&&"Chrome"!=BrowserDetect.browser&&b){var f=3E4,k="";objNewSettings&&objNewSettings.notif_dismiss_time&&(f=1E3*objNewSettings.notif_dismiss_time,console.log("setting notif_dismissal_time to: "+f));var k=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click to see message...":d,h=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png",
c+e,k);h.ondisplay=function(a){inWebAppGlobalNotifArray.push(h);setTimeout("_87d1cb8801216446292d65f64a69b0c8254149935e328fde0a85aba29cd558df9b4c371abf20d803();",f)};h.onclick=function(a){window.focus();$(g).click();this.cancel()};h.show()}!window.webkitNotifications&&b&&(k=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click OK to see message...":d,alert(c+e+": "+k),!1==_1c3f5169dfdba88b093e0069ad4cc250232b76b69740460f236e0b2322f47e3ce5ea107dd7bc6886(1)&&$(g).click())}if(10==a.type||
11==a.type)_e8fec062cedca8395718af87308b940869b1e99d2d98d2c65fce016e3abab6728e05915fc60c1e4a(a.phone_num_clean),_ca35ce219bacfc0b073b87a6189106aab67df60aa2edd43587fdbc5839e59c3dbbf5009b8d369645(a.phone_num_clean,a.phone_num)}}else void 0!==a.ack_processed?(b=a.ack_processed,a="message-status-text-msgid-"+b.id,b="outbox-message-msgid-"+b.id,null!=document.getElementById(a)&&(document.getElementById(a).innerHTML='<B>Phone Sent Message</B> <img style="margin-top:5px" src="checkmark-yes.png">'),null!=
document.getElementById(b)&&(document.getElementById(b).innerHTML='<B>Phone Sent</B> <img src="checkmark-yes.png">')):console.log("unknown incoming CAPI content")}
function _bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(a,b){for(;-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");for(;-1<a.search("[.]");)a=a.replace(".","");for(;-1<a.search("[/]");)a=a.replace("/","");for(;-1<a.search("[+]");)a=a.replace("+","");return a=!b&&7>a.length?_4953f2117d314cb66a2efb622ea1b9ed6834da1f40ad5289946c13cd6a0e481d4ecdf3f2bd3d71f7(a,
7):a.substring(a.length-7)}function _4a0707cf7b97b26ac8da3012c07fb8de8367f9e6b4da592b9600109928a7970f2d2d31b87ccac87c(){$("#resultholder").tabs("select",-1);$(".ui-tabs-selected").removeClass("ui-state-active").removeClass("ui-tabs-selected")}
function _f7e4b75403ecad09c4b4f50bf211ae55eb23524baf1008d13dd071b58c09414d0abf31a31bda167b(){_gaq.push(["_trackEvent","WebApp","Compose-New-Msg-Click","WebAppPageView",1]);if(!$("#settingsPane")[0]&&_1c3f5169dfdba88b093e0069ad4cc250232b76b69740460f236e0b2322f47e3ce5ea107dd7bc6886())return!1;_4a0707cf7b97b26ac8da3012c07fb8de8367f9e6b4da592b9600109928a7970f2d2d31b87ccac87c();$("#sms-container").css("height","auto");document.getElementById("sms-container").innerHTML='<div id="compose-single-text" style="text-align:left;clear:both;font-size:18px;padding:5px;padding-left:9px;border-left:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-radius:10px">';
contact_box_prompt="Start typing a name or number...";document.getElementById("compose-single-text").innerHTML+='<h3 style="font-size:21px;margin-bottom:15px;margin-top:10px;padding-bottom:5px;border-bottom: 1px solid rgba(0,0,0,.1)"><b>New Message</b></h3><br><p><B>Send To:</B>  <span style="font-size:12px;color:#3F8CD9;margin-left:10px">(Up to 3 recipients) <a style="font-size:12px;color:#E60;float:right" href="#" onclick="alert(\'Please Note: Your carrier will count an SMS for each recipient. As a reminder, MightyText sends SMS via your phone.\');">important note</a></span></p>';
document.getElementById("compose-single-text").innerHTML+='<div id="friends" style="color:darkgrey; border:1px solid #CCC;margin:0px;margin-right:40px;padding:8px;font-size:15px;height:60px"></div>';document.getElementById("friends").innerHTML+='<input id="compose-number" type="text" size=20 name="compose-number" style="border:none;" />';document.getElementById("compose-single-text").innerHTML+="<br><p><B>Message:</B></p>";document.getElementById("compose-single-text").innerHTML+='<div id="single-text-elements">';
document.getElementById("compose-single-text").innerHTML+='<textarea id="send-one-text" value="starting val" onfocus="document.getElementById(\'error-text-content-single-text\').innerHTML=\'\';" style="float:left;height:70px;max-height:80px;width:400px;border:1px solid #CCC;margin:0px;padding:5px;font-size:16px;"></textarea>';document.getElementById("compose-single-text").innerHTML+='<span id="holder-adjacent-sendbox-single-text" style="float:left"><button id="send-button-single-text" style="font-size:14px;margin:0px;padding:7px;margin-left:18px;cclear:both" onclick="_47105cbef465bed0b34c13e782c1ea185b448d6d5a842afffdfc7924d4ff3f8ebd8b4d4cf26d0921();"> Send</button><br><br><span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;font-family:arial;margin-left:20px" id="charsLeft-one-text"></span></span>';
document.getElementById("compose-single-text").innerHTML+='<span id="mms-canvas-single-text" style="">'+_94760acfbdb6980a7915e5b00cc083ef5ae9f8ce15d502e21f4bb40c350219bdf17a48d9f447af55();document.getElementById("compose-single-text").innerHTML+="</span>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+="<br><br>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+=
'<br><div id="single-text-texts" style="font-size:14px"></div>';document.getElementById("compose-single-text").innerHTML+='<br><div id="error-text-content-single-text" style="font-weight:bold;color:red;font-size:14px"></div>';$("#compose-number").focus();objNewSettings&&0==objNewSettings.enter_to_send||$("#send-one-text").unbind("keydown").keydown(function(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),$("#send-one-text").blur(),$("#send-button-single-text").click())});$("#send-one-text").NobleCount("#charsLeft-one-text");
$("#send-one-text").click(function(){0<$("#compose-number").val().length&&_91083e5e70758349d9ed88436d9961f72c85fc21f08a5f0bcb7e4eb078c8f929da6523612dc41db6()});$("#compose-number").delegate("","keydown",function(a){8==a.keyCode&&1>$("#compose-number").val().length&&$(this).prev("span").remove();188==a.keyCode&&0<$("#compose-number").val().length&&_91083e5e70758349d9ed88436d9961f72c85fc21f08a5f0bcb7e4eb078c8f929da6523612dc41db6()});$(function(){$("#compose-number").bind("keydown",function(a){a.keyCode===
$.ui.keyCode.TAB&&($(this).data("autocomplete").menu.active?a.preventDefault():_91083e5e70758349d9ed88436d9961f72c85fc21f08a5f0bcb7e4eb078c8f929da6523612dc41db6())});$("#compose-number").autocomplete({source:contacts_autocomplete_per_unique_phone_num,autoFocus:!0,delay:100,open:function(a,b){$(".ui-menu").css({"z-index":"9999"});$(".ui-menu").css({border:"1px solid #c0c0c0"});_2356525e2cbcb47237efaf5cd9b57e11c90f576e8f6dd7f20b5b462c73891d9bec1614fdf113ad74()},select:function(a,b){if(_2356525e2cbcb47237efaf5cd9b57e11c90f576e8f6dd7f20b5b462c73891d9bec1614fdf113ad74()){var c;
c=0<b.item.contact_name.length?'<div id="single-compose-contact-name" style="font-size:14px">'+b.item.contact_name+'</div><span id="single-compose-target-phone-num" style="border:none;font-size:12px">'+b.item.value+"</span>":b.item.value;$("<span class='contact-bubble'>").html(c).insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}},change:function(){}});$("#compose-number").autocomplete("widget").addClass("compose-single-text-autocomplete-box");$("#friends").click(function(){$("#compose-number").focus()});
$(".remove",document.getElementById("friends")).live("click",function(){$(this).parent().remove();0===$("#friends span").length&&$("#compose-number").css("top",0)})})}function _2356525e2cbcb47237efaf5cd9b57e11c90f576e8f6dd7f20b5b462c73891d9bec1614fdf113ad74(){return 2<$(".contact-bubble").length?($("#compose-number").val(""),$("#compose-number").autocomplete("close"),alert("You already have selected 3 recipients."),!1):!0}
function _91083e5e70758349d9ed88436d9961f72c85fc21f08a5f0bcb7e4eb078c8f929da6523612dc41db6(){if(!(1>$("#compose-number").val().length)&&_2356525e2cbcb47237efaf5cd9b57e11c90f576e8f6dd7f20b5b462c73891d9bec1614fdf113ad74()){var a;a=$("#compose-number").val().replace(",","");a=a.replace("\t","");if(_a2b77ecefe09fb6db25da770346784770fc2991217217b10b6d9b3ff871dd6a0cb5516e64a4cbd18(a)){a='<span id="single-compose-target-phone-num" style="border:none">'+a+"</span>";var b=$("<span class='contact-bubble'>").html(a);
$("<a>").addClass("remove").attr({href:"javascript:",title:"Remove "+a}).text("x").appendTo(b);b.insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}else alert(a+" is not a valid phone number"),$("#compose-number").val($("#compose-number").val().replace("\t","")),setTimeout("$('#compose-number').focus();",50)}}
function _8ad1e0e5559ea668b85b05f810b6c21a2f40442fc0a99ef6b2fb576f926ba05b2baaa4f3b4e5cb99(){var a=!1,b=0,c=[];$("#friends .contact-bubble").each(function(){$(this);var a=$(this).children("#single-compose-target-phone-num").text();_a2b77ecefe09fb6db25da770346784770fc2991217217b10b6d9b3ff871dd6a0cb5516e64a4cbd18(a)?(b++,c.push(a)):alert(a+" is not in a valid phone number.")});$("#friends input").each(function(){var d=$(this).val();0<d.length&&(b++,_a2b77ecefe09fb6db25da770346784770fc2991217217b10b6d9b3ff871dd6a0cb5516e64a4cbd18(d)?
c.push(d):(alert(d+" is not a valid number"),a=!0))});0==b?alert("No recipients entered"):a||_533e61b3305f890d3eda564f7dac5eec1664b83f18e25519a6a0d0412f02580b7e83184efef7518b(c,b)}
function _533e61b3305f890d3eda564f7dac5eec1664b83f18e25519a6a0d0412f02580b7e83184efef7518b(a,b){_gaq.push(["_trackEvent","WebApp","Send-Message-Compose-New-Window-Click","",b]);$("#msg").empty();$("#send-button-single-text").css({background:"lightgrey",color:"grey"});$("#send-button-single-text").html("Sending...");$("#send-button-single-text").attr("disabled",!0);var c=0==$("#mms-blob-id-holder").text().length;$(a).each(function(a,b){var g=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(b,
!0);c?_303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a("send_sms","single-compose",b,g,b,_a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b,a):_303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a("send_mms","single-compose",b,11111,b,"_a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b",a,$("#mms-blob-id-holder").text())})}
function _6ed3239f339cf69588719054d58fd842b3aca040bc11d7083bce3438714fee5e3c524584fd1b8fc4(a){a=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(a);return a.substring(a.length-7)}function _a2b77ecefe09fb6db25da770346784770fc2991217217b10b6d9b3ff871dd6a0cb5516e64a4cbd18(a){if(""!=a){for(i=0;i<a.length;i++){var b=a.charAt(i);if(0>"+- 1234567890()/][.".indexOf(b))return!1}return!0}return!1}
function _4e28dcec50c8cd9dc5b251ea01409158b1e7710ce1f463f56b2a3203d08ed5a49e11a775cde98a50(){$.ajax({type:"GET",url:baseUrl+"/getJson?function=getChannelTokenForWebApp&client=CRX_WEBAPP&mins=120",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){console.log("Response from cloud after channel attempt (should have valid_token prepend): "+a);if(0>a.search("valid_token:"))console.log("No valid_token prepend found from Channel API!");else{a=a.replace("valid_token:","");var b=new goog.appengine.Channel(a);
console.log(b);b=b.open();b.onopen=function(){global_time_last_CAPI_msg_received_webapp=new Date;console.log("Channel Opened via Channel API with token: "+a);console.log("Current time - when channel API new socket is opened : "+Date());_gaq.push(["_trackEvent","Background","ChannelAPI-Open-Socket","",1])};b.onmessage=function(a){_gaq.push(["_trackEvent","Background","ChannelAPI-Message-Received","",1]);global_time_last_CAPI_msg_received_webapp=new Date;console.log("**** CHANNEL SOCKET ONMESSAGE *** ");
console.log("Message arrived via CAPI= "+a.data);_1de1d7c00ecf8241b1b36efee512050e385519491e1924932f29729c4fa4b8bb1fa4aa6bbbc56cfe(a.data)};b.onerror=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onerror callback)!!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONERROR","",1])};b.onclose=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onclose callback) !!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONCLOSE","",1]);setTimeout("_4e28dcec50c8cd9dc5b251ea01409158b1e7710ce1f463f56b2a3203d08ed5a49e11a775cde98a50();",
300);console.log("------\x3e get a new Channel Token")}}}}).responseText}function _457e4815d16ae378ffe376f3f5e18d947b92137a32e506c49ddd9690a5767c6579430e53d458c1b0(){_572a56dfcb4b3d759b054bf140520ed47b9f7f5072f8ca1a41999fa6f478762ed2820147c7c236eb();alert("Welcome to the MightyText Web App!");window.location.reload()}
function _b7fc9c7982c8cc903043e943ae7a5035c2f5b39c86be7ae2ab07a5b7affc82a18a34fcb428c6d785(a){$.ajax({url:"uservoice_sso.php",global:!1,type:"POST",timeout:1E4,data:"useremail="+a,error:function(a,c,d){},success:function(a,c,d){0<=a.indexOf("success")?(uvOptions={sso:a.split(/\{([^}]+)\}/)[1]},a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/mJ2EXFuxIoJI4z24dEDKTA.js",c=document.getElementsByTagName("script")[0],
c.parentNode.insertBefore(a,c)):console.log("proper sso token not retrieved from uservoice helper php script")}})}function promptUserForNewContactsOauthFlow(){document.getElementById("one-off-notify-user").innerHTML='<a style="font-size:14px;color:cyan"  href="'+newContactsOAuthURL+'" onclick="">Sync with Google Contacts</a>to see names'}
function _64d3255bde90f21a00fcc26c97a78e64a32253862eed3811d22adbfee437826e47122d4524f86955(){document.getElementById("user-actions").innerHTML="";document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="positive button" onclick="if(_f29487efde244dc3e6af5c243803d9aef307e0132f04d08240b3f8013d91cbce33de2fec499863fa()) {document.getElementById(\'msg\').innerHTML=\'\';_f7e4b75403ecad09c4b4f50bf211ae55eb23524baf1008d13dd071b58c09414d0abf31a31bda167b();}"> <span class="pen icon"></span>Compose New</button>';
document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="button" onclick="_27a8ebd156468b577d748038072e61310e663a6506d1b3c7dac7931785784c0b3b83c8e99d97206f();"><span class="reload icon"></span>Reload</button>';_6b34676d25e2c974414eee61e16d6b0ac91c35b7893be0c21a0c5810397455dec38d5b2391f09a39()}
function _f29487efde244dc3e6af5c243803d9aef307e0132f04d08240b3f8013d91cbce33de2fec499863fa(){if(google_login_status)return!0;document.getElementById("msg").innerHTML='<span style="color:black">** Unable to send any new text messages. Not signed in. ** </span>';return!1}
function _27a8ebd156468b577d748038072e61310e663a6506d1b3c7dac7931785784c0b3b83c8e99d97206f(){_gaq.push(["_trackEvent","WebApp","App-Reload-Within-App","WebAppPageView",1]);$("#main-section").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#resultholder").tabs("disable");$("#resultholder").tabs("destroy");$("#resultholder").unbind("tabsselect");$("#tabs-phone-threads").empty();$("#sms-thread-content").empty();
_f441963a6e37d2734f092078947742590f8f863ebc76ce6119b40d539ecb5e37ec8bdbb574459b79();_458c1767884b1039a38c78c216c0b99a0a696d3e0fcc91c44ddf278b1ff01892596bca22f85c53b5(!0)}
function _7cbeca2c4a9b30be6c8ca5f15ff2d2f641ea3b0bfe6bc4f2e7897a03b01fba2c0f9f5df065cc1920(){document.getElementById("sign-in-status").innerHTML+='<img src="green-dot-icon.png"><span style="color:white;"> '+google_username_currently_logged_in+' | <a id="sign-out-link" href="'+signOutUrl+'"> Sign Out</a></span>';$("#sign-out-link").click(function(){_gaq.push(["_trackEvent","WebApp","SignOut-Link-Click","",1])})}var highlight_msg_id_from_search_global="";
function _ea301974e96aeb13f8723a7b8e9325aa232001f55e90d1af8184d2ff992e205e8a6eec96dcd18cf0(){$.ui.autocomplete.prototype._renderItem=function(a,b){var c=b.label.replace(RegExp("^"+this.term),"<span style='font-weight:bold;color:Blue;'>"+this.term+"</span>");return $("<li></li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)}}
function _f408bd39c3510e04cda7357c04d9af6154fa4a82ec0ba47eed1232a554b54430c3405cc56d832277(){searchAutocompleteArray=[];var a=baseUrl+"/content?function=getPendingMessages&time_delay=180";console.log("getting Pending Outbound Messages");$.ajax({url:a,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){$.each(a.messages,function(a,b){4>a&&$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+b.id+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">'+
b.body+" --\x3e "+b.phone_num_clean+'<span class="sms-time" id="outbox-message-msgid-'+b.id+'">Request sent. <img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span></li>')})}})}
function _b7ca19d67bcb2ec8b1785a3f87cbc484d2dd38efcc1036865b4a7190ad67eeaac47fa5a2e92967dc(a,b,c){var d="",e="",g="",f="";"END"==b?(f="&start_range=0&end_range=40",$("#sms-thread-content").empty()):f="&start_range=40&end_range=20000";f=baseUrl+"/content?function=GetMessages"+f;console.log("Get Messages for: "+a);""!=a&&(f+="&phone_num="+encodeURIComponent(a));$.ajax({url:f,global:!1,type:"GET",timeout:9E3,dataType:"json",error:function(a,b,c){$("#main-section").unblock();$("#list-of-tabs").unblock();
_4a0707cf7b97b26ac8da3012c07fb8de8367f9e6b4da592b9600109928a7970f2d2d31b87ccac87c();alert("Error in GetMessages: "+c)},statusCode:{500:function(){alert("Error 500")}},success:function(f,h,n){_gaq.push(["_trackEvent","WebApp","Load-Thread-Tab-Click","WebAppPageView",1]);$("#main-section").unblock();$("#list-of-tabs").unblock();$.each(f.messages,function(a,b){var c,f="",h="";c=!1;e="";if("80"==b.type||"81"==b.type||"82"==b.type||"83"==b.type||"84"==b.type||"85"==b.type)c=!0;"61"!=b.inbox_outbox||c||
(e=" sms-reply");if("11"==b.type||"70"==b.type)h=baseUrl+"/imageserve?function=fetchFile&id="+b.id,f='<div id="mms-scale-down" style="height: 60px"><a id="fancyimagepopup" style="margin-left:25px;" href="'+h+'"> <img style="vertical-align:middle;height:100%" src="'+h+'" alt="Photo in process"></a></div>';var k="",h="";c&&(k=" calling-line-item",h=" calling-line-item-color-styling");c=""+('<li id="sms-line-item-msgid-'+b.id+'" class="sms-line-item'+e+k+'">');b.body=_4ae747571bb3e99bcd8ff7d7316df9ae4b2e20a8cba580c17892bf89f0f5ea48d0a65899e98baa38(b.body);
c+='<div id= "sms-body-msgid-'+b.id+'" class="sms-body'+h+'" >'+b.body+f+"</div>";f="";h=b.ts_server;2==b.status_route?f='Pending<span class="tooltip"><span>Message has been sent to MightyText. Waiting for confirmation from your phone that it got sent.</span><img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span>':99==b.status_route&&(h=b.ts_phone_forward);c+='<span class="sms-time" id="message-status-text-msgid-'+b.id+'">'+f+"</span>";b.is_starred?(star_image_url="starred.png",
star_class_at_load="starred"):(star_image_url="unstarred.png",star_class_at_load="unstarred");c=c+'<span class="sms-time">'+_455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75DisplayPurposes(h,!0);c+='<a id="STAR-'+b.id+'" href="#" onclick="_f785189a7870564055f3efd8431ba2ec233439227658e7403c98e277d0da178421e677aadb180ae7(this);" class="'+star_class_at_load+'"  style="margin-left:5px;margin-right:5px"><img src="'+star_image_url+'"/></a>';c+='<a id="DELETE-MESSAGE-'+b.id+
'"" href="#" onclick="_52f9ea833f77101cd90610e5ce7a25c20d9aacbd3cf2d55f463ddd6cadb360c49b74ecd937a4c159(\''+b.id+"','"+b.phone_num_clean+"','"+b.type+'\'  );" class="delete-message" style="visibility:hidden"><img width=11 height=12 src="trashcan.png"/></a>';c+="</span></li>";d=c+d;g="#sms-body-msgid-"+b.id});"END"==b?($("#sms-thread-content").empty(),$("#sms-thread-content").html(d),$("#thread-heading-name").text(c),40==f.messages.length&&($("#sms-thread-content").prepend("<button id='show-more-messages-prompt' class='button-angel' style='display:block;margin:0px auto;width:90%;font-size:13px;margin-bottom:20px;margin-top:10px; height:35px' onclick=''><B>\u2191 &nbsp&nbsp Show more messages &nbsp&nbsp\u2191</B></button>"),
f="_b7ca19d67bcb2ec8b1785a3f87cbc484d2dd38efcc1036865b4a7190ad67eeaac47fa5a2e92967dc('"+a+"','"+g+"');",f+="$('#show-more-messages-prompt').html('<img id=\"getting-more-messages-graphic\" src=\"transparent-ajax-loader.gif\">');_gaq.push(['_trackEvent','WebApp','User-Click-See-More-Messages','',1]);",$("#show-more-messages-prompt").attr("onclick",f)),setTimeout('$("#sms-thread-content").scrollTop(4000000+$("#sms-thread-content").height());',10)):($("#show-more-messages-prompt").remove(),$("#sms-thread-content").prepend(d).fadeIn("slow"),
$("#sms-thread-content").scrollTo(b,4,{offset:-50}));$("#sendbox-main").focus();$("#toggle-calls").attr("checked")||$(".calling-line-item").hide();objNewSettings&&1==objNewSettings.enter_to_send&&$("#sendbox-main").unbind("keydown").keydown(function(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),$("#sendbox-main").blur(),console.log("enter triggered, and blur attempt - KEYDOWN"),$("#send-button-main").click())});""!=highlight_msg_id_from_search_global&&(f="#sms-body-msgid-"+highlight_msg_id_from_search_global,
$(f).css({"font-size":"14px","font-weight":"bolder"}),$(f).css({color:"#243443"}),$("#sms-thread-content").scrollTo(f,400,{offset:-5}));highlight_msg_id_from_search_global="";$(".sms-line-item").mouseover(function(){$(this).find(".delete-message").css("visibility","visible")});$(".sms-line-item").mouseout(function(){$(this).find(".delete-message").css("visibility","hidden")});$("a#fancyimagepopup").fancybox({type:"image",transitionIn:"elastic",transitionOut:"elastic"})}})}
function _4ae747571bb3e99bcd8ff7d7316df9ae4b2e20a8cba580c17892bf89f0f5ea48d0a65899e98baa38(a){for(;-1<a.search("[\n]");)a=a.replace("\n","<br >");return a=_ffecaf8d79c8d3ae2fc2edcc5072aa7e6260617a87f0b4a6c95c0329cafdc800702c5ae3a6bc2e4b(a)}
function _303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a(a,b,c,d,e,g,f,k){var h="",n="";"single-compose"==b?(n="#send-button-single-text",h=$("#send-one-text").val()):"test-sms-send"==b?(n="N/A",h="Sending Test SMS from MightyText"):(n="#send-button-main",h=$("#sendbox-main").val());var p="",p="",s=baseUrl+"/client?function=send";isCorsSupported||(s="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM");var r=new XMLHttpRequest;r.open("POST",s,!0);r.withCredentials=
"true";r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.onreadystatechange=function(){if(4==this.readyState&&200==r.status){var k=r.responseText;if(-1<k.indexOf("OK"))if(0<k.indexOf("phone call initiated successfully"))document.getElementById("msg").innerHTML="Your phone is now dialing "+c,document.getElementById("remote-phone-dial").innerHTML="Dial from Phone",alert("Your phone is now dialing "+c+". You should get your phone to talk.");else{if(0<k.indexOf("sent to phone")){var k=
k.split(/\{([^}]+)\}/)[1],m="";"send_sms"==a?m="SMS":"send_mms"==a&&(m="MMS");_e8fec062cedca8395718af87308b940869b1e99d2d98d2c65fce016e3abab6728e05915fc60c1e4a(d);_ca35ce219bacfc0b073b87a6189106aab67df60aa2edd43587fdbc5839e59c3dbbf5009b8d369645(d,c);var l="outbox-message-msgid-"+k;$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+k+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">"'+h+'" --\x3e '+e+'<span class="sms-time" id="'+
l+'">Sending\u2026</span></li>');document.getElementById(l).innerHTML='Request sent<br>to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">';"single-compose"==b?($("#send-one-text").val(""),$("#compose-number").val(""),_f7e4b75403ecad09c4b4f50bf211ae55eb23524baf1008d13dd071b58c09414d0abf31a31bda167b(),$("#msg").append(m+" to "+e+"\u2026"),0==f&&$("#msg").prepend("Request sent to MightyText: ")):(document.getElementById("msg").innerHTML="Request sent to MightyText. "+
m+" to "+e,$("#mms-image-preview").hide(),$("#mms-image-preview").attr("src",""),$("#mms-blob-id-holder").text(""),$("#send-button-main").text("Send"),$("#send-button-main").attr("disabled",!1),$("#send-button-main").css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"}),$("#charsLeft-main").text("500"),m="message-status-text-msgid-"+k,h=_4ae747571bb3e99bcd8ff7d7316df9ae4b2e20a8cba580c17892bf89f0f5ea48d0a65899e98baa38(h),$('<li id="sms-line-item-msgid-'+
k+'"  class="sms-line-item sms-reply JUST-SENT"><div id="sms-body-msgid-'+k+'" class="sms-body" style="display:none" '+p+">"+h+'</div>  <span class="sms-time" id="'+m+'">Sending\u2026</span></li>').appendTo("#sms-thread-content"),$("#sms-body-msgid-"+k).fadeIn("fast"),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()),document.getElementById(m).innerHTML='Sent to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">',$("#sendbox-main").val(""),
setTimeout('$("#sendbox-main").focus();',0))}}else-1<k.indexOf("LOGIN_REQUIRED")?(alert("Not logged in to MightyText."),_5c6c4003403a5ff09783fc5344fdafd1119fca829675d809935aaccf4cee816bf1d29ac190a3a6b0(n)):-1<k.indexOf("DEVICE_NOT_REGISTERED")?(alert("Android Phone not registered with MightyText with this Google Account, or MightyText Android App not installed properly."),_5c6c4003403a5ff09783fc5344fdafd1119fca829675d809935aaccf4cee816bf1d29ac190a3a6b0(n)):-1<k.indexOf("DeviceQuotaExceeded")?(alert("Android Phone Quota Exceeded.  Error Code: DeviceQuotaExceeded (C2DM)"),
_5c6c4003403a5ff09783fc5344fdafd1119fca829675d809935aaccf4cee816bf1d29ac190a3a6b0(n)):(alert("General Error when issuing C2DM request."),_5c6c4003403a5ff09783fc5344fdafd1119fca829675d809935aaccf4cee816bf1d29ac190a3a6b0(n),g("general_error",r))}};if("send_sms"==a)if(-1<h.search("0-35")){var m="deviceType=ac2dm&action=set_env&action_data="+encodeURIComponent(h);alert("Switching Android Env to: "+h)}else-1<h.search("MIGHTYPROD")?(m="deviceType=ac2dm&action=set_env&action_data=prod",alert("Switching Android Env to: "+
h)):m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=send_sms&action_data="+encodeURIComponent(h);else"send_mms"==a?m="phone="+encodeURIComponent(c)+"&type=11&source_client=31&deviceType=ac2dm&action=send_mms&action_data="+encodeURIComponent(h)+"&mms_object_key="+encodeURIComponent(k):"make_automated_call"==a?m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=make_automated_call&action_data="+encodeURIComponent(h):"get_latest_messages_from_phone"==
a?m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=get_latest_messages_from_phone&action_data="+encodeURIComponent(h):"mark_single_message_read"==a?m="deviceType=ac2dm&type=10&source_client=31&action=mark_single_message_read&action_data="+encodeURIComponent(h):"mark_whole_thread_read"==a&&(m="deviceType=ac2dm&action=mark_whole_thread_read&action_data="+encodeURIComponent(h));isCorsSupported||(m=m+"&wagdaedunn="+ckSharedGlobal);r.send(m)}
function _5c6c4003403a5ff09783fc5344fdafd1119fca829675d809935aaccf4cee816bf1d29ac190a3a6b0(a){$(a).text("Send");$(a).attr("disabled",!1);$(a).css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"});"#send-button-main"==a?$("#sendbox-main").focus():$("#send-one-text").focus()}
function _a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b(a,b){console.log("listener called for sendSMS function. status returned is: "+a)}
function _b982270f88e8fcb167963e2c3f3652403d2390f5a1dc15e97b71fb5c33afda458b76f58de5e97c34(a){$.ajax({url:"easyXDM/easyXDM.min.js",dataType:"script",cache:!0,success:function(b,c){easyXDM.DomHelper.requiresJSON("easyXDM/json2.js");console.log(b);console.log(c);console.log("XDM JS Load was performed.");_4e6f496917e30c8fd00de5a031d9ac06f44f95f85406d2fadcaebb1de3b3ad3a48ffe2a939f7a2c1(a)}})}
function _6a3d925db4bf6e55066ebb616526fc70524fc9f1ccea418e09c2b41660903ec8f7d0fb2c6f6a143b(a,b){a=a.toString();console.log("rightmost_digits_to_find is: "+a);console.log("length of rightmost_digits_to_find is: "+a.length);7>a.length&&(a=_4953f2117d314cb66a2efb622ea1b9ed6834da1f40ad5289946c13cd6a0e481d4ecdf3f2bd3d71f7(a,7),console.log("after padding: "+a));for(var c=Array(2),d=0;d<googleContactsArray.length;d++){var e=_bfd3cff16892085aa8bffb1627dd971714d1d5a4ced3b33ece281a0a00c241f70e28ec43ceec8974(googleContactsArray[d].phone_number_full).search(a);
if(-1<e)return console.log("FOUND "+a+" in Google Contact Array- substring match position is: "+e+" matched with: "+googleContactsArray[d].phone_number_full),c[0]=googleContactsArray[d].name,c[1]=googleContactsArray[d].thumbnail,c}return""}function _6ce95ad43ebf81a04da9353e59bf1b1bbcb6f92999f3b3ada2b4675c518ff23cbd9539da05e2f1f8(a){return""}
function _fcb1cd7c99bfca9bdfa9190ae796acc20e2caf0ece9521580b5fc046ae146389029ad3fad19fc488(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"}
function _e138fa803f834843c858afd88de4a28a4483fce1ebccb1b0caf018a968dabc0324272ab8352b1338(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}function _39f8fd1cb082b9d09fc38881b03b552ad7104fcc6d4b7b1893b3f66f0a5dbebfeb74387e5b11c1d5(a){_fcb1cd7c99bfca9bdfa9190ae796acc20e2caf0ece9521580b5fc046ae146389029ad3fad19fc488(a,"",-1)}
function _4953f2117d314cb66a2efb622ea1b9ed6834da1f40ad5289946c13cd6a0e481d4ecdf3f2bd3d71f7(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function _572a56dfcb4b3d759b054bf140520ed47b9f7f5072f8ca1a41999fa6f478762ed2820147c7c236eb(){$.ajax({type:"GET",url:baseUrl+"/whitelist?function=setBetaFlag",dataType:"json",success:function(a,b,c){window.location.reload()}}).responseText}
function _ca2655d38369cf886493708143a8e88cee9f1f163b35b66e67f3cbd1adfac9cd41d5a7df835a6921(){$.blockUI({message:""});$.ajax({type:"GET",url:baseUrl+"/imageupload",dataType:"json",timeout:3E3,success:function(a,b,c){_b982270f88e8fcb167963e2c3f3652403d2390f5a1dc15e97b71fb5c33afda458b76f58de5e97c34(a);$.unblockUI();_a22bfbacfff53f38ba5b08cc2bc5e9e047526d67cf3d70e757637e1deede559229992c56d31f5586()},error:function(a,b,c){alert("Error in getting File Upload URL: "+c);$.unblockUI();console.log("error in _ca2655d38369cf886493708143a8e88cee9f1f163b35b66e67f3cbd1adfac9cd41d5a7df835a6921")}});
return!1}function _d80bc4c2dfdcecc2d6ae22d25e4feba216f991cff27b185bd960df59798f065da107793ecf0bd00c(a){$.ajax({type:"POST",url:"check_admin.php",data:{email_check_pso:a},success:function(a){"true"!=a&&(alert("No dev access!"),window.location="https://mightytext.net")}})}
function _020b6093dd3f8e79ecb3b30b5b1bb90ebf3ba41cf05ff0ada5c3121a9a88cc39e19568b759d398aa(a){$.ajax({type:"POST",url:"https://mightytext.net/app/checkpwd.php",data:{pwd:a},success:function(a){"true"==a?(_572a56dfcb4b3d759b054bf140520ed47b9f7f5072f8ca1a41999fa6f478762ed2820147c7c236eb(),setTimeout("window.location.reload();",2E3)):(alert("Not a valid passcode..."),window.location="http://mightytext.net")}})}
function _f785189a7870564055f3efd8431ba2ec233439227658e7403c98e277d0da178421e677aadb180ae7(a){var b=$(a).attr("id").substr(5),c=baseUrl+"/content?function=updateMsgInfo";$(a).hasClass("starred")?$.ajax({type:"GET",url:c,dataType:"json",data:{id:b,is_starred:0},success:function(b){!1==b.updated?alert("Error - Message not Un-Favorited. Please report to MightyText team (Error Code: UNFAV7411)"):($(a).removeClass("starred"),$(a).addClass("unstarred"),$(a).find("img").attr("src","unstarred.png"))}}).responseText:
$.ajax({type:"GET",url:c,dataType:"json",data:{id:b,is_starred:1},success:function(b){!1==b.updated?alert("Error - Message not Favorited. Please report to MightyText team (Error Code: FAV3985)"):($(a).removeClass("unstarred"),$(a).addClass("starred"),$(a).find("img").attr("src","starred.png"))}}).responseText}
function _863b2b26476591a4df94ba61c2f2d8651f4ee2434b4d59d1cf6a111b76613959e9233634e1b43d83(){if(_1c3f5169dfdba88b093e0069ad4cc250232b76b69740460f236e0b2322f47e3ce5ea107dd7bc6886())return!1;_4a0707cf7b97b26ac8da3012c07fb8de8367f9e6b4da592b9600109928a7970f2d2d31b87ccac87c();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"POST",dataType:"json",success:function(a){_ba0e7b411b939911cd32120c19890eb9abca8f0355b95026228656693385d9af9f9c55ba61f29836(a.usersettings)}})}
function _5c01ffeb1ac09e2025a66a7e1e0b616b152c200691b5f293a497b1e616e26a124d726e7984130aa0(a){if(_1c3f5169dfdba88b093e0069ad4cc250232b76b69740460f236e0b2322f47e3ce5ea107dd7bc6886())return!1;_4a0707cf7b97b26ac8da3012c07fb8de8367f9e6b4da592b9600109928a7970f2d2d31b87ccac87c();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"GET",dataType:"json",success:function(b){a&&_ba0e7b411b939911cd32120c19890eb9abca8f0355b95026228656693385d9af9f9c55ba61f29836(b.usersettings);
globalSettingsJSONUponLoad=b.usersettings;globalSettingsJSONUponLoad.settings_list?objNewSettings=jQuery.parseJSON(globalSettingsJSONUponLoad.settings_list.value):(objNewSettings=jQuery.parseJSON("{}"),_0c94e38fee81d00731544c94239efd1f9bbbbcfd036c9e9fb4f133ed6c1ef70bfe8ddf4d476bf427("settings_list",'{"enter_to_send":1,"notif_content":2}',!1))}})}var helperGlobalSettingsObjectSetter;
function _83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(a,b){helperGlobalSettingsObjectSetter=objNewSettings;eval("helperGlobalSettingsObjectSetter."+a+" = "+b);var c=$.toJSON(helperGlobalSettingsObjectSetter);_0c94e38fee81d00731544c94239efd1f9bbbbcfd036c9e9fb4f133ed6c1ef70bfe8ddf4d476bf427("settings_list",c,!0)}
function _0c94e38fee81d00731544c94239efd1f9bbbbcfd036c9e9fb4f133ed6c1ef70bfe8ddf4d476bf427(a,b,c){c&&$("#msg").html("Saving Settings...");var d="",e=baseUrl+"/usersettings?function=updateUserSettings",e=e+("&"+a+"="+encodeURIComponent(b));isCorsSupported||(e="https://mightytext.net/proxy-in-root.php?route=updateUserSettings",d="&wagdaedunn="+ckSharedGlobal,d+="&"+a+"="+encodeURIComponent(b));$.ajax({url:e,global:!1,xhrFields:{withCredentials:!0},type:"POST",data:d,dataType:"json",success:function(a){c&&
("success"==a.usersettings?document.getElementById("msg").innerHTML="Settings saved.":document.getElementById("msg").innerHTML="Error updating setting.",_16b76b4933e63abc71ffe68ca6fac0cbec813b76b1157ca063ecdb8429831f299edceece940de6f1("USER_UPDATED_SETTINGS_IN_WEBAPP:"))}})}
function _553907efc706b15dd9681b1de03ac75a4c81dc867ca5c1edae70bd04778dc1f5214889325d99cfdc(a){var b=$("#sendbox-main").val();if(a){if(1>b.length)return alert("Message is blank"),$("#sendbox-main").focus(),!1;if(500<b.length)return alert("Message is > 500 Characters long."),!1}return!0}
function _9a51960a1922ca077aebaac423fe805402aa9db327ed317693e1756a01911bc2f521ec689d5e7515(){var a;a='<div id="holder-msg"> <div id="msg" class="user-alert" style=""></div></div><div id="sms-container"><div id="sms-thread-heading" style="float:left;width:100%;z-index:10;padding-bottom:10px;margin-bottom:0px;margin-top:0px;text-align:left;clear:both;border-bottom:1px solid #CCC;background-color:#0099CC;border-radius: 5px 5px 0px 0px;">';a+='<span id="thread-heading-name" style="font-size:22px;padding-left:10px;margin-top:13px;margin-left:5px;color:white;float:left;-webkit-text-stroke: 1px transparent;font-weight:500" class="tk-proxima-nova-condensed"></span>';
a+='<span id="thread-heading-actions" style="float:right;margin-top:5px">';a+='<button id="delete-all-from-sender" style="float:right;font-size:11px;padding:7px" class="negative button" onclick="nothing_placeholder"><span class="trash icon"></span> Delete all</button>';a+='<button id="remote-phone-dial" style="float:right;font-size:13px;margin-left:10px;padding-left:5px" class="positive" onclick="_303f50b7ea0f82c700a8d3061eef800eaeebfaef05c059570f32bd7b35cbb165072162cda319f63a(\'send_sms\',\'test-SMS from stub\',111111,11111,\'_a14750179f4f06b4cbe8f1fd53d87ed980b1815507360b3f73439a15d8c4179d92a6aed0bf89368b\');"> <img height=14 width=14 style="margin-right:10px" src="phone_call_icon.png">Dial from Phone</button>';
a+='<span style="float:left;color:white;font-size:12px;margin-left:10px;margin-top:7px;margin-right:10px;padding-left:5px"><input type="checkbox" name="show-calls-toggle" value="x" id="toggle-calls" checked onclick="$(\'.calling-line-item\').toggle();"/>Show Calls</span>';a+="</span></div>";a+='<div id="sms-thread-content" class="text-message-list"></div>';a+='<div id="inputsms-main">';a+='<textarea id="sendbox-main" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-inputsms-main\').innerHTML=\'\';" style="float:left;margin-left:10px;width:60%;max-width:60%;height:50px;max-height:90%;border:1px solid #CCC;padding:5px;font-size:16px"></textarea>';
a+='<span style="margin-top:160px"></span>';a+='<span id="holder-adjacent-sendbox" style="float:left"><button id="send-button-main" style="float:left;font-size:13px;margin-left:10px" class="positive" onclick=""> <span class="mail icon"></span>Send</button>';a+='<span id="charsLeft-main" style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;margin-left:10px;margin-top:10px;clear:both;float:left"> </span>';a+="</span>";a+=_94760acfbdb6980a7915e5b00cc083ef5ae9f8ce15d502e21f4bb40c350219bdf17a48d9f447af55();
a+='<div id="error-text-content-inputsms-main" style="font-weight:bold;color:red;font-size:14px"></div>';a+="</div>";a+="</div>";document.getElementById("main-section").innerHTML=a;$("#sendbox-main").NobleCount("#charsLeft-main")}function _4c480e5dc571eeae077d07a26a190cea15cd40dcb889d887724539d70b3471b2951dc6d5a82be418(a){$(a).toggleClass("pressed")}function _c4a0fa0b7aa757dd037055d42337ccf42cc80a43e9aa8c23a339224b25945aa9e99f09f578bdd483(a,b,c){b=$(b).val().length;a-=b;$(c).text(a)}
function _94760acfbdb6980a7915e5b00cc083ef5ae9f8ce15d502e21f4bb40c350219bdf17a48d9f447af55(){var a;a='<button id="upload-image-mms" style="float:left;font-size:11px;margin-left:10px" class="positive" onclick="_ca2655d38369cf886493708143a8e88cee9f1f163b35b66e67f3cbd1adfac9cd41d5a7df835a6921();"><img height=14 width=14 src="attach-mms-icon.png">MMS</button><div id="holder-mms-image-preview" style="height:60px;max-width: 160px;overflow: auto;border: 1px dashed lightgray;">';a+='<img id="mms-image-preview" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';
a+="</div>";a+='<span id="mms-blob-id-holder" style="display:none"></span>';return a+='<div id="mms-upload-dialog" style="display:none;text-align:left"></div>'}
function _769ba8d186ab7ccb39849e3b34751fd665ad6a602262b29b0cc33c64b49508a2c98aec7ccc60c51d(){$("#mms-upload-dialog").empty();var a;a='<form id="frmUpload" style="font-size:20px" method="POST" target="upload_target" enctype="multipart/form-data"> <input id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="104" type="hidden" /><input id="mms-file-attach" type="file" name="myFile" onchange="_7012ccaf04fac80937f80b4a1c3b983e07614fb75708a4477f9c566f4320a6bfcc2e330cdc52144f();"  style="font-size:14px;font-family:arial"/><input type="submit" id="btnSubmit" style="display:none" value="Upload file"/></form>';a+=
'<br><img id="file-upload-progress-indicator" style="display:none" src="upload-progress-pie.gif">';a+='<div id="mms-upload-image-preview-pane" style="height:100px">';a+='<img id="file-just-uploaded" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';a+='<span id="file-uploaded-temp-blobid-holder-in-dialog" style="display:none"></span>';a+="</div>";$("#mms-upload-dialog").html(a)}
function _a22bfbacfff53f38ba5b08cc2bc5e9e047526d67cf3d70e757637e1deede559229992c56d31f5586(){_769ba8d186ab7ccb39849e3b34751fd665ad6a602262b29b0cc33c64b49508a2c98aec7ccc60c51d();$("#mms-upload-dialog").dialog({open:function(){$("#mms-dialog-button-ok").attr("disabled",!0);$("#mms-dialog-button-ok").css("color","#BFBFBF");$("#mms-dialog-button-ok").removeClass("hover")},width:400,modal:!0,title:"Attach a Picture (MMS)",buttons:[{text:"OK",id:"mms-dialog-button-ok",click:function(){$("#mms-blob-id-holder").text($("#file-uploaded-temp-blobid-holder-in-dialog").text());
var a=$("#file-just-uploaded").attr("src");$("#mms-image-preview").show();$("#mms-image-preview").attr("src",a);$(this).dialog("close")}},{text:"Cancel",id:"mms-dialog-button-cancel",click:function(){$("#mms-upload-dialog").empty();$("#mms-blob-id-holder").text("");$(this).dialog("close")}}]})}
function _4e6f496917e30c8fd00de5a031d9ac06f44f95f85406d2fadcaebb1de3b3ad3a48ffe2a939f7a2c1(a){var b,c=baseUrl;new easyXDM.Rpc({remote:c+"/itest2.htm",swf:c+"/../easyxdm.swf",onReady:function(){var c=document.getElementById("mms-upload-dialog"),e=document.getElementById("frmUpload");e.action=a;e.style.display="block";c.style.display="block";b=document.getElementById("btnSubmit");e.onsubmit=function(){b.disabled="disabled";$("#file-upload-progress-indicator").show()}}},{local:{returnUploadResponse:function(a){b.disabled=
null;"success"!=a.status?alert("Error uploading attachment."):($("#mms-dialog-button-ok").attr("disabled",!1),$("#mms-dialog-button-ok").css("color","green"),$("#file-upload-progress-indicator").hide(),$("#file-just-uploaded").attr("src",baseUrl+"/imageserve?function=viewFile&blob-key="+a.blobID),$("#file-just-uploaded").show(),$("#file-uploaded-temp-blobid-holder-in-dialog").text(a.blobID))}}})}
function _7012ccaf04fac80937f80b4a1c3b983e07614fb75708a4477f9c566f4320a6bfcc2e330cdc52144f(){"undefined"!==typeof FileReader&&2097152<$("#mms-file-attach")[0].files[0].fileSize?alert("File too large. File upload limit is 2MB"):$("#frmUpload").submit()}var globalSettingsJSONUponLoad,objNewSettings;
function _ba0e7b411b939911cd32120c19890eb9abca8f0355b95026228656693385d9af9f9c55ba61f29836(a){_gaq.push(["_trackEvent","WebApp","Settings-Pane-Load","",1]);document.getElementById("msg").innerHTML="";$("#sms-container").unblock();$("#sms-container").css("height","90%");document.getElementById("sms-container").innerHTML="";document.getElementById("sms-container").innerHTML='<h2 style="padding:10px;padding-bottom:0px;margin:0;text-align:left"><B>Settings</B></h2><div id="settingsPane" style="color:#333;padding:10px;text-align:left;background-color:white;margin-top:5px;height:90%;overflow-y:scroll"></div>';
document.getElementById("settingsPane").innerHTML+='<div id="numDaysKeepMessagesSelection" class="options-section" style="margin-top:0px"><strong>How Long to Keep Messages</strong>: How long should MightyText keep a copy of SMS, MMS, Call Logs<br><br> <select id="setting_num_days_keep" name="num_days_keep" onchange="_0c94e38fee81d00731544c94239efd1f9bbbbcfd036c9e9fb4f133ed6c1ef70bfe8ddf4d476bf427(this.name,this.value,true);"><option value="1">1 day</option><option value="14">14 days</option><option value="30">30 days</option><option value="60">60 days</option><option value="180">6 months</option></select></div>';
$('#setting_num_days_keep option[value="'+a.num_days_keep+'"]').attr("selected","selected");if(a.settings_list)if(objNewSettings=jQuery.parseJSON(a.settings_list.value),void 0==objNewSettings||void 0==objNewSettings.enter_to_send)objNewSettings.enter_to_send=1,_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222("enter_to_send",1);else{document.getElementById("settingsPane").innerHTML+='<div id="shouldEnterSendMessage" class="options-section"><strong>Pressing Enter to send message (when typing message)</strong><br><br> <input type="radio" name="enter_to_send" value="1" onclick="_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(this.name,this.value);">Yes, pressing Enter sends message <span style="font-size:11px;color:green">&nbsp (Can use Shift-Enter for new line)</span><br> <input type="radio" name="enter_to_send" value="0" onclick="_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(this.name,this.value);">No, pressing Enter will not send message</div>';
a='[value="'+objNewSettings.enter_to_send+'"]';$("input:radio[name=enter_to_send]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_toggle_on_off)objNewSettings.notif_toggle_on_off=1,_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222("notif_toggle_on_off",1);document.getElementById("settingsPane").innerHTML+='<div id="notificationToggleOnOff" class="options-section"><strong>Popup Notifications</strong>: Display a Popup  on Incoming SMS, MMS, Calls<br><br> <input type="radio" name="notif_toggle_on_off" value="1" onclick="_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(this.name,this.value);">Popup Notifications ON <br> <input type="radio" name="notif_toggle_on_off" value="0" onclick="_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(this.name,this.value);">Popup Notifications OFF<br></div>';
a='[value="'+objNewSettings.notif_toggle_on_off+'"]';$("input:radio[name=notif_toggle_on_off]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_dismiss_time)objNewSettings.notif_dismiss_time=9999,_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222("notif_dismiss_time",9999);document.getElementById("settingsPane").innerHTML+='<div id="notifDismiss" class="options-section"><strong>Popup Notification Auto-Close</strong>: If &amp when to automatically close Popup Notifications<br><span style="font-size:11px;color:green">(Chrome Extension & Firefox-PC only)<a onclick="_f4aa168bc42f0bcaec956a9c91b6c482eafe5a7426ef44254c3cee20c078e2daedd633e78ddbffe2();"> <U>Learn more</U></a></span><br><br> <select id="setting_notif_dismiss" name="notif_dismiss_time" onchange="_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(this.name,this.value);"><option value="9999">Do Not Auto-Close</option><option value="10">After 10 seconds</option><option value="30">After 30 seconds</option><option value="60">After 1 minute</option><option value="300">After 5 minutes</option></select></div>';
$('#setting_notif_dismiss option[value="'+objNewSettings.notif_dismiss_time+'"]').attr("selected","selected");if(void 0==objNewSettings||void 0==objNewSettings.notif_content)objNewSettings.notif_content=2,_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222("notif_content",2);document.getElementById("settingsPane").innerHTML+='<div id="notificationLevelSelection" class="options-section"><strong>Popup Notification Privacy</strong>: When a new text message arrives, what to show in the popup.<br><br> <input type="radio" name="notif_content" value="2" onclick="_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(this.name,this.value);">Sender Name &amp Message Text ("<B>Message from Bob:</B> Running 15 minutes late") <br> <input type="radio" name="notif_content" value="1" onclick="_83e1e98823db99e11d84779b2187028ab998cae5464f9d1621f0799f4c4b7a2e884b21e4be81d222(this.name,this.value);">Only Sender Name ("<B>Message from Bob:</B> Click to see message...")</div>';
a='[value="'+objNewSettings.notif_content+'"]';$("input:radio[name=notif_content]").filter(a).attr("checked",!0);document.getElementById("settingsPane").innerHTML+='<div id="adminTools" class="options-section"><strong>Misc</strong><br><br>';document.getElementById("adminTools").innerHTML+='<button onclick="_53a4fb9f47ea6247f3038e18d86b7e5c42da96551ac3754e1c8b27a6a3faa56e02b9b124a2984e1b();">Send a test SMS (to USA #)</button>';void 0==current_server_stored_google_contacts_token?document.getElementById("adminTools").innerHTML+=
"<button onclick=\"window.location='"+newContactsOAuthURL+"';\">Link Google Contacts</button><br>":document.getElementById("adminTools").innerHTML+='<button onclick="_3cacfd9c7fb9cb4cb9e97f95107e5e56bf020c5d9616f11e2927ed20496cfe9d074f7bd06962bf34();">Unlink from Google Contacts</button><br>';document.getElementById("adminTools").innerHTML+="<button onclick=\"_a4f23c8057530c1af73ed120ef7e7f2d469899dcce50b60c685ba31a1d359a5c68bce9c521fcded2('push_phone_contacts_to_cloud','na');\">Refresh Contacts from Phone</button>";
document.getElementById("adminTools").innerHTML+='<button onclick="_938e6c096a2ae503562c2881f6926259f0a5684bcc1036865b4a7190ad67eeaac47fa5a2e92967dc();">Clear local Contact Name Cache</button>';document.getElementById("settingsPane").innerHTML+="</div>"}else objNewSettings=jQuery.parseJSON("{}"),_0c94e38fee81d00731544c94239efd1f9bbbbcfd036c9e9fb4f133ed6c1ef70bfe8ddf4d476bf427("settings_list",'{"enter_to_send":1,"notif_content":2}',!1)}
function _938e6c096a2ae503562c2881f6926259f0a5684bcc1036865b4a7190ad67eeaac47fa5a2e92967dc(){var a=$.jStorage.index();console.log(a);$.jStorage.flush()}
function _f4aa168bc42f0bcaec956a9c91b6c482eafe5a7426ef44254c3cee20c078e2daedd633e78ddbffe2(){alert("This setting will only work if running the Chrome Extension(PC or Mac), or using Firefox on a PC.  \n\n It won't work for Firefox-Mac users using Growl as the notification dismiss timeout is set within Growl.\n\nSafari & Internet Explorer users: We plan to have a notifications feature soon.")}
function _01973b5d0ae4eac9e2368e2cfc8879dc44803f21913e69adfe73437695192a91449baa72d626b3dd(a){null==window.localStorage?_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Local storage is required!"):(a=a.value,3==a?window.localStorage.notifLevel=3:2==a?window.localStorage.notifLevel=2:1==a&&(window.localStorage.notifLevel=1),document.getElementById("msg").innerHTML="Updated Notification Preference")}
function _7688851dc0ba15da8ed5c52a69169f10971ed3d140f7c01f4189510031adccd9c604a128adaf9b00(){$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:null,max_chars:500,block_negative:!0,cloak:!1,in_dom:!1}}
function _e3f85a2122bd8083fd9dcb07b6f074e8f5f6c55582a50612a57ad5c00b0df9bafbcd379d25c6fbda(a){null==window.localStorage?_b58ec35652e6191d3e2e32f540192ee3c92a528c200d6bb341711532c638b475e536b0205ce17f63("Local storage is required!"):(a=a.value,1==a?window.localStorage.overridePrefix=1:0==a&&(window.localStorage.overridePrefix=0),document.getElementById("msg").innerHTML="Updated +1 Override Setting",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _b15c73420de4ac5e58523d742e261f5541ca3b01e2154fea5da2dd0d1732ff30931723c2973003a0(a,b,c){a=document.getElementById(a);b=document.getElementById(b);a.value.length>c?a.value=a.value.substring(0,c):b.value=c-a.value.length}
function _eca5bf34fd1ec49d77d90ee37acbcabd902dc29471f540daf738af919f59a66b51bf703f581a25de(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);b='<table class="'+b+'">';if(c){b+="<thead><tr>";for(var d in a[0])b+='<th scope="col">'+d+"</th>";b+="</tr></thead>"}b+="<tbody>";for(c=0;c<a.length;c++){b+=0==c%2?'<tr class="alt">':"<tr>";for(d in a[c])b+="<td>"+a[c][d]+"</td>";b+="</tr>"}return b+="</tbody></table>"}
function _0b55953637700a4d2d18e0498b446b8f5f15e3cdab874467a7d1ff5fc71a4ade87dc0e098b458aae(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);a=JSON.parse(a);b='<table class="'+b+'"><tbody>';for(var d=0;d<a.length;d++){var e=0,g;for(g in a[d])b+=0==e%2?'<tr class="alt">':"<tr>",c&&(b+='<th scope="row">'+g+"</th>"),b+="<td>"+a[d][g]+"</td>",b+="</tr>",e++}b+="</tbody>";return b+="</table>"}
function _0aed7e36480f2c616ba3ee504c8ce655880e84bc9183e5fc0d52c3ba5350b7761e9c65c1642af476(){setTimeout("_dce113470338e29b5bf61aa961c5430e657106563fef218db5a6506e83a6e3a126c3f5c924c00208();",5E3)}function _dce113470338e29b5bf61aa961c5430e657106563fef218db5a6506e83a6e3a126c3f5c924c00208(){$.titleAlert("New SMS Received!",{requireBlur:!1,stopOnFocus:!0,duration:3E4,interval:1500})}
function _ffecaf8d79c8d3ae2fc2edcc5072aa7e6260617a87f0b4a6c95c0329cafdc800702c5ae3a6bc2e4b(a){return a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a target='_blank' href='$1'>$1</a>")}function _455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75DisplayPurposesOnlyTimeNoDay(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("h:mm a")}
function _455446dc310cf6f191d56fecd855c8a29aff787dd7f815a6786bb28c7b8b087f91aced6cc6642b75DisplayPurposes(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("MMM DD h:mm a")}function _f1a310a4b9d474598e014ad7a0076ea3203ee936a9537b165baca909c5209a0a224e5fa18614018f(){$.ajax({url:"https://textyserver.appspot.com/test?function=test500",global:!1,type:"POST",xhrFields:{withCredentials:!0},statusCode:{500:function(){alert("Error 500")}},success:function(a,b,c){alert(a);console.log(a)}})}
var ckSharedGlobal="";function _995e75919884158cc653a8bff140b3d8d9b7f890f26584ac447dfb264e44db699d42f44114e5978a(a){ckSharedGlobal=a}function _1f4b6d018960f8767e617c7341bdec70bf21437196ea9cb66f9264bd631e527bea5eb6c15d1d2325(){$.ajax({url:baseUrl+"/test?function=showstuff",global:!1,type:"GET",timeout:8E3,dataType:"json",xhrFields:{withCredentials:!0},error:function(a,b,c){},success:function(a,b,c){}})}isCorsSupported||_1f4b6d018960f8767e617c7341bdec70bf21437196ea9cb66f9264bd631e527bea5eb6c15d1d2325();
function _fcb1cd7c99bfca9bdfa9190ae796acc20e2caf0ece9521580b5fc046ae146389029ad3fad19fc488(a,b,c){var d=new Date;d.setDate(d.getDate()+c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}function _fcb1cd7c99bfca9bdfa9190ae796acc20e2caf0ece9521580b5fc046ae146389029ad3fad19fc488InSeconds(a,b,c){var d=new Date;d.setTime((new Date).getTime()+1E3*c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}
function _9cc16d3a1a6b4d49d188c496af0bfae003eb4d3513d43abba7e847de8b8c4b6251de945e385fe2be(){return"withCredentials"in new XMLHttpRequest?!0:!1}function _abcaa559d8efc88aee85bbf489134bd3053d9b0bf145850b9dfdbca9d497da0b5364ff4674c37b69(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}
function _966b5bd5644bd890302d479d23861d893313f33db94d51452e8ceceabaf9b56360859d6e32cde09b(){return $.ajax({type:"GET",url:"https://www.googleapis.com/plus/v1/people/me?pp=1&key=testwgda",cache:!1,jsonpCallback:"testConnection",dataType:"jsonp",success:function(a){console.log("Network ping to FB -- fine...");return!0},error:function(a){alert(1);return!1}})}
function _1a4db582a816b03adcb7b010618f57a40992c4a7eb45e4316fc684f12a5036a4f022e296495f7995(){var a=new XMLHttpRequest;a.overrideMimeType("text/plain; charset=x-user-defined");a.open("GET","http://jonathanleighton.com/images/me.jpg",!1);a.send(null);for(var b="",c=0;c<a.responseText.length;c++)b+=String.fromCharCode(a.responseText.charCodeAt(c)&255);a="data:image/jpeg;base64,"+window.btoa(b);$("#mtlogo").attr("src",a)}
function _16b76b4933e63abc71ffe68ca6fac0cbec813b76b1157ca063ecdb8429831f299edceece940de6f1(a){console.log(" ");console.log("------------------------------------------------ Sending CAPI Test Message from WebApp -----------------------------------");body_text_to_send=a+" ---- "+Date();$.ajax({url:baseUrl+"/test?function=capi&body="+body_text_to_send+"&phone_num=555555555",global:!1,type:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(a){console.log(a);-1!=a.search("user not logged in")?
console.log("User is not logged in to MightyText -- found out during CAPI time check"):-1!=a.search("CAPI test sent successfully")&&console.log("Successfully SENT CAPI test message from WebAPP")}})};
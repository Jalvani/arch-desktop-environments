var debug_mode=0;void 0===window.localStorage.debugLevel&&(console.log("Debug Level Not Stored Yet, setting to 0 as default"),window.localStorage.debugLevel=0);debug_mode=window.localStorage.debugLevel;console.log("in POPUP page - Debug Mode from Local Storage is: "+debug_mode);void 0===window.localStorage.notifLevel&&(console.log("Notif Pref Level Not Stored Yet, setting to 3 [verbose] as default"),window.localStorage.notifLevel=3);
void 0===window.localStorage.overridePrefix&&(console.log("Override Prefix Setting Not Stored Yet in Local Storage, setting to 1 as default"),window.localStorage.overridePrefix=1);void 0===window.localStorage.autoCloseLevel&&(console.log("Auto Close Window on Reply - -Setting Not Stored Yet in Local Storage, setting to 1 as default"),window.localStorage.autoCloseLevel=1);
function _d6dbb77a4036e0fc337667f1937be7f572e47b956df6e9901232154d96b9c976075be61623f2913b(a,c){contacts=[];for(var d=JSON.parse(a),e=0,b;b=d.feed.entry[e];e++){var g={name:b.title.$t,id:b.id.$t,emails:[],phonenums:[]};if(b.gd$email)for(var f=b.gd$email,n=0,l;l=f[n];n++)g.emails.push(l.address);g.name||(g.name=g.emails[0]||"<Unknown>");if(b.gd$phoneNumber)for(f=b.gd$phoneNumber,n=0;l=f[n];n++)g.phonenums.push(l.$t);b.gd$phoneNumber&&contacts.push(g)}_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf()}
function _fb8349e02df0524118dfa40dd7bc444597748f6db17a9f9c5d687819fea00580543b4bcba5882b13(){document.getElementById("resultholder").innerHTML=resultdivclean}
function _655192d5d31f0882aed9f26d1af1d96f675a6f505fbdc8ab88676c89b2762cdda82d60d30a615164(){for(var a=document.getElementById("resultholder"),c=0,d;d=contacts[c];c++){var e=document.createElement("div"),b=document.createElement("p"),g=document.createElement("ul");b.innerText=c+" - "+d.name+" - "+d.phonenums[0]+" - "+d.phonenums[1]+" - "+_f9e48bde6455505d307dd76343e2400b2191c68547550ab77c8109a198985807ecb0f3750c3fad48(d.phonenums[0]);e.appendChild(b);for(var b=0,f;f=d.emails[b];b++){var n=document.createElement("li");
n.innerText=f;g.appendChild(n)}a.appendChild(e)}}var textcontent="STARTING_TEXT_MSG",selected_tab=0,sign_in_state=0,google_login_status=!1,login_and_beta_ready=!1,google_username_currently_logged_in="",extra_login_status_info="",most_recent_text_sent_status=0,smsarray=[];console.log(11111);
function _7a3d21f15774778596c9356754972f92cd9ebe9a84d60e2c6b3ee94866d309920641bda9dbe8f52f(){dest_num="+14158684689";_418e65c7f1f62262b60dc739346bd800704e080573b441869d64f4376dbc9e23a7de0a2e344999a9("Test SMS from MightyText",999)}
function _2fb999eaaa0d765b16c5715e2163b7fb772a5c3678ab44e2518c62ffc04ad044f4a07f1369a59523(a,c,d){"send-one-text"==a?_gaq.push(["_trackEvent","Popup","Send-SMS-Click","Single-Compose",1]):0<which_phone_num_from_hash_tag_in_url.length?_gaq.push(["_trackEvent","Popup","Send-SMS-Click","Inline-Reply-Single-Notif-Response",1]):_gaq.push(["_trackEvent","Popup","Send-SMS-Click","Inline-Reply-InApp-Tab",1]);most_recent_text_sent_status=0;var e=document.getElementById(a).value,b="error-text-content-"+d,g=
/\d/;""==e||0==e.indexOf("\n")?(document.getElementById(a).value="",document.getElementById(b).innerHTML="Text Message is Blank! "):!1==g.test(c)?document.getElementById(b).innerHTML="'Send To'  must contain a number.":(document.getElementById(a).focus(),dest_num=c,_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Destination Phone Num is: "+dest_num),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Target Num from  is: "+c),320<e.length?
document.getElementById(b).innerHTML="Text Message is too long. "+e.length+" (max is 320)":160<e.length?(_510ea79336983a2cb9146282a8671b7d76a79ba994ea7db71daea81d8b156eff10e4e1621414ebfe(a,c,d,e.substring(0,160)),_510ea79336983a2cb9146282a8671b7d76a79ba994ea7db71daea81d8b156eff10e4e1621414ebfe(a,c,d,e.substring(160,319))):_510ea79336983a2cb9146282a8671b7d76a79ba994ea7db71daea81d8b156eff10e4e1621414ebfe(a,c,d,e))}
function _510ea79336983a2cb9146282a8671b7d76a79ba994ea7db71daea81d8b156eff10e4e1621414ebfe(a,c,d,e){document.getElementById(a).value="";db.transaction(function(a){var g=Math.floor(1E10*Math.random())+"A",f=new Date,f=_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594(f);console.log("textreplycontent RIGHT BEFORE SQL Insert is: "+e);a.executeSql("INSERT INTO Messages (googleusername,msgid,time_client,time_server,from_phone_num,body,type,status,source) VALUES (?,?,?,?,?,?,?,?,?)",
[google_username_currently_logged_in,g,f,f,c,e,1,-99,2],function(a,b){just_added_msg_id=g;_418e65c7f1f62262b60dc739346bd800704e080573b441869d64f4376dbc9e23a7de0a2e344999a9(e,just_added_msg_id);var c=d+"-texts",m="";80>e.length&&(m='style="display:inline;line-height: 35px"');_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("This send box  is: "+c);document.getElementById(c).innerHTML+='<li id="sms-line-item-msgid-'+just_added_msg_id+'" class="sms-line-item sms-reply" style="mmargin-left:20px"><span class="sms-body" '+
m+">"+e+'</span>  <span class="sms-time">'+_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(f)+'</span>  <span id="send-status-msgid-'+just_added_msg_id+'" class="outbound-state-info" style="color:maroon;font-size:10px"> Sending Request to Phone... </span> <img id="send-in-progress-image-animation-msgid-'+just_added_msg_id+'" src="loading_icon_transparent.gif" style="width:24px;height:24px"> <span class="message-action-links"><img id="red-close-button-for-msgid-'+
just_added_msg_id+'" src="red-close-x.png" class="HoverBorder" style="display:none" align="middle" height="11" width="11" onclick="_86d4e525dd4757c1296c69074eb2d3102a643184de8627f75ba1abcfafd00a0e75ad189105cfdc21(\''+just_added_msg_id+"')\"> </span> </li>";document.getElementById("sms-line-item-msgid-"+just_added_msg_id).style.backgroundColor="#EAEAEA";c="#"+c;$(c).scrollTop(2E4+$(c).height())},_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function OLD_moved_to_texty_dot__3e9acece6ab0174ac6006c5b42fe2f0ce3ffbe9c714cfdefa9e9680dd87c852e4df3e3401c54b4a0(a,c){db.transaction(function(d){d.executeSql("INSERT INTO LocalGoogleContacts (googleusername,phone_num,contact_name) VALUES (?,?,?)",[google_username_currently_logged_in,a,c],function(a,b){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Added  Contact to local SQL: ' + contact_name_to_insert")},_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function _418e65c7f1f62262b60dc739346bd800704e080573b441869d64f4376dbc9e23a7de0a2e344999a9(a,c){_c756eab9ce592e40f8804fc303e9ce6bfd66d5b7ae894a77d383b8377c090b8fe01ed4197ec10d97("send_sms",a,c,_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9)}
function _501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9(a,c,d){$("#msg").css("visibility","visible");a==STATUS_SUCCESS?(_2f4fe4fff3a7f353327c8ec864017880aa1c657674c6ac383640e9a7349741580ee1284e8c9f7e59(),document.getElementById("msg").innerHTML="Request sent to phone.. SMS to "+dest_num,_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Attempting to Mark Local Record SENT..."),_60dc2da5d58a9cadc7f3cfc78f07f5a13edd71053d848f02fa72e73d0f77e17dc9399d7fc6317144(c),
_7b4d897ae37afde461ed35645225c0a757dfd05d46c873dad53583d469421b0a984f81fb70acd411(),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Sent C2DM message, make quick polling now to check for ACK.... decrease polling frequency")):a==STATUS_LOGIN_REQUIRED?(a='<a href="#" onclick="chrome.tabs.create({url: \''+signInUrl+"'})\">"+chrome.i18n.getMessage("sign_in_message")+"</a>",document.getElementById("msg").innerHTML=chrome.i18n.getMessage("sign_in_required_message",a)):
a==STATUS_DEVICE_NOT_REGISTERED?(document.getElementById("msg").innerHTML=chrome.i18n.getMessage("device_not_registered_message"),_gaq.push(["_trackEvent","Popup","ERROR-C2DM","DEVICE-NOT-REGISTERED",1])):(document.getElementById("msg").innerHTML=chrome.i18n.getMessage("error_sending_message",d.responseText),_gaq.push(["_trackEvent","Popup","ERROR-C2DM",d.responseText,1]))}
function _7b4d897ae37afde461ed35645225c0a757dfd05d46c873dad53583d469421b0a984f81fb70acd411(){_2e7317b060ef68743b71d6ebad284f51273510a24242167bf9a241fd0c6b6dc31f4870d353c48b65(!0);var a=document.getElementById("signout");a.innerHTML="Sign Out";a.style.color="blue";a.onclick=function(){chrome.tabs.create({url:signOutUrl})}}function _da88035b7f2cd0463745c827b615282e7068adbfb81bd003da4827aa8afe573051b906ab1aa1204a(a){document.getElementById("signout").style.visibility=a}
function _5a2c3dc53f1708a967560f343357e11afe3c1f2b981d546da95929317628c3de6f3ad1ed0f942e3a(a){for(var c=(new Date).getTime(),d=0;1E7>d&&!((new Date).getTime()-c>a);d++);}
function _2dcc3820e64b3d1a7866b22935c695fd6aa3980a7ede4702bce695e60ca0e77f7884549c390d0dd3(){document.getElementById("msg").innerHTML="";document.getElementById("top-notif-bar").innerHTML="";document.getElementById("results").innerHTML='<span id="refresh-indicator"><img src="ajax-spinner-green.gif" style="margin-left:20px"><span>'}
function _d8c9d6ff3591a7af238e434aba3c41d97becabb42c8d6f46dab93ea4e5a6e7dc5d0f5dd4ecc829e8(){document.getElementById("fb-like-button").innerHTML='<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FTexty%2F156773284381924&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font&amp;colorscheme=dark&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:85px; height:21px;" allowTransparency="true"></iframe>'}
function _d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf(a){db||(db=openDatabase("Texty","1.0","Texty-SMS",2E5));_dc216f727b50f44be5cabfa8693d2f83e615d6847d388f3f6eba94948f963ca71b354036386717d6();_27e52d5b34cd3db63d3bfe61f718321dc1055b7de7df733cbacaabbd29e7806c1bbdb30ea8164b63();_b3ee9129c586b0ef0397d5e33496f2d58992cc3c068e400fdc8b5c8a96245faaf087b670cd088c24();_gaq.push(["_trackEvent","Popup","Refresh-Page","",1]);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("In Full Refresh -- Current google_login_status is "+
google_login_status);_8bed17d1b8f45d79b13a5ec265ed2830b981cbad582349ae8b07260c1067fc3168572b67af86706f();selected_tab=$("#results").tabs("option","selected");void 0!=selected_tab.length&&(selected_tab=0);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("SMSarray count is "+smsarray.length);void 0!=a&&(document.getElementById("msg").innerHTML=a,$("#msg").css("visibility","visible"),$("#msg").fadeOut(4E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _f9d6ae78da9bfce16eb910d614c5aa3a5844dd4f32eaf788b718d56c5ff719754d4a97f114936689(){console.log("in _f9d6ae78da9bfce16eb910d614c5aa3a5844dd4f32eaf788b718d56c5ff719754d4a97f114936689");0<smsarray.length?console.log("setviewportarea"):(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Zero Messages in Local store retrieved...show quick note to user telling them..."),document.getElementById("results").innerHTML='<span style="font-size:14px;color:blue"><B><br>Currently no text messages. Hit Compose New to send a new Text Message</B></span>')}
function _8d3ed00f7add123c51dfc19dab0c05cf5e05031740bbdc9dbc9b1963b083ef798b1128447d750992(a,c,d){document.getElementById(a).style.visibility=c;document.getElementById(a).style.height=d}
function _12cb3e46b90bb7f134aa525746cf143333af3270c65b79a71ffdd196d7fe6f821126e9c77d881dd7(){google_login_status&&login_and_beta_ready?(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("about to call BG function to get google contacts info..."),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Getting LATEST GOOGLE CONTACTS from BACKGROUND PAGE..."),chrome.extension.sendRequest({greeting:"call_from_popup_to_check_contact_info"},function(a){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Google Contacts Token status per the BG page is: "+
a.google_contacts_token_status);"ACTIVE_GOOGLE_CONTACTS_TOKEN_STORED_LOCALLY"==a.google_contacts_token_status?(null==a.farewell?_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("There was an active token, but no Google Contacts in BG page (array is null)"):(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Getting LATEST GOOGLE CONTACTS from BACKGROUND PAGE..."+a.farewell.length+" contacts in array..."),contacts=a.farewell),null!=a.autocomplete_contacts_list&&
(autocomplete_contacts=a.autocomplete_contacts_list)):(0<document.getElementById("top-notif-bar").innerHTML.length&&(document.getElementById("top-notif-bar").innerHTML+="<br>"),document.getElementById("top-notif-bar").innerHTML+='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:red"> Contacts not synced.</span>  <a href="#" onclick="window.close();_1ef7e1c373783603cff42be6e66512ea69e219f89a50c8a873a65b2b15d3b8d52b9dd9de0559916a();"> Sync MightyText with your Google Contacts</a> to see names <span style="font-size:10px"></span>');
console.log("*** about to call Traverse ***");REFACTOR__b76ab6b46e566dc6a81b92c3d7d74f9ad546706c326ebca10f7d586cf0cc96fe960636824b717d45()})):_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("while in contacts retrieval, found out user not logged in or beta ready, so break out...")}
function _27e52d5b34cd3db63d3bfe61f718321dc1055b7de7df733cbacaabbd29e7806c1bbdb30ea8164b63(){smsarray=_969f82a7c88c5f8cfba91edcdb635465254e70956885836de9ca277349a6805333531d10328c13c8()}function _900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0(a,c){log.innerHTML+="<p>"+c.message+"</p>"}
function _969f82a7c88c5f8cfba91edcdb635465254e70956885836de9ca277349a6805333531d10328c13c8(){var a=[],c="SELECT *,substr(replace(replace(from_phone_num,' ',''),'-',''),-7) AS right_digits_phone_num FROM (SELECT * FROM Messages ORDER BY id DESC LIMIT 0,600) ORDER BY right_digits_phone_num,time_client";0<which_phone_num_from_hash_tag_in_url.length&&(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(which_phone_num_from_hash_tag_in_url),c="SELECT *,substr(replace(replace(from_phone_num,' ',''),'-',''),-7) AS right_digits_phone_num FROM Messages WHERE right_digits_phone_num=substr(replace(replace('"+
which_phone_num_from_hash_tag_in_url+"',' ',''),'-',''),-7) ORDER BY right_digits_phone_num,time_client");db.transaction(function(d){d.executeSql(c,[],function(c,b){for(var d=0,f=null;d<b.rows.length;d++)f=b.rows.item(d),a[d]=f,text_message_array[d]=f})});return a}
function _4297b2020e46c3a94d1996bc597e4b3c416ac81dce2e7878669385a17d449bb312b981f0fd05e607(a){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Checking if SMS completed full cycle yet from cloud...for msgid: "+a);db.transaction(function(c){c.executeSql("SELECT * FROM Messages WHERE msgid=?",[a],function(a,c){status_of_just_sent_message=c.rows.item(0).status;_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("status of this msg NOW is: "+
status_of_just_sent_message)})})}function _488066f8bbfc5a9cdb1b7763b3f31d4e98595e6d9d2ce512a1528e8cfb83bd7903bc30842af0224c(a,c){db.transaction(function(d){d.executeSql("UPDATE Messages SET googleusername = ? WHERE id = ?",[c.innerHTML,a],null,_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function _86d4e525dd4757c1296c69074eb2d3102a643184de8627f75ba1abcfafd00a0e75ad189105cfdc21(a){db.transaction(function(c){c.executeSql("DELETE FROM Messages WHERE msgid=?",[a],function(a,c){_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf("Deleted message. (on Chrome only)")},_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function _2d789a4b680ee04a085080c592c7e728a3502889b2237af3cbdeb4cbaa554b478c12d7f6dfbd14d3(a){a="%"+a;_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Deleting all messages from this sender --- DELETE FROM Messages WHERE substr(replace(replace(from_phone_num,' ',''),'-',''),-7) LIKE "+a);db.transaction(function(c){c.executeSql("DELETE FROM Messages WHERE substr(replace(replace(from_phone_num,' ',''),'-',''),-7) LIKE ?",[a],function(a,c){_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf("Deleted all text messages to/from this person (on Chrome only)")},
_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function _ef437df7a3794d1d16cb372fe9ef986e1df9ff4ba25c5379f43115096f0824a94dffe5009df6ee71(a){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("in mark Read function");db.transaction(function(c){c.executeSql("UPDATE Messages SET status=1 WHERE msgid=?",[a],function(a,c){_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf()},_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function _60dc2da5d58a9cadc7f3cfc78f07f5a13edd71053d848f02fa72e73d0f77e17dc9399d7fc6317144(a){console.log("IN ************************* MARK LOCAL RECORD SENT SUCCESSFULLY **********************");_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Attempting SQL Local Record Sent to Cloud Successfully...");db.transaction(function(c){c.executeSql("UPDATE Messages SET status=51 WHERE msgid=? and status=-99",[a],function(c,e){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Successfully updated MSGID "+
a+" from -99 to 51");0<which_phone_num_from_hash_tag_in_url.length&&0!=window.localStorage.autoCloseLevel&&setTimeout("window.close();",1500);document.getElementById("send-status-msgid-"+a).innerHTML+='<B style="color:green">OK</B>...Waiting for phone confirmation...';_4297b2020e46c3a94d1996bc597e4b3c416ac81dce2e7878669385a17d449bb312b981f0fd05e607(a);var b=window.setInterval(function(c){_4297b2020e46c3a94d1996bc597e4b3c416ac81dce2e7878669385a17d449bb312b981f0fd05e607(a);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("global status of last sent message for msgid "+
a+" is: "+status_of_just_sent_message);52==status_of_just_sent_message&&(b=clearInterval(b),document.getElementById("send-status-msgid-"+a).innerHTML+='<B style="color:green">DONE!</B>',document.getElementById("send-in-progress-image-animation-msgid-"+a).style.display="none",document.getElementById("sms-line-item-msgid-"+a).style.backgroundColor="white",_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("status is 52..so..stopping polling"))},500);window.setTimeout(function(a,
c){clearInterval(b)},3E4)},_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}function _546962a08b9a1562b74dede34b758447b37e035c9fdd0e3c4e151b473959788478f42825cab58507(){db.transaction(function(a){a.executeSql("DROP TABLE LocalGoogleContacts",[],function(a){localContactsArray=[];_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf()},_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function _b3716980009ab5a7ed722bd39a35d76f13b647feaa87d618f9895df32b8ece2051e57e1e560abbf5(){db.transaction(function(a){a.executeSql("DROP TABLE Messages",[],function(a){smsarray=[];_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf()},_900be5532bab124f8ee846acf4c0eb84a1a9359e6b6ca6fce3ceae0c3804ce7954530baa32c41df0)})}
function _dc216f727b50f44be5cabfa8693d2f83e615d6847d388f3f6eba94948f963ca71b354036386717d6(){db.transaction(function(a){a.executeSql("SELECT * FROM LocalGoogleContacts",[],function(a,d){for(var e=0,b=null;e<d.rows.length;e++)b=d.rows.item(e),localContactsArray[e]=b},function(a,d){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("FAILED to select from LocalGoogleContacts -- create this table?")})})}
function _bbefc3a36f2b1ccccb4b1ffb2dbfc3efef0d1aef832365ffc0906ff7757c14921b850b2728b7de2f(){_gaq.push(["_trackEvent","Popup","Compose-New-Button-Click","",1]);_8d3ed00f7add123c51dfc19dab0c05cf5e05031740bbdc9dbc9b1963b083ef798b1128447d750992("resultholder","visible","300px");document.getElementById("results").style.background="none";document.getElementById("results").innerHTML='<div id="compose-single-text" style="clear:both;font-size:18px;margin-left:5px">';document.getElementById("compose-single-text").innerHTML+=
'<a href="#" onclick="location.reload(true);" style="font-size:14px;color:green"><B>\u2190 Back to text messages</a></B><br><br>';contact_box_prompt="Start typing a name or number...";document.getElementById("compose-single-text").innerHTML+='<p><B>Send To:</B> <span style="font-size:9px;color:blue">&nbsp&nbsp&nbsp(currently can only send to 1 person at a time)</span></p>';document.getElementById("compose-single-text").innerHTML+='<input id="compose-number" type="text" size=50 name="compose-number" style="color:darkgrey; border:1px solid #CCC;-webkit-border-radius:10px;margin:0px;padding:5px;font-family:arial;font-size:14px" value="'+
contact_box_prompt+"\" onblur=\"if (this.value == '')  {this.style.color='darkgrey';this.value = '"+contact_box_prompt+"';}\" onfocus=\"if (this.value == '"+contact_box_prompt+"') {this.style.color='black';this.value = '';}\"/><br><br>";document.getElementById("compose-single-text").innerHTML+='<p><B>Message:</B></p> <textarea id="send-one-text" value="starting val" onfocus="document.getElementById(\'error-text-content-single-text\').innerHTML=\'\';" style="height:60px;width:400px;border:1px solid #CCC; -webkit-border-radius:10px; margin:0px;padding:5px;font-family:\'Inconsolata\',arial;font-size:15px"></textarea>';
document.getElementById("compose-single-text").innerHTML+='<button id="send-button-single-text" style="font-family:arial;font-size:12px;mmargin:0px;padding:5px;margin-left:10px;margin-top:-5px;clear:both;" onclick="_f8fa97d5c484b1b808a0591ce28cb1f9c877781412a796c9e0c9574dd545d447b75f34a6f2e47227();"> Send</button>';document.getElementById("compose-single-text").innerHTML+='<span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;font-family:arial;margin-left:20px" id="charsLeft-one-text"> </span>';
document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+='<br><div id="single-text-texts" style="font-size:14px"></div>';document.getElementById("compose-single-text").innerHTML+='<br><div id="error-text-content-single-text" style="font-weight:bold;color:red;font-size:14px"></div>';$("#send-one-text").delegate("","keypress",function(a){13==a.keyCode&&(a.preventDefault(),$("#send-one-text").blur(),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("enter triggered"),
_fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12()&&(a=$("#send-one-text")[0].value,$("#send-one-text")[0].value=a.replace("\n",""),$("#send-button-single-text").click()),$("#send-one-text").focus())});_4e63ad78933f80c6b514c7508fda6b00ee951abbd9a6c08362fe4fff38123e22461a642879ac1693();$("#send-one-text").NobleCount("#charsLeft-one-text");$(function(){$("#compose-number").autocomplete({source:autocomplete_contacts})})}
function _fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12(){if(google_login_status)return!0;document.getElementById("msg").innerHTML='<span style="color:black">** Unable to send any new text messages until you sign in **</span>';return!1}
function _3ef3502c75e676853cf0bd7231e3975b1c9258fce4d993ba300e7773704a11b46a793c3e1153e069(){document.getElementById("user-actions").innerHTML="";0<which_phone_num_from_hash_tag_in_url.length?setTimeout('$("textarea#inputsms-0").focus();',100):google_login_status&&(document.getElementById("user-actions").innerHTML+='<button class="pill positive button" onclick="if(_fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12()) {_bbefc3a36f2b1ccccb4b1ffb2dbfc3efef0d1aef832365ffc0906ff7757c14921b850b2728b7de2f();}"> <span class="pen icon"></span> Compose New</button>',
document.getElementById("user-actions").innerHTML+='<button class="pill button" onclick="document.getElementById(\'msg\').innerHTML =  \'\';_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf();"><span class="reload icon"></span>Refresh</button>')}
function _160ab00ff8cc433493bbe5b15991ab082dc4ddb8d5a02cca54f89530c57c4a8e03fcb941e36e684b(){document.getElementById("results").innerHTML="";document.getElementById("user-actions").innerHTML="";document.getElementById("messages").innerHTML=""}
function _1034d5802f55c21002787365502945168bd16609cfd6353698df6daf7f81dad2c849b6c7e073d7c1(){null!=window.localStorage&&1==window.localStorage.usingWebAppNew&&($("body").hide(),alert('To set options for MightyText, click "Settings" in the Web application. Redirecting now.'),_eb0c83b4b297091d96de8a921e569d95cb78fa4cbb02c36ce176c9526a89a7205f2bf3b28e272ee7());_gaq.push(["_trackEvent","Popup","Options-Page-Load","",1]);_160ab00ff8cc433493bbe5b15991ab082dc4ddb8d5a02cca54f89530c57c4a8e03fcb941e36e684b();
document.getElementById("results").innerHTML="";document.getElementById("results").innerHTML+='<br><div><a href="#" onclick="location.reload(true);" style="font-size:12px;color:green"><br><B>  \u2190 back to text messages</B></a><br><span style="color:maroon;font-size:13px"><B>Please note: The options below are only applicable if you are using the Chrome Extension to send/receive messages.  If you are an early tester on the new MightyText Web App, the options below do not apply.<B></span><br><br></div>';
document.getElementById("results").innerHTML+='<div id="notificationLevelSelection" class="options-section"><strong>Desktop Notification Preference</strong>: When a new text message comes in, what text to show in the desktop notification.<br><br> <input id="notif-level-3" type="radio" name="notif_level" value="3" onclick="_78bbb8628a4a61290812844ad92564773c5706fb2183c109175e53409e49be6824f78e1009c8dbfc(this)" >Sender Name and Message Text (e.g. "<B>Bill Jones:</B>  Running 15 minutes late. Do you want me to pick up dinner?") - <B>default</B> <br> <input id="notif-level-2" type="radio" name="notif_level" value="2" onclick="_78bbb8628a4a61290812844ad92564773c5706fb2183c109175e53409e49be6824f78e1009c8dbfc(this)">Just Sender Name (e.g. "New text from Bill Jones. <B><U>see it</U></B>")</div>';
$("input[id=\"notif-level-' + window.localStorage.notifLevel + '\"]").attr("checked",!0);document.getElementById("results").innerHTML+='<div id="debugLevelSelection" class="options-section"><strong>Debug Level</strong><br><br><input id="debug-level-1" type="radio" name="debug_level" value="1" onclick="_67d6f5333d7f4e820f076726153a507c5d8727c6ce48efb31d90241f86d6ff1414f2f865e61ce5e5(this)">Debug info to local console only<br> <input id="debug-level-0" type="radio" name="debug_level" value="0" onclick="_67d6f5333d7f4e820f076726153a507c5d8727c6ce48efb31d90241f86d6ff1414f2f865e61ce5e5(this)">Debugging OFF - <B>default</B></div>';
$("input[id=\"debug-level-' + window.localStorage.debugLevel + '\"]").attr("checked",!0);document.getElementById("results").innerHTML+='<div id="autoCloseWindowOnReplySelection" class="options-section"><strong>Popup Window after Replying</strong><br><br><input id="auto-close-1" type="radio" name="auto_close_window" value="1" onclick="_dc0b691d090dcd784f61acf8a9c0412b51da064800842851ed0af60fcc4d4566e62c2f2631cf9906(this)">Automatically close window after sending reply<br> <input id="auto-close-0" type="radio" name="auto_close_window" value="0" onclick="_dc0b691d090dcd784f61acf8a9c0412b51da064800842851ed0af60fcc4d4566e62c2f2631cf9906(this)">Leave popup window open after sending reply</div>';
$("input[id=\"auto-close-' + window.localStorage.autoCloseLevel + '\"]").attr("checked",!0);document.getElementById("results").innerHTML+='<div id="adminTools" class="options-section"><strong>Advanced Options: </strong><br><br>';document.getElementById("adminTools").innerHTML+='<button onclick="_7a3d21f15774778596c9356754972f92cd9ebe9a84d60e2c6b3ee94866d309920641bda9dbe8f52f()">Send Test SMS to USA #</button>';console.log(signOutUrl);!0==google_login_status?document.getElementById("adminTools").innerHTML+=
"<button onclick=\"chrome.tabs.create({url: '"+signOutUrl+"'})\">Sign Out of MightyText</button>":document.getElementById("adminTools").innerHTML+="<button onclick=\"chrome.tabs.create({url: '"+signInUrl+"'})\">Sign In to MightyText</button>";document.getElementById("adminTools").innerHTML+='<button onclick="_651078e00de7500deab3f209e50112a4ed9c6ecf082908dfc53818856878d46f7563b48c7cd9f39c();_9684773489f3be5cf701c936805bbd32ee61061fc5373f189d26d80408cb3e6ce3e4d4f06a3c7d84();_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf();">Create Local Data Stores</button>';
document.getElementById("adminTools").innerHTML+='</b><button onclick="_546962a08b9a1562b74dede34b758447b37e035c9fdd0e3c4e151b473959788478f42825cab58507()">Delete all Local Contacts</button><br>';document.getElementById("adminTools").innerHTML+='</b><button onclick="_b3716980009ab5a7ed722bd39a35d76f13b647feaa87d618f9895df32b8ece2051e57e1e560abbf5()">Delete all Local Messages</button>';oauth.hasToken()?(document.getElementById("adminTools").innerHTML+='<button onclick="_fb8349e02df0524118dfa40dd7bc444597748f6db17a9f9c5d687819fea00580543b4bcba5882b13();_acf6d7982c834b2cd796a45e0810821afa13bc356535203199ec30d1792d2e1cf224d439481f5a40();">Force Sync w/ Google Contacts</button>',
document.getElementById("adminTools").innerHTML+='<button onclick="_d1d01a178db404bdbbb0745a5933d9e30eb1897972efe126045f76d295df1305bb99df15ac1103ec();_d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf();">Clear Stored Contacts Token</button>'):document.getElementById("adminTools").innerHTML+='<button onclick="_acf6d7982c834b2cd796a45e0810821afa13bc356535203199ec30d1792d2e1cf224d439481f5a40();">Get Google Contacts Token</button>';document.getElementById("results").innerHTML+=
"</div>"}
function _78bbb8628a4a61290812844ad92564773c5706fb2183c109175e53409e49be6824f78e1009c8dbfc(a){null==window.localStorage?_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Local storage is required!"):(a=a.value,3==a?window.localStorage.notifLevel=3:2==a?window.localStorage.notifLevel=2:1==a&&(window.localStorage.notifLevel=1),document.getElementById("msg").innerHTML="Updated Notification Preference",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";
$("#msg").show()}))}
function _67d6f5333d7f4e820f076726153a507c5d8727c6ce48efb31d90241f86d6ff1414f2f865e61ce5e5(a){null==window.localStorage?_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Local storage is required!"):(a=a.value,2==a?window.localStorage.debugLevel=2:1==a?window.localStorage.debugLevel=1:0==a&&(window.localStorage.debugLevel=0),debug_mode=window.localStorage.debugLevel,document.getElementById("msg").innerHTML="Updated Debug Level",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML=
"";$("#msg").show()}))}
function _dc0b691d090dcd784f61acf8a9c0412b51da064800842851ed0af60fcc4d4566e62c2f2631cf9906(a){null==window.localStorage?_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Local storage is required!"):(a=a.value,1==a?window.localStorage.autoCloseLevel=1:0==a&&(window.localStorage.autoCloseLevel=0),document.getElementById("msg").innerHTML="Updated Window Close Preference",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _305d48cc0b625c75afa0a37c063fbbbf9b19c8980e0779becbbb0be7aeac2f3fb96617cf69822cb4(a){null==window.localStorage?_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Local storage is required!"):(a=a.value,1==a?window.localStorage.overridePrefix=1:0==a&&(window.localStorage.overridePrefix=0),document.getElementById("msg").innerHTML="Updated +1 Override Setting",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _f8fa97d5c484b1b808a0591ce28cb1f9c877781412a796c9e0c9574dd545d447b75f34a6f2e47227(){var a=document.getElementById("compose-number").value;_2fb999eaaa0d765b16c5715e2163b7fb772a5c3678ab44e2518c62ffc04ad044f4a07f1369a59523("send-one-text",a,"single-text")}function _aee6463a7759e2795194f979ec3d8b771bea19f5f456edb70fa9c590969d9e1f3012d972f96cb056(a,c,d){a=document.getElementById(a);c=document.getElementById(c);a.value.length>d?a.value=a.value.substring(0,d):c.value=d-a.value.length}
function _b76ab6b46e566dc6a81b92c3d7d74f9ad546706c326ebca10f7d586cf0cc96fe960636824b717d45(){console.log("In Traverse");var a=(new Date).getTime();document.getElementById("resultholder").innerHTML=resultdivclean;document.getElementById("messages").innerHTML="";db.transaction(function(c){c.executeSql("SELECT 1",[],function(c,e){for(var b=0;1>b;b++){var g="inputsms-0",f="sendbox-0",n="charsLeft-0",l=0,p="";new Boolean(!1);var m="";_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("sms array length is "+
smsarray.length);for(var b=0,h="initial";b<=smsarray.length&&0!=smsarray.length;b++){if(b==smsarray.length||h!=smsarray[b].right_digits_phone_num){console.log("** At end of thread **");if(0!=b){document.getElementById(f).innerHTML+='<div id="send-action" style="margin-top:10px">';document.getElementById(f).innerHTML+='<textarea id="'+g+'" value="starting val" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-'+f+"').innerHTML='';\" style=\"float:left;height:60px;width:450px;border:1px solid #CCC;-webkit-border-radius:10px;margin:0px;padding:5px;font-family:'Inconsolata',arial;font-size:15px\" ></textarea>";
document.getElementById(f).innerHTML+='<span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none" id="'+n+'"> </span>';document.getElementById(f).innerHTML+='<span style="margin-top:160px">';document.getElementById(f).innerHTML+='<button id="send-button-'+l+'" style="float:left;font-size:15px;margin-left:5px" class="positive pill" onclick="if(_fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12()) {_2fb999eaaa0d765b16c5715e2163b7fb772a5c3678ab44e2518c62ffc04ad044f4a07f1369a59523(\''+
g+"','"+k+"','"+f+'\');}"> <span class="mail icon"></span>Send</button>';document.getElementById(f).innerHTML+="</span>";document.getElementById(f).innerHTML+='<button id="delete-all-from-sender" style="float:right;font-size:10px;margin-top:0px;ppadding:10px" class="negative button" onclick="_2d789a4b680ee04a085080c592c7e728a3502889b2237af3cbdeb4cbaa554b478c12d7f6dfbd14d3(\''+h+'\')"><span class="trash icon"></span> Delete all from this sender</button>';document.getElementById(f).innerHTML+="</div>";
document.getElementById(f).innerHTML+='<div id="enter-help-msg" style="padding:5px;margin:10px;margin-top:6px;text-align:left;font-size:12px;color:green">&nbsp  \u2190 Press Enter to send<br><span style="font-size:10px;color:grey"> &nbsp Will send SMS via your phone to: <B>'+k+"<B></span></div>";document.getElementById(f).innerHTML+='<div id="error-text-content-'+f+'" style="font-weight:bold;color:red;font-size:14px"></div>';$("#"+g).delegate("","keypress",function(a){if(13==a.keyCode&&(a.preventDefault(),
$("#"+a.target.id).blur(),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("enter triggered, and blur attempt"),_fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12())){var b=a.target.id,c=$("#"+b)[0].value;$("#"+b)[0].value=c.replace("\n","");b=b.substr(9);$("#send-button-"+b).click()}$("#"+a.target.id).focus()});if(b==smsarray.length){console.log("***** AT LAST MESSAGE IN ARRAY IN TRAVERSE FUNCTION *****");break}l+=1;g="inputsms-"+String(l);
f="sendbox-"+String(l);n="charsLeft-"+String(l)}document.getElementById("results").innerHTML+='<div id="'+f+'" style="margin-top:4px;background-colorrr:white;padding:0px;"></div>';_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("----------------------------------------------------------------------------");h=smsarray[b].right_digits_phone_num;_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("phone # in messages table is: "+h);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Length of this # is: "+
h.length);h=h.replace("+","");7>h.length&&(h=_226b199aba135d1b904d5f915473d5db1aa0668650de561a227f24e43a83c388efa9d70f5e48c82b(h,7));_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Looking up (last 7 digits of phone num): "+h+" -- in local contacts array -- from msgid: "+smsarray[b].id);var k=0,m=_79dd1b19504163af687a7202cb3b41de37d389d81e90e61568a57942888af04eed2f3f3d6bd15c4d(h);""!=m?(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(h+
" WAS  FOUND in Local Contacts DB"),p=m.contactNameLocalDB+'<span style="padding-left:3px;font-size:9px;text-decoration:none;"> ('+m.contactPhoneNumberLocalDB+")</span>",k=m.contactPhoneNumberLocalDB):(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(h+" WAS NOT FOUND in Local Contacts DB -- so now look at Temp Synced G Contacts (from Background Page)"),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Currently: "+contacts.length+
" contacts in Locally Temp Synced G Contacts OAuth array"),0==contacts.length&&(p=smsarray[b].from_phone_num,k=smsarray[b].from_phone_num,_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("No oAuth G Contacts - Will just display full phone number  in tab: "+smsarray[b].from_phone_num+" to user...")),0<contacts.length&&(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Looking up: "+h+" -- in Locally Temp Synced G Contacts OAuth array"),
k=_758ec4656f23a1a12e48e9a63b7a23bdcaf1045f1b365ebeb0369226a300e43b0890ad57f98e30fb(h,smsarray[b].from_phone_num),""==k?(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(h+" NOT FOUND in Locally Temp Synced G Contacts OAuth array"),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Will just display phone number (last # in thread): "+smsarray[b].from_phone_num),p=smsarray[b].from_phone_num,k=smsarray[b].from_phone_num):(p=k.contactNamefromGoogleContactsArray+
" ("+k.contactPhoneNumberfromGoogleContactsArray+")r",k=k.contactPhoneNumberfromGoogleContactsArray)));document.getElementById("anchors-for-tabs").innerHTML+='<li><a href="#'+f+'">'+p+"</a></li>";0<which_phone_num_from_hash_tag_in_url.length&&(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("single reply thread -- attempting to hide ul anchors"),$("ul#anchors-for-tabs").hide(),$("ul#anchors-for-tabs").height(1),$("div#top-notif-bar").hide(),$("div#close-window-button-red-x").hide(),
$("div#sendbox-0").css("padding-top","0"),setTimeout("$('div#sendbox-0-texts').css('border-top-left-radius','0px 0px');",10),setTimeout("$('button#delete-all-from-sender').hide();",10),setTimeout("$('button#send-button').text('Send Reply');",10),document.getElementById("results").innerHTML='<div id="single-reply-heading" style="margin-bottom:-10px;font-size:22px;color:white;background-color:#0087D2;margin-left:0px;padding:12px;padding-bottom:20px;margin-top:30px;padding-right:0px;border-top-left-radius:10px;border-top-right-radius:10px;letter-spacing: -0.5px;clear:both"><B>'+
p+"</B></div>"+document.getElementById("results").innerHTML);document.getElementById(f).innerHTML+='<div class="text-message-list" style="height:300px" id="'+f+'-texts"> </div>'}h=smsarray[b].right_digits_phone_num;m="";1==smsarray[b].type&&(m=" sms-reply");b==smsarray.length-1&&0==smsarray[b].type&&0<which_phone_num_from_hash_tag_in_url.length&&_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(" msgid for bolding is: "+smsarray[b].msgid);buildTextList='<li id="sms-line-item-msgid-'+
smsarray[b].msgid+'" class="sms-line-item'+m+'">';m="";m=80>smsarray[b].body.length?'style="display:inline;line-height: 35px"':"";buildTextList+='<span id= "sms-body-msgid-'+smsarray[b].msgid+'" class="sms-body" '+m+">"+smsarray[b].body+'</span>  <span class="sms-time">'+_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(smsarray[b].time_client)+"</span>";1==smsarray[b].type&&(51==smsarray[b].status?buildTextList+='<span class="outbound-state-info"> [Computer&nbsp&raquo&nbspYour&nbspPhone] </span>':
52==smsarray[b].status?buildTextList+='<span class="outbound-state-info" style="color:green"> [Full Cycle Complete] </span>':-99==smsarray[b].status?buildTextList+='<span class="outbound-state-info" style="color:maroon"> [Failed Send] </span>':1==smsarray[b].status&&(buildTextList+='<span class="outbound-state-info" style="color:maroon"> [Phone Sent SMS] </span>'));buildTextList+='<span class="message-action-links">';buildTextList+='<img src="red-close-x.png" class="HoverBorder" align=middle height=11 width=11 style="margin-left:3px;margin-bottom:5px" onclick="_86d4e525dd4757c1296c69074eb2d3102a643184de8627f75ba1abcfafd00a0e75ad189105cfdc21(\''+
smsarray[b].msgid+"')\"> </span> </li>";document.getElementById(f+"-texts").innerHTML+=buildTextList}console.log("DONE GENERATING HTML!");window.setTimeout("_f9d6ae78da9bfce16eb910d614c5aa3a5844dd4f32eaf788b718d56c5ff719754d4a97f114936689()",100);window.setTimeout("_761a594fa53fc44004db606743eb4fe4e9c8615c31c0303c5ea0fd7fbdd82c1ec354cc259931dddf();",0);g=(new Date).getTime();_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(a);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(g);
_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Time to Load Tabs: "+(g-a)/1E3);console.log("value of i (counter) got to: "+b+"...sms total based on array was: "+smsarray.length);console.log("number of unique contacts with messages isss: "+l);300<smsarray.length&&_gaq.push(["_trackEvent","Popup","HIGH-NUMBER-Local-Messages-Chrome-DataStore","HIGH-NUM-"+smsarray.length+"-Messages-Across-"+l+"-Contacts---"+google_username_currently_logged_in,smsarray.length]);_gaq.push(["_trackEvent",
"Popup","Count-Recipients-In-Tab-List","",l]);_gaq.push(["_trackEvent","Popup","Count-Local-Messages-Array","",smsarray.length])}_60609056be69e9ee58d2a7d692a6b6c2d52fb8af3b15ac461ae1ed3ab044e607a06d2130bd43aecb(l)})})}function _60609056be69e9ee58d2a7d692a6b6c2d52fb8af3b15ac461ae1ed3ab044e607a06d2130bd43aecb(a){_4e63ad78933f80c6b514c7508fda6b00ee951abbd9a6c08362fe4fff38123e22461a642879ac1693();for(var c=0,c=0;c<=a;c++)$("#inputsms-"+c).NobleCount("#charsLeft-"+c),$("#charsLeft-"+c).html("160")}
function _4e63ad78933f80c6b514c7508fda6b00ee951abbd9a6c08362fe4fff38123e22461a642879ac1693(){$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:function(a,c,d,e){a=c.selector;320==e?$(a)[0].innerHTML=160:$(a)[0].innerHTML=e%160;0>=e?c.css("color","red"):c.css("color","#3F8CD9");0<Math.floor((320-e)/161)&&($(a)[0].innerHTML=$(a)[0].innerHTML+' <span style="font-size:12px;color:green;font-weight:normal">[#2]</span>')},max_chars:320,block_negative:!0,cloak:!1,in_dom:!1}}
function _6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(a){var c="",d=new Date(a);a=d.getHours();c=12>a?"AM":"PM";0==a&&(a=12);12<a&&(a-=12);var e=d.getMinutes();10>e&&(e="0"+e);var b=d.getDate(),g=d.getMonth();g++;d=d.getFullYear().toString().slice(2);return g+"/"+b+"/"+d+" "+a+":"+e+" "+c}
function _1ef7e1c373783603cff42be6e66512ea69e219f89a50c8a873a65b2b15d3b8d52b9dd9de0559916a(){chrome.extension.sendRequest({purpose:"get_new_g_contacts_token_call_from_popup"},function(a){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Checking Background Page for Google Contacts token...");_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("new response from BG page is "+a.myreply)})}
function _2f4fe4fff3a7f353327c8ec864017880aa1c657674c6ac383640e9a7349741580ee1284e8c9f7e59(){chrome.extension.sendRequest({purpose:"set_quick_polling_outbound_message"},function(a){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Checking Background Page to set quick polling because outbound message is being sent...");_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("new response from BG page is "+a.myreply)})}
function _b3ee9129c586b0ef0397d5e33496f2d58992cc3c068e400fdc8b5c8a96245faaf087b670cd088c24(){console.log("in getFreshLatestGoogle function");chrome.extension.sendRequest({purpose:"user_invoked_popup_so_force_google_login_check"},function(a){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Popup Starting -- call BG page to get latest Google Login Info in BG scope");_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("response from BG page is "+
a.reply)})}
function _5b2050a7578eb4cf9ee48eb5f3062ba4cbc39bc8bb6fe2ed5b69288a66684479a8e94ffea9ba8817(){console.log("in getFreshLatestGoogle function");chrome.extension.sendRequest({purpose:"user_invoked_popup_so_force_google_login_check"},function(a){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Popup Starting -- call BG page to get latest Google Login Info in BG scope");_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("response from BG page is "+a.reply)})}
function _8bed17d1b8f45d79b13a5ec265ed2830b981cbad582349ae8b07260c1067fc3168572b67af86706f(){_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("In CheckBGPageforGoogleLoginState function");chrome.extension.sendRequest({purpose:"popup_checking_current_google_login_state"},function(a){console.log("Checking Background Page for current Google Login important info...(BG page is polling for it)");console.log("response from BG page...login_status is: "+a.google_login_status_from_bg_page);
console.log("response from BG page...login_and_beta_ready is: "+a.login_and_beta_ready_from_bg_page);console.log("response from BG page...google_username_currently_logged_in is: "+a.google_username_currently_logged_in_from_bg_page);console.log("response from BG page...extra_login_status_info is: "+a.extra_login_status_info_from_bg_page);google_login_status=a.google_login_status_from_bg_page;login_and_beta_ready=a.login_and_beta_ready_from_bg_page;google_username_currently_logged_in=a.google_username_currently_logged_in_from_bg_page;
extra_login_status_info=a.extra_login_status_info_from_bg_page;console.log("google login status is : "+google_login_status);console.log("extra login status is : "+extra_login_status_info);google_login_status?"WEBAPP_BETA"==extra_login_status_info?(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("User is a WEBAPP BETA user"),_eb0c83b4b297091d96de8a921e569d95cb78fa4cbb02c36ce176c9526a89a7205f2bf3b28e272ee7(),console.log("aaaa"),window.close(),a='<img align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:black;font-size:13px"><B>Hi - You\'ve signed up to use the new MightyText Web App.</span> <a href="#" onclick="window.close();chrome.tabs.create({url: \''+
signOutUrl+"'})\"> Log out of MightyText</a>",document.getElementById("top-notif-bar").innerHTML=a):"USER_REG_BUT_NO_ACTIVE_ANDROID_REG"==extra_login_status_info?(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("This user does not have an active Android App registration! (either never set up or they disconnected..)"),a='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:black;font-size:13px"><B>Android App Not Installed:</B> Please make sure you have installed the MightyText Android app from Google Play &amp configure it using this same Google account.</span> <a href="#" onclick="window.close();chrome.tabs.create({url: \''+
signOutUrl+"'})\"> Log out of MightyText</a>",document.getElementById("top-notif-bar").innerHTML=a):(_12cb3e46b90bb7f134aa525746cf143333af3270c65b79a71ffdd196d7fe6f821126e9c77d881dd7(),$("#static-links-plus-separator").empty(),$("#sign-in-status").empty(),$("#top-notif-bar").empty(),a="13px",35<google_username_currently_logged_in.length?a="9px":25<google_username_currently_logged_in.length&&(a="11px"),document.getElementById("sign-in-status").innerHTML+='<img src="green-dot-icon.png"><span style="color:white;font-size:'+
a+';font-weight:600"> '+google_username_currently_logged_in+" |</span>",$("#sign-in-status").removeClass(),document.getElementById("static-links-plus-separator").innerHTML+='<a id="rate-review" style="color:gold;font-size:13px" href="#" onclick="window.close();chrome.tabs.create({url: \'https://market.android.com/details?id=com.texty.sms&reviewId=123\'});">Rate us</a>|',document.getElementById("static-links-plus-separator").innerHTML+='<a id="texty-on-facebook" href="#" onclick="window.close();chrome.tabs.create({url: \'http://www.facebook.com/mightytext\'});">fb</a>|',
document.getElementById("static-links-plus-separator").innerHTML+='<a id="admin" onclick="_1034d5802f55c21002787365502945168bd16609cfd6353698df6daf7f81dad2c849b6c7e073d7c1();" href="#" >Options</a>|',$("#static-links-plus-separator").removeClass(),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Logged in fine, so show the google username and Options link..."),_3ef3502c75e676853cf0bd7231e3975b1c9258fce4d993ba300e7773704a11b46a793c3e1153e069(),window.setTimeout(function(){document.getElementById("dynamic-message").innerHTML=
dynamic_info_global},1500)):(1==window.localStorage.usingWebAppNew&&(_eb0c83b4b297091d96de8a921e569d95cb78fa4cbb02c36ce176c9526a89a7205f2bf3b28e272ee7(),window.close()),a='<img  align=BOTTOM src="error_icon.png" width=20 height=18 /> <span style="color:red"> Not Signed in.</span>  <a href="#" onclick="window.close();chrome.tabs.create({url: \''+signInUrl+"'})\"> Sign-in using your Google Account</a> to use MightyText",document.getElementById("top-notif-bar").innerHTML=a+"<br>"+document.getElementById("top-notif-bar").innerHTML,
console.log(signInUrl))})}function _9e2e6bbbf027cc0ec8670aaf462a121565b10363b9df7e461971221502fafb14768f0390fd670e84(a){for(var c="";-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");-1==a.search("[+]")&&(c="1"==a.charAt(0)?"+":"+1");return c+a}
function _15c60742999b8488261dd34771dc1f64e751335d04d8e42aca30ecc4aa755c6e975c5031b368aa48(a){console.log("phone num to check is: "+a);0==a.search("[+1]")&&(a=a.substring(2));console.log("after substring - phonenum override is: "+a);return a}function _f36520637d4e7ef010589a8b6f999cfa5540ced099d826bfccb32991c544f02237752b08b4c85eea(){_f36520637d4e7ef010589a8b6f999cfa5540ced099d826bfccb32991c544f02237752b08b4c85eeaGoogleOpenID();window.close()}
function _761a594fa53fc44004db606743eb4fe4e9c8615c31c0303c5ea0fd7fbdd82c1ec354cc259931dddf(){console.log("in UI_REFRESH_MAGIC");$(function(){0>=selected_tab&&(selected_tab=0,$("#sendbox-0-texts").scrollTop(4E4+$("#sendbox-0-texts").height()));$("#results").tabs();$("#results").show();$("#results").tabs("select",selected_tab);var a="#sendbox-"+selected_tab+"-texts";$(a).scrollTop(4E4+$(a).height());$("#results").bind("tabsshow",function(a,d){var e="#"+d.panel.id+"-texts";$(e).scrollTop(4E4+$(e).height());
$("#inputsms-"+d.index).focus();_gaq.push(["_trackEvent","Popup","Thread-Tab-Click","",1])})});$("#inputsms-"+selected_tab).focus();0<which_phone_num_from_hash_tag_in_url.length&&setTimeout('$("textarea#inputsms-0").focus();',100);$("#refresh-indicator").hide()}
function REFACTOR__b76ab6b46e566dc6a81b92c3d7d74f9ad546706c326ebca10f7d586cf0cc96fe960636824b717d45(){var a=(new Date).getTime();document.getElementById("resultholder").innerHTML=resultdivclean;document.getElementById("messages").innerHTML="";db.transaction(function(c){c.executeSql("SELECT 1",[],function(c,e){for(var b=0;1>b;b++){var g="inputsms-0",f="sendbox-0",n="libox-0",l="charsLeft-0",p=0,m="";_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("sms array length is "+
smsarray.length);for(var b=0,h="initial";b<=smsarray.length&&0!=smsarray.length;b++){if(b==smsarray.length||h!=smsarray[b].right_digits_phone_num){if(0!=b){document.getElementById(f).innerHTML+='<div id="send-action" style="margin-top:10px">';document.getElementById(f).innerHTML+='<textarea id="'+g+'" value="starting val" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-'+f+"').innerHTML='';\" style=\"float:left;height:60px;width:450px;border:1px solid #CCC;-webkit-border-radius:10px;margin:0px;padding:5px;font-family:'Inconsolata',arial;font-size:15px\" ></textarea>";
document.getElementById(f).innerHTML+='<span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none" id="'+l+'"> </span>';document.getElementById(f).innerHTML+='<span style="margin-top:160px">';document.getElementById(f).innerHTML+='<button id="send-button-'+p+'" style="float:left;font-family:arial;font-size:12px;margin-left:10px" class="positive button" onclick="if(_fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12()) {_2fb999eaaa0d765b16c5715e2163b7fb772a5c3678ab44e2518c62ffc04ad044f4a07f1369a59523(\''+
g+"','"+k+"','"+f+'\');}"><span class="mail  icon"></span> Send</button>';document.getElementById(f).innerHTML+="</span>";document.getElementById(f).innerHTML+='<button id="delete-all-from-sender" style="float:right;font-family:arial;font-size:12px;margin:10px;margin-top:0px;padding:5px" class="negative button" onclick="_2d789a4b680ee04a085080c592c7e728a3502889b2237af3cbdeb4cbaa554b478c12d7f6dfbd14d3(\''+h+'\')"><span class="trash icon"></span> Delete all from this sender</button>';document.getElementById(f).innerHTML+=
"</div>";document.getElementById(f).innerHTML+='<div id="enter-help-msg" style="paddinggg:5px;margin:10px;margin-top:10px;text-align:left;font-size:12px;color:green">&nbsp&nbsp\u2190 Press Enter to send<br><span style="font-size:10px;color:grey"> &nbsp Will send SMS via your phone to: <B>'+k+"<B></span></div>";document.getElementById(f).innerHTML+='<div id="error-text-content-'+f+'" style="font-weight:bold;color:red;font-size:14px"></div>';$("#"+g).delegate("","keypress",function(a){if(13==a.keyCode&&
(a.preventDefault(),$("#"+a.target.id).blur(),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("enter triggered, and blur attempt"),_fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12())){var b=a.target.id,c=$("#"+b)[0].value;$("#"+b)[0].value=c.replace("\n","");b=b.substr(9);$("#send-button-"+b).click()}$("#"+a.target.id).focus()});if(b==smsarray.length)break;p+=1;g="inputsms-"+String(p);f="sendbox-"+String(p);n="libox-"+String(p);l=
"charsLeft-"+String(p)}document.getElementById("results").innerHTML+='<div id="'+f+'" style="margin-top:10px;bbbackground-color:white;padding:0px;"></div>';_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("--------------------------------------------------------------------------------------------------");h=smsarray[b].right_digits_phone_num;_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("phone # in messages table is: "+h);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Length of this # is: "+
h.length);h=h.replace("+","");7>h.length&&(h=_226b199aba135d1b904d5f915473d5db1aa0668650de561a227f24e43a83c388efa9d70f5e48c82b(h,7));_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Looking up (last 7 digits of phone num): "+h+" -- in local contacts array -- from msgid: "+smsarray[b].id);var k=0,q=_79dd1b19504163af687a7202cb3b41de37d389d81e90e61568a57942888af04eed2f3f3d6bd15c4d(h);""!=q?(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(h+
" WAS  FOUND in Local Contacts DB"),m=q.contactNameLocalDB+'<span style="padding-left:3px;font-size:9px;text-decoration:none;"> ('+q.contactPhoneNumberLocalDB+")</span>",k=q.contactPhoneNumberLocalDB):(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(h+" WAS NOT FOUND in Local Contacts DB -- so now look at Temp Synced G Contacts (from Background Page)"),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Currently: "+contacts.length+
" contacts in Locally Temp Synced G Contacts OAuth array"),0==contacts.length&&(m=smsarray[b].from_phone_num,k=smsarray[b].from_phone_num,_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("No oAuth G Contacts - Will just display full phone number  in tab: "+smsarray[b].from_phone_num+" to user...")),0<contacts.length&&(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Looking up: "+h+" -- in Locally Temp Synced G Contacts OAuth array"),
k=_758ec4656f23a1a12e48e9a63b7a23bdcaf1045f1b365ebeb0369226a300e43b0890ad57f98e30fb(h,smsarray[b].from_phone_num),""==k?(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa(h+" NOT FOUND in Locally Temp Synced G Contacts OAuth array"),_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Will just display phone number (last # in thread): "+smsarray[b].from_phone_num),m=smsarray[b].from_phone_num,k=smsarray[b].from_phone_num):(m=k.contactNamefromGoogleContactsArray+
" ("+k.contactPhoneNumberfromGoogleContactsArray+")",k=k.contactPhoneNumberfromGoogleContactsArray)));document.getElementById("anchors-for-tabs").innerHTML+='<li title="'+k+'" id="'+n+'"><a href="#'+f+'">'+m+"</a></li>";0<which_phone_num_from_hash_tag_in_url.length&&(_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("single reply thread -- attempting to hide ul anchors"),$("ul#anchors-for-tabs").hide(),$("ul#anchors-for-tabs").height(1),$("div#top-notif-bar").hide(),
$("#action-info-bar").hide(),$("div#close-window-button-red-x").hide(),$("div#sendbox-0").css("padding-top","0"),setTimeout("$('div#sendbox-0-texts').css('border-top-left-radius','0px 0px');",10),setTimeout("$('button#delete-all-from-sender').hide();",10),setTimeout("$('button#send-button').text('Send Reply');",10),document.getElementById("results").innerHTML='<a style="float:left;clear:both;font-size:12px" href="'+chrome.extension.getURL("popup.html")+'">\u2190 See all message threads</a><br><br><div id="single-reply-heading" style="margin-bottom:-10px;font-size:16px;text-align:left;color:white;background-color:#0087D2;margin-left:0px;padding:8px;padding-right:0px;margin-top:30px;border-top-left-radius:10px;border-top-right-radius:10px;letter-spacing: -0.5px;"><B>'+
m+"</B></div>"+document.getElementById("results").innerHTML);document.getElementById(f).innerHTML+='<div class="text-message-list" style="height:300px" id="'+f+'-texts"> </div>'}h=smsarray[b].right_digits_phone_num;console.log("** Message Line item **")}g=((new Date).getTime()-a)/1E3;console.log("Time to Generate HTML: "+g);window.setTimeout(function(){_f9d6ae78da9bfce16eb910d614c5aa3a5844dd4f32eaf788b718d56c5ff719754d4a97f114936689()},100);REFACTOR__761a594fa53fc44004db606743eb4fe4e9c8615c31c0303c5ea0fd7fbdd82c1ec354cc259931dddf();
300<smsarray.length&&_gaq.push(["_trackEvent","Popup","HIGH-NUMBER-Local-Messages-Chrome-DataStore","HIGH-NUM-"+smsarray.length+"-Messages-Across-"+p+"-Contacts---"+google_username_currently_logged_in,smsarray.length]);_gaq.push(["_trackEvent","Popup","Count-Recipients-In-Tab-List","",p+1]);_gaq.push(["_trackEvent","Popup","Count-Local-Messages-Array","",smsarray.length]);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("value of i (counter) got to: "+b+"...sms total based on array was: "+
smsarray.length);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("number of unique threads with messages is: "+p+1)}_60609056be69e9ee58d2a7d692a6b6c2d52fb8af3b15ac461ae1ed3ab044e607a06d2130bd43aecb(p)})})}
function REFACTOR__761a594fa53fc44004db606743eb4fe4e9c8615c31c0303c5ea0fd7fbdd82c1ec354cc259931dddf(){console.log("in REFACTOR - UI_REFRESH_MAGIC");$(function(){console.log("selected tab variable stored in page memory\t: "+selected_tab);0>=selected_tab&&(selected_tab=0,$("#sendbox-0-texts").scrollTop(4E4+$("#sendbox-0-texts").height()));$("#results").tabs();$("#results").tabs("select",selected_tab);console.log("1111");_f64be5ec3d986bbe3a291176585f0ce0b31fd19ea58e9201c1c8591663cb210a4be947eaf4229f0b(selected_tab);
console.log("222");$("#results").show();console.log("333");var a="#sendbox-"+selected_tab+"-texts";console.log("444");$(a).scrollTop(4E4+$(a).height());$("#results").bind("tabsselect",function(a,c){var b="#inputsms-"+c.index;console.log("Clicked Tab ui index is: "+c.index);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Clicked Tab Phone Number is: "+c.tab.parentNode.title);_f64be5ec3d986bbe3a291176585f0ce0b31fd19ea58e9201c1c8591663cb210a4be947eaf4229f0b(c.index);
$(b).focus();console.log(a);console.log(c);console.log($(c.panel).children("textarea").focus());_gaq.push(["_trackEvent","Popup","Thread-Tab-Click","",1])})});var a="#inputsms-"+selected_tab;$(a).focus();console.log("555");console.log(a);0<which_phone_num_from_hash_tag_in_url.length&&setTimeout('$("textarea#inputsms-0").focus();',100);$("#refresh-indicator").hide()}
function _f64be5ec3d986bbe3a291176585f0ce0b31fd19ea58e9201c1c8591663cb210a4be947eaf4229f0b(a){var c=[],d="",e="sendbox-"+a+"-texts";select_sql_string="SELECT *,substr(replace(replace(from_phone_num,' ',''),'-',''),-7) AS right_digits_phone_num FROM Messages WHERE right_digits_phone_num=substr(replace(replace('"+$("#libox-"+a).attr("title")+"',' ',''),'-',''),-7) ORDER BY right_digits_phone_num,time_client";console.log(select_sql_string);db.transaction(function(b){b.executeSql(select_sql_string,[],
function(b,f){for(var n=0,l=null;n<f.rows.length;n++)console.log("in loop - getmessagesarraydataforonenumber"),l=f.rows.item(n),c[n]=l;console.log("array length of one number array is "+c.length);d=_f2370c57a4dd5cc54174071cb8820abbc14d053ca170a94264b460f1e329dfab8bd6b47a9c6f1a86(c,e,a)});console.log("success! -- in getmessagesarraydataforonenumber")});console.log("Returned value of HTML from function is, and should be:"+d);console.log(d)}
function _f2370c57a4dd5cc54174071cb8820abbc14d053ca170a94264b460f1e329dfab8bd6b47a9c6f1a86(a,c,d){var e=document.getElementById(c).innerHTML="";console.log("now generate HTML");console.log("array length passed in is: "+a.length);for(var b=0;b<a.length&&0!=a.length;b++){console.log("generating html");var g="";1==a[b].type&&(g=" sms-reply");e+='<li id="sms-line-item-msgid-'+a[b].msgid+'" class="sms-line-item'+g+'">';g="";g=80>a[b].body.length?'style="display:inline;line-height: 35px"':"";e+='<span id= "sms-body-msgid-'+
a[b].msgid+'" class="sms-body" '+g+">"+_28208c04e0c9ed0ff7eb2e2e2ab8ebcf7979e9c8cafa8114e40d0f3e5e5af125dc4f9f349cb22ea4(a[b].body)+'</span>  <span class="sms-time">'+_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(a[b].time_client)+"</span>";1==a[b].type&&(51==a[b].status?e+='<span class="outbound-state-info"> [Computer&nbsp&raquo&nbspYour&nbspPhone] </span>':52==a[b].status?e+='<span class="outbound-state-info" style="color:green"> [Full Cycle Complete] </span>':
-99==a[b].status?e+='<span class="outbound-state-info" style="color:maroon"> [Failed Send] </span>':1==a[b].status&&(e+='<span class="outbound-state-info" style="color:maroon"> [Phone Sent SMS] </span>'));e+='<span class="message-action-links">';e+='<img src="red-close-x.png" class="HoverBorder" align=middle height=11 width=11 style="margin-left:3px;margin-bottom:5px" onclick="_86d4e525dd4757c1296c69074eb2d3102a643184de8627f75ba1abcfafd00a0e75ad189105cfdc21(\''+a[b].msgid+"')\"> </span> </li>"}console.log("we plan to populate this DOM with these threads for a single phone number: "+
c);a="#"+c;document.getElementById(c).style.display="none";document.getElementById(c).innerHTML+=e;$(a).fadeIn(200,function(){});console.log("here");$("#"+c).scrollTop(14E4);console.log("here2");$("#inputsms-"+d).focus();console.log("here3")}console.log(222);
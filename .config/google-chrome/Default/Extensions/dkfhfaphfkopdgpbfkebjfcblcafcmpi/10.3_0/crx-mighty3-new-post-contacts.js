var isCorsSupported=_0088f03f1e1107cc64785132eae28d69dc94af5ef8b367b4df9dfeaea9992aa52633e6dcc862879a(),contactsOAuthClientID="82288362851-h3jq02v23ctb7012e8bher02un8fk6n2.apps.googleusercontent.com",dest_num="",signInUrl=baseUrl+"/signin?continue_web= "+location.href,signOutUrl=baseUrl+"/signout?continue_web= "+location.href,newContactsOAuthURL="https://accounts.google.com/o/oauth2/auth?client_id="+contactsOAuthClientID+"&redirect_uri="+baseUrl+"/contacts-sync&scope=https://www.google.com/m8/feeds/&response_type=code&access_type=offline&approval_prompt=force",
global_oauth_contacts_token="gcontacts_token_placeholder",globalContactsRefreshCacheQueue=[],globalQueueContactImagesToFetch=[],globalPHONEContactsRefreshCacheQueue=[],contactsFromPhoneGlobal=[],global_time_last_CAPI_msg_received_webapp=new Date-6E5,current_server_stored_google_contacts_token=void 0,alertFallback=!1;if("undefined"===typeof console||"undefined"===typeof console.log)console={},console.log=alertFallback?function(a){alert(a)}:function(){};
var googleContactsArray=null,searchAutocompleteArray=null,newBestGoogleContactsArray=null,newBestGoogleContactsArray=[],inWebAppGlobalNotifArray=[];function _83d19f8d0f154c2cf7d28c7961a014685e5631b5eb65e208b715d3b42fc535aebcd8d3e7fb5f2c94(){var a=inWebAppGlobalNotifArray.shift(this);console.log("---");console.log(a);a.cancel()}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",
identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",
identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();
function _d0d9d29f2e4b1f5cbcd2018298f74bd3121ba49ab338563109f2bf96b41b6f5bb804904277c0ded6(a){var b=window.location.pathname;-1<b.search("dev")||-1<b.search("IEEEE-DEV")?(b="",-1<location.hash.search("0-")&&(b=" ("+location.hash.substr(1)+")"),_14edc0028615ef7b42a15459f302da246a1d541f04a72b69fee3315c7a0293e8345bd795316cbd69(a),$("#debug-environment-text").show().text("DEV"+b),$("#top-header").css("background","#2d3038")):-1<b.search("staging")&&(_14edc0028615ef7b42a15459f302da246a1d541f04a72b69fee3315c7a0293e8345bd795316cbd69(a),
$("#debug-environment-text").show().text("STAGING"),$("#top-header").css("background","yellow"))}
function _fc5daaa6e2f77b16a58b4eff996f4283224025d11820231d1da66758189b3e249faf74226a3614c3(){if(window.webkitNotifications){var a=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png","Bootup test subject","test content");a.onclick=function(a){window.focus();this.cancel()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _b3e7c0926c6bb92a3956cdddd385626c196794e12cf677a4567a1c787edd581dd898449285eff9df(){if(window.webkitNotifications){var a=window.webkitNotifications.createHTMLNotification("test-notification.html#1");a.onclick=function(a){window.focus()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _61f6599189fe84e78a330a5dcfcdb2fc73a8a63cc01c253f213f597e4df2754a863dba5ba4885e78(){"Firefox"==BrowserDetect.browser&&0!=window.webkitNotifications.checkPermission()&&$("#request_html_notif_permission").show()}function _f8fa97d5c484b1b808a0591ce28cb1f9c877781412a796c9e0c9574dd545d447b75f34a6f2e47227(){1>$("#send-one-text").val().length?alert("Error: Message is blank"):_448ec229d85de61b797d270b89ba0476b554a08fb688ececb8ee853a0fa52a02a452b24a7049783b()}
function _874f7d788deeaec27f2775f0f8ff479e3246c2aa48396ec03279bae53f0a6b9ef9c4c2e0e4f850ef(a,b,c){var d=baseUrl+"/content?function=deleteMessagesByMsgID",d=d+("&id="+encodeURIComponent(a));console.log(d);var e="#sms-line-item-msgid-"+a;$.ajax({url:d,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){console.log(a);console.log(a.num_deleted);if(1!=a.num_deleted)alert("Error - Message not Deleted. Please report to MightyText team (Error Code: DT56)");else if($(e).fadeOut(400,
function(){$(this).remove();document.getElementById("msg").innerHTML="Deleted Message";_gaq.push(["_trackEvent","WebApp","Delete-Message-Single","",1])}),10==c||11==c)a="#thread-count-live-updated-"+b,1==parseInt($(a).text())?_45c89072a4efcb3eeeee44de4f36197c7bea2008fceaa710b012273bcf5ceb6ecfa4c6ac33df185d(b):$(a).text(parseInt($(a).text())-1)}})}
function _45c89072a4efcb3eeeee44de4f36197c7bea2008fceaa710b012273bcf5ceb6ecfa4c6ac33df185d(a){$("#"+a).parent().fadeOut(600,function(){$(this).remove()});_a9fa45beaf2318c274ef4485f6bae9b99ead7a09971b38b71bc3563f1b8058464d4720b39ec538c7()}
function _b9f1b713b75c4ae081bde336b2cf06087f0c38904887ba2f87672ba178761688f401da3f9375c5e2(a,b){var c=$("ul#tabs-phone-threads li:first");console.log(c);c="#"+a;if(0<$(c).length){console.log("it is an existing thread, now check if that thread is already at top");var d=$(c).parent();console.log(d);$("ul#tabs-phone-threads li:first a").attr("id")!=a?($(c).parent().prependTo("#tabs-phone-threads").hide().slideDown(),$(c).hide().show("highlight",{color:"#F9EEC0"},2E3),setTimeout(_4c350b2036e4c2039cf2f4f93ebbbe40141931a86787f18d3d7abbe1f3e321b92358efbeb9e7d679,
200)):console.log("thread is already at the top -- don't move thread/tabs at all")}else _4994906c18d0161486398c1b41001ef3927652663e99fe9de87bd481987a42534d173b00c8d45935(a,b)}
function _4994906c18d0161486398c1b41001ef3927652663e99fe9de87bd481987a42534d173b00c8d45935(a,b){var c="",d="img/silhouette.jpg",e=!1;global_oauth_contacts_token&&(e=!0);console.log("phone_num_clean, right before jstorage get call is: "+a);var g=[];0!=a&&(g=$.jStorage.get(a,"no-jstorage-val-found"));g.name?(c=g.name,console.log(a+" - Local Storage contact match to name: "+c),""!=g.thumbnail_image_google_base_url&&(d=g.thumbnail_image_google_base_url+"&oauth_token="+global_oauth_contacts_token),g=_c2176720c0b742dd9979f6b3697f78a7194046a82f04d08240b3f8013d91cbce33de2fec499863fa()-
g.time_stored,21600<g&&e&&(console.log("should refresh local contact cache for "+a+" -- seconds old: "+g),globalContactsRefreshCacheQueue.unshift(a),setTimeout(_db43654455cdb836582f47c2ca182dcd21c4733b7736cdc66b65f58839b3b8712a1dfc77f07017f3,100))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call _e9967c253a15b438f272209014027d98e302e0808057a932075b04d84554618358af48271cee4071"),c=b,e&&(globalContactsRefreshCacheQueue.unshift(a),setTimeout(_db43654455cdb836582f47c2ca182dcd21c4733b7736cdc66b65f58839b3b8712a1dfc77f07017f3,
100)));c='<li id="tabNEW-'+a+'" class="ui-state-default ui-corner-top">'+('<a title="'+b+'" id="'+a+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+a+'" class="threadnamenumber">'+c+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+a+'">1</span>)<br> <span id="timestamp-last-msg">'+_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(new Date,!1)+"</span></span></span>");
c+='<img id="thumbnail-if-known-'+a+'" class="g-thumb-image-load-now" style="margin-right:0px;float:right" width=45 height=45 src="'+d+'"> </a></li>';setTimeout(_4c350b2036e4c2039cf2f4f93ebbbe40141931a86787f18d3d7abbe1f3e321b92358efbeb9e7d679,200);$(c).prependTo("#tabs-phone-threads").hide().slideDown()}
function _4c350b2036e4c2039cf2f4f93ebbbe40141931a86787f18d3d7abbe1f3e321b92358efbeb9e7d679(){$("#resultholder").tabs({add:function(a,b){console.log(a)}});$("#tabs-phone-threads").scrollTo("0%",400)}
function _44bb57bc1883e1cd7b43242a69e4de22593fb1d5c472e5fbad3b55db83abedc218af5cdebbd7fc83(a){var b=baseUrl+"/content?function=deleteMessagesByPhoneNum",b=b+("&phone_num_clean="+encodeURIComponent(a));console.log(b);$.ajax({url:b,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(b){0<b.num_deleted?(document.getElementById("msg").innerHTML="Deleted Thread. Number of messages deleted: "+b.num_deleted,_gaq.push(["_trackEvent","WebApp","Delete-Entire-Thread","WebAppPageView",
b.num_deleted]),_45c89072a4efcb3eeeee44de4f36197c7bea2008fceaa710b012273bcf5ceb6ecfa4c6ac33df185d(a)):alert("Error - Message Thread Not Deleted. Please try again. If it continues, please report to MightyText team (Error Code: TRDLT79)")}})}
function _a9fa45beaf2318c274ef4485f6bae9b99ead7a09971b38b71bc3563f1b8058464d4720b39ec538c7(){$("#sms-thread-content").empty();$("#thread-heading-name").empty();$("#sendbox-main").val("");$("#charsLeft-main").text("500");$("#thread-heading-actions").hide();$("#inputsms-main").hide();$("#mms-image-preview").hide();$("#mms-image-preview").attr("src","");$("#mms-blob-id-holder").text("")}
function _f1ceea1fe75488f152d8015a53bd05f38013ae26ab311bcb087b05952d354549b484215b71441b2a(a){var b="",b=$("#compose-single-text")[0]?"#send-one-text":"#sendbox-main";if(0<$(b).val().length){if(1==a)return!0;if(!confirm("You've typed text that you haven't sent. Are you sure you want to leave this page before sending this message?"))return $(b).focus(),!0}return!1}
function _96e689e0f3ce87287229ae0f36e3397f45f478f8a0e40832ad91487b379bfa7b6183155bb8afda48(a,b){console.log("Generating Tabs...");$(function(){$("#resultholder").tabs({selected:a,ajaxOptions:{error:function(a,b,e,g){$(g.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});console.log("JUST SET UP TABS");b||setTimeout("_587c49d19e0c525c60e1cbd1b91776cc18fde4cd0164a549693d057f3579be1c6d7e2fa63460d3e6();",2500);setTimeout("getAllMessagesForSearch();",1E3);setTimeout("_99b9150f5e12d0c4cf969bcac560871356716258a52c5a262e9530d7558986bbc29031d8d0242fa4();",
2E3);dynamic_content_load()});$("#resultholder").bind("tabsselect",function(a,b){var e=b.index+1;_gaq.push(["_trackEvent","WebApp","Thread-Tab-Click-Position","tab-click-position-"+e,e]);if(!$("#settingsPane")[0]&&_f1ceea1fe75488f152d8015a53bd05f38013ae26ab311bcb087b05952d354549b484215b71441b2a())return!1;if($("#compose-single-text")[0]||$("#settingsPane")[0])e=b.index,_f438fb7c5e58f4a8a52e645a9dc3bf6ab64133399e6e63a465dffe977aba5c8c444673fdba131c0f(),$("#resultholder").tabs("disable"),$("#resultholder").tabs("destroy"),
$("#resultholder").tabs({selected:e,ajaxOptions:{error:function(a,b,c,d){$(d.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0"}});document.getElementById("msg").innerHTML="";var g=b.tab.title,f=b.tab.id;console.log("TAB SELECT triggered...");var k=$("#name-if-known-"+f).text();_d47344de6cc737a80d4fb6f7126461dd1537b28804715d8a91a13434476c9d8901a422de32505b0d(f,
"END",k);_a9fa45beaf2318c274ef4485f6bae9b99ead7a09971b38b71bc3563f1b8058464d4720b39ec538c7();$("#thread-heading-name").text("");$("#thread-heading-actions").show();$("#inputsms-main").show();document.getElementById("send-button-main").onclick=function(){_gaq.push(["_trackEvent","WebApp","Send-Message-Reply-In-Thread-Click","",1]);var a;a=0==$("#mms-blob-id-holder").text().length;_1fb12ec090519ed8363cf7d0e17d6ba56dfcdfccac195bbe64af5eadd33e0cc9717a0badb77f5979(a)&&($("#send-button-main").css({background:"lightgrey",
color:"grey"}),$("#send-button-main").html("Sending\u2026"),$("#send-button-main").attr("disabled",!0),a?_39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4("send_sms","reply-thread-window",g,f,k,"_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9"):_39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4("send_mms","reply-thread-window",g,f,k,"_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9",
-999,$("#mms-blob-id-holder").text()))};document.getElementById("remote-phone-dial").onclick=function(){document.getElementById("remote-phone-dial").innerHTML="Calling from your phone...";_39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4("make_automated_call","NA",g,f,k,"_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9")};document.getElementById("delete-all-from-sender").onclick=function(){confirm("Are you sure you want to delete ALL messages for "+
g+"?")&&_44bb57bc1883e1cd7b43242a69e4de22593fb1d5c472e5fbad3b55db83abedc218af5cdebbd7fc83(f)};$("#dest-num-reminder").empty();$("#dest-num-reminder").text(g)});console.log("5555");$("#sms-container").unblock();""==location.hash?setTimeout("$('#resultholder').tabs('select' , 0);",100):setTimeout("$(location.hash).click();",100)}
function _7a3d21f15774778596c9356754972f92cd9ebe9a84d60e2c6b3ee94866d309920641bda9dbe8f52f(){!0==confirm("This will send a text message via your phone to a phone # in the USA. Press OK to proceed.")&&_39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4("send_sms","test-sms-send","+14158684689","8684689","MightyText Test #","_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9")}
function _461324f8d0e2fddd1c1740bd72d491c847b2e287d436bd4d4633fb109c682cd2f0f258c7cd532656(a){}
function sssssss_7798e42247f3cd4955ebaa1e5b396a48ee846068675af5c640c38b5ed4941432c2feddeb914652cf(a,b,c){var d=baseUrl+"/client?function=send&deviceType=ac2dm&action="+a+"&action_data="+b,e="";isCorsSupported||(d="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM",e="&wagdaedunn="+ckSharedGlobal,e+="&action="+a+"&action_data="+b);c&&(d+=c);console.log("send url for Custom C2DM is: "+d);$.ajax({url:d,global:!1,type:"POST",xhrFields:{withCredentials:!0},data:e,dataType:"text",success:function(b,
c,d){console.log(b);-1<b.search("sent to phone")?"push_phone_contacts_to_cloud"==a&&alert("Requested to refresh contacts from phone."):alert("C2DM error: "+b)},error:function(a,b,c){alert("Error in C2DM: "+c);alert("Error details: "+c.error)}})}function _c2176720c0b742dd9979f6b3697f78a7194046a82f04d08240b3f8013d91cbce33de2fec499863fa(){return Math.round((new Date).getTime()/1E3)}
function _892e33d10d79e984019ec00bd1068441587561b89cdf9e637dcff3ba9792eef8044009e51da50d79(a,b,c){"undefined"===typeof c&&(c=0);console.log("params: "+a+" ---- "+b+" --- "+c);var d=!0;"NO_CONTACTS_TOKEN"==a&&(d=!1);var e=baseUrl+"/api?function=GetDistinctMessageHeaders&CLIENT=CRX";console.log("calling AJAX - getting THREADS");$.ajax({url:e,global:!1,type:"GET",timeout:9E3,dataType:"json",xhrFields:{withCredentials:!0},error:function(d,e,k){1>c?_892e33d10d79e984019ec00bd1068441587561b89cdf9e637dcff3ba9792eef8044009e51da50d79(a,
b,c+1):_d3b87fe2eb863e8ef7992df150f53b2b5bdc40081b6e816a5ceff0d4f821756c56dd8fd82fad124a(_55c2d68d33b7911bc667900a84aac533e22b73df299754594a12288a38c946a77d6742fb985877d2)},statusCode:{500:function(){alert("Error 500")}},success:function(c,e,k){calling_from_chrome_extension||$.unblockUI();"NO_CONTACTS_TOKEN"!=a&&_8bc8fcc13494d1c58bfeb26d76e1f36cdb926a3d1c1f8bd67126a17e7562a60050fc60f3c8a38ce3(a);c.user&&-1<c.user.search("user not logged in")&&(window.location=signInUrl);var h=e=0,n=0;$.each(c.messages,
function(b,c){0==c.phone_num_clean&&(c.phone_num="Unknown / Misc");var e="",g="img/silhouette.jpg",q="",k="src",l=8;$.browser.msie&&(l=1);e=!1;"NO_CONTACTS_TOKEN"==a&&(e=!0);if(e)l=$.jStorage.get(username_prefix_jstrg_purpose+"|PC_"+c.phone_num_clean,"no-jstorage-val-found"),"no-jstorage-val-found"==l?(l=_38e009c1cb8dc79e5aac47b0203754442697f6c9372606453d9f8af8442fea08ce84ceeffb2f0a64(c.phone_num_clean),console.log("NO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean+" ... now check array loaded from cloud")):
console.log("MATCHED! LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),void 0==l?(e=c.phone_num,console.log("Phone Contacts NOT MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...NO CONTACT MATCH....for full num: "+c.phone_num)):(e=l.contactName,console.log("Phone Contacts YES MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...Contact Match: "+l.contactName+"..."+l.phoneNum),l=$.jStorage.get(username_prefix_jstrg_purpose+"|PH_PIC_"+c.phone_num_clean,"no-jstorage-val-found"),
"no-jstorage-val-found"==l?(_4bb1e39c7820efd0bd4e33a0e561449c3c0d0ec7b9c1571b370fd7054a5bf4ca20a1c64411240afe(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,99999),console.log("NO PHOTO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean)):(console.log("LOCAL PHOTO JSTORAGE ENTRY MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),console.log("Now check if actual binary image available in JSTORAGE"),2<l.contactThumbnailBinary.length?(console.log("BINARY IMAGE in local cache for "+
c.phone_num_clean),globalPHONEContactsRefreshCacheQueue.push([c.phone_num_clean,"data:image/jpeg;base64,"+l.contactThumbnailBinary])):(console.log("NO actual photo in local cache for: "+c.phone_num_clean),console.log("Now, see if C2DM request for this image was recent"),l.ts_last_c2dm_pic_request&&(l=_c2176720c0b742dd9979f6b3697f78a7194046a82f04d08240b3f8013d91cbce33de2fec499863fa()-l.ts_last_c2dm_pic_request,console.log(l+"s since last c2dm try for "+c.phone_num_clean),180>l&&(console.log("checking for image again from central MC"),
_4bb1e39c7820efd0bd4e33a0e561449c3c0d0ec7b9c1571b370fd7054a5bf4ca20a1c64411240afe(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,l))))));else{var f=[];0!=c.phone_num_clean&&(f=$.jStorage.get(c.phone_num_clean,"no-jstorage-val-found"));f.name?(e=f.name,console.log(c.phone_num_clean+" - Local Storage contact match to name: "+e),""!=f.thumbnail_image_google_base_url&&(g=f.thumbnail_image_google_base_url+"&oauth_token="+a,n++,n<l?(q="g-thumb-image-load-now",k="src"):(q="g-thumb-image-load-later",
k="srcloadlater")),l=_c2176720c0b742dd9979f6b3697f78a7194046a82f04d08240b3f8013d91cbce33de2fec499863fa()-f.time_stored,21600<l&&d&&(console.log("should refresh local contact cache for "+c.phone_num_clean+" -- seconds old: "+l),globalContactsRefreshCacheQueue.push(c.phone_num_clean))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call globalContactsRefreshCacheQueue for "+c.phone_num+" .... "+c.phone_num_clean),e=c.phone_num,d&&globalContactsRefreshCacheQueue.push(c.phone_num_clean))}calling_from_chrome_extension||
(l='<li id="tab'+b+"-"+c.phone_num_clean+'">',l+='<a title="'+c.phone_num+'" id="'+c.phone_num_clean+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+c.phone_num_clean+'" class="threadnamenumber">'+e+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+c.phone_num_clean+'">'+c.count+'</span>)<br><span id="timestamp-last-msg">'+_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(c.ts_server,
!0)+"</span></span></span>",l+='<img id="thumbnail-if-known-'+c.phone_num_clean+'" class="'+q+'" style="margin-right:0px;float:right" width=45 height=45 '+k+'="'+g+'"> ',document.getElementById("tabs-phone-threads").innerHTML+=l,document.getElementById("tabs-phone-threads").innerHTML+="</a></li>",h+=c.count)});setTimeout(_9ce829910db7910b441032348d58ac11be0b8629e7fa46c37ed4b1676ed6a5047ae6b3ad9566cedc,5E3);_cf4f1fb35707605e8581806fecc2536bb336d52483d1c2d23075b1bd21d8a57d0a9ad7480e7e7234();"NO_CONTACTS_TOKEN"!=
a&&(global_oauth_contacts_token=a,setTimeout(_db43654455cdb836582f47c2ca182dcd21c4733b7736cdc66b65f58839b3b8712a1dfc77f07017f3,1E3));setTimeout(_d2922c7559ae52a5899a1a8b21500010301ffda9b05de890cef507f5e70974e2aba0f397669d1f03,2E3);e=c.messages.length;_gaq.push(["_trackEvent","WebApp","Count-Num-Threads-Pulled","",e]);_gaq.push(["_trackEvent","WebApp","Count-Num-Total-Messages-Pulled-All-Threads","",h]);calling_from_chrome_extension||(generate_tabs(-1,b),$("#resultholder").show(),$.unblockUI())}})}
function _9ce829910db7910b441032348d58ac11be0b8629e7fa46c37ed4b1676ed6a5047ae6b3ad9566cedc(){for(var a="";0<globalQueueContactImagesToFetch.length;)a+=globalQueueContactImagesToFetch.shift(),0<globalQueueContactImagesToFetch.length&&(a+="|");0<a.length&&_7798e42247f3cd4955ebaa1e5b396a48ee846068675af5c640c38b5ed4941432c2feddeb914652cf("push_phone_contact_photos_to_cloud",a)}
function _db43654455cdb836582f47c2ca182dcd21c4733b7736cdc66b65f58839b3b8712a1dfc77f07017f3(){var a=globalContactsRefreshCacheQueue.shift();console.log("SHIFT OFF ARRAY: checking google contacts api for "+a);_e9967c253a15b438f272209014027d98e302e0808057a932075b04d84554618358af48271cee4071(a,global_oauth_contacts_token,!0);0<globalContactsRefreshCacheQueue.length&&setTimeout(_db43654455cdb836582f47c2ca182dcd21c4733b7736cdc66b65f58839b3b8712a1dfc77f07017f3,300)}
function _cf4f1fb35707605e8581806fecc2536bb336d52483d1c2d23075b1bd21d8a57d0a9ad7480e7e7234(){if(1>globalPHONEContactsRefreshCacheQueue.length)return!1;var a=globalPHONEContactsRefreshCacheQueue.shift(),b=a[1];$("#thumbnail-if-known-"+a[0]).attr("src",b);0<globalPHONEContactsRefreshCacheQueue.length&&setTimeout(_cf4f1fb35707605e8581806fecc2536bb336d52483d1c2d23075b1bd21d8a57d0a9ad7480e7e7234,100)}
function _4bb1e39c7820efd0bd4e33a0e561449c3c0d0ec7b9c1571b370fd7054a5bf4ca20a1c64411240afe(a,b,c){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContactPhotos&phone_num_clean="+a,global:!1,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:function(d,e,g){"0"!=d.phone_contact_photo_status&&0<d.phone_contact_photo_status.length?($(b).attr("src","data:image/jpeg;base64,"+d.phone_contact_photo_status),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status})):
0==d.phone_contact_photo_status.length?(console.log("photo was previously requested and sent as blank to MT system for phone num: "+a),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status},{TTL:6048E5})):28800<c&&5>globalQueueContactImagesToFetch.length&&(globalQueueContactImagesToFetch.unshift(a),e=1728E5,$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status,ts_last_c2dm_pic_request:_c2176720c0b742dd9979f6b3697f78a7194046a82f04d08240b3f8013d91cbce33de2fec499863fa()},
{TTL:e}))}})}function _50e956261a608f2b0f011f1830bed0916518e165df2db8a6cf94fff6210e75eee023e83328cd5a46(){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContacts",global:!1,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:function(a,b,c){_95300122fc03db30c6ed2b9fa95a67821c65863bcdde17637e8cb1e53978be201d08c467ac31a5b4(a)}})}
function _38e009c1cb8dc79e5aac47b0203754442697f6c9372606453d9f8af8442fea08ce84ceeffb2f0a64(a){var b;$.each(contactsFromPhoneGlobal,function(c,d){if(a==d.phoneNumClean)return b=d,$.jStorage.set(username_prefix_jstrg_purpose+"|PC_"+a,{contactName:d.contactName,phoneNum:d.phoneNum,phoneNumType:d.phoneNumType}),!1});return b}
function _95300122fc03db30c6ed2b9fa95a67821c65863bcdde17637e8cb1e53978be201d08c467ac31a5b4(a){if(0==a.contacts_status)return console.warn("No Phone contacts in cloud for this user"),!1;$.each(a,function(a,c){contactid=c.contactId;contactName=c.displayName;$.each(c.phoneList,function(a,b){phoneNumType=b.type;phoneNum=b.phoneNumber;cleanPhoneNum=_f9e48bde6455505d307dd76343e2400b2191c68547550ab77c8109a198985807ecb0f3750c3fad48(phoneNum);contactsFromPhoneGlobal.push({phoneNum:phoneNum,phoneNumType:phoneNumType,
phoneNumClean:cleanPhoneNum,contactName:contactName})})})}function _d2922c7559ae52a5899a1a8b21500010301ffda9b05de890cef507f5e70974e2aba0f397669d1f03(){var a=$(".g-thumb-image-load-later").first();a&&(a.attr({src:a.attr("srcloadlater")}),a.removeClass("g-thumb-image-load-later"),a.addClass("g-thumb-image-LOADED-later-DONE"),setTimeout(_d2922c7559ae52a5899a1a8b21500010301ffda9b05de890cef507f5e70974e2aba0f397669d1f03,300))}
function _2c6254fba425f32a85c6e042bb5397569ec14b4d68900e0057e7894505001dd3c1fd7a62df942610(){console.log("Forcing  contacts token refresh...");$.ajax({url:baseUrl+"/contact?function=revokeGoogleContactsToken",global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},error:function(a,b,c){alert("** Error in revoking google contacts token: "+c)},success:function(a,b,c){$.jStorage.flush();alert("Successfully Unlinked from Google Contacts");window.location.reload()}})}
function _0c73547e5017d69820ff9d0e75776ff88979cf106ba888cf74ed5fde8e002d79b801d43da5a4c6c4(a){console.log("*** NEW CONTACTS TOKEN REFRESH!");$.ajax({url:baseUrl+"/contact?function=refreshGoogleContactsAccessToken",global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},error:function(a,c,d){console.log("** Error in refresh_google_contacts_access_token: "+d);_892e33d10d79e984019ec00bd1068441587561b89cdf9e637dcff3ba9792eef8044009e51da50d79("NO_CONTACTS_TOKEN")},success:function(b,c,d){console.log("in force contacts token refresh -- success!");
console.log("get_new_access_token_value is: "+b);calling_from_chrome_extension&&$.jStorage.set("google_contacts_token",{contacts_token_value:b,time_captured:_c2176720c0b742dd9979f6b3697f78a7194046a82f04d08240b3f8013d91cbce33de2fec499863fa()});-1<b.search("error")?_892e33d10d79e984019ec00bd1068441587561b89cdf9e637dcff3ba9792eef8044009e51da50d79("NO_CONTACTS_TOKEN",a):_892e33d10d79e984019ec00bd1068441587561b89cdf9e637dcff3ba9792eef8044009e51da50d79(b,a)}})}
function _8bc8fcc13494d1c58bfeb26d76e1f36cdb926a3d1c1f8bd67126a17e7562a60050fc60f3c8a38ce3(a){var b="https://www.google.com/m8/feeds/contacts/default/full?alt=json&v=3.0&max-results=6000&oauth_token="+a;localGoogleContactsFeed="NOTHING-STORED";"NOTHING-STORED"==localGoogleContactsFeed?(console.log("**CONTACTS: No local contacts TOKEN stored; calling google Contacts feed using stored token"),$.ajax({url:b,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(b,d,e){console.log(b);
_e833a2313f5df4ebde8ccb9055c36cbaa877ca648ea10a65182f4ef14235b9c01bc7a308a665831d(b,a)}})):_e833a2313f5df4ebde8ccb9055c36cbaa877ca648ea10a65182f4ef14235b9c01bc7a308a665831d(localGoogleContactsFeed,a)}
function _e9967c253a15b438f272209014027d98e302e0808057a932075b04d84554618358af48271cee4071(a,b,c){console.log("in getSingleNumberContactsFeeeed");if(0==a)return 1;var d="https://www.google.com/m8/feeds/contacts/default/full?q="+a+"&alt=json&v=3.0&max-results=2000&oauth_token="+b;console.log(d);$.ajax({url:d,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontacts"+a,success:function(d,g,f){console.log("In GetSingleNumberContacts Feed. . .");console.log(d);0<d.feed.openSearch$totalResults.$t&&
_db6729386aa0f2e0c962eb35cd9f7fe682959dc2c64b8f21aaf8f0abeb7650837aa0fc91a5588570(d,b,a,c)}});return 1}
function _f7a2ef3981e27c23ef43582e224f102194faab7e62cb22c36d66d8790b639a75053780e34dd9b078(a){a=a.feed.entry;for(var b=0;b<a.length;b++){var c=a[b];console.log("name = "+c.getTitle().getText());for(var d=c.getEmailAddresses(),e=0;e<d.length;e++){var g=d[e].getAddress();console.log("email = "+g)}c=c.getPhoneNumbers();if(0==c.length)console.log("phone number = N/A");else for(e=0;e<c.length;e++)d=c[e].getValue()||"N/A",console.log("phone number = "+d)}0==a.length&&console.log("no contacts are found ")}
function _e833a2313f5df4ebde8ccb9055c36cbaa877ca648ea10a65182f4ef14235b9c01bc7a308a665831d(a,b){contacts_bkg_page=[];contacts_autocomplete_per_unique_phone_num=[];googleContactsArray=[];for(var c="",d=0,e;e=a.feed.entry[d];d++){var g={name:e.title.$t,id:e.id.$t,emails:[],phonenums:[]};g.name||(g.name=g.emails[0]||"<Unknown>");if(e.link&&e.gd$phoneNumber)for(var f=e.link,k=0,h;k<f.length;k++)h=f[k],"image/*"==h.type&&void 0!=h.gd$etag&&(c=h.href);if(e.gd$phoneNumber)for(f=e.gd$phoneNumber,k=0;k<f.length;k++){h=
f[k];g.phonenums.push(h.$t);googleContactsArray.push({name:g.name,phone_number_full:h.$t,thumbnail:c});var n=h.rel,p="";void 0===n?p="Other":0<n.search("mobile")?p="Mobile":0<n.search("work")?p="Work":0<n.search("home")&&(p="Home");contacts_autocomplete_per_unique_phone_num.push({label:g.name+" "+h.$t+" ("+p+")",value:h.$t,contact_name:g.name,type_home_mobile:h.rel,g_contact_id:e.id?e.id:""})}e.gd$phoneNumber&&contacts_bkg_page.push(g)}console.log("*** Done parsing google contacts feed*****");console.log("num entries in googleContactsArray: "+
googleContactsArray.length)}var buildLongInfoString="";
function _db6729386aa0f2e0c962eb35cd9f7fe682959dc2c64b8f21aaf8f0abeb7650837aa0fc91a5588570(a,b,c,d){console.log("number ending, to match, is: "+c);var e=_226b199aba135d1b904d5f915473d5db1aa0668650de561a227f24e43a83c388efa9d70f5e48c82b(c,7);console.log("number ending, to match, ZERO PADDED to 7 digits is: "+e);for(var g="",f="",k=!1,h=a.feed.entry.length,n=0;n<h;n++){var p=a.feed.entry[n],s=p.title.$t;if(p.link&&p.gd$phoneNumber){console.log(p.gd$phoneNumber);console.log("For number_ending="+c+' -- in entry: Link and PhoneNumber, now traverse "links" and check for image/* and gd$etag\u2026.');
for(var r=p.gd$phoneNumber,m=0,q;m<r.length;m++){q=r[m];var t=_f9e48bde6455505d307dd76343e2400b2191c68547550ab77c8109a198985807ecb0f3750c3fad48(q.$t),l=t.substring(t.length-7);console.log("For zero padded number_ending="+e+"..Phone Number in Google Contacts is: "+q.$t);console.log("Sanitized Google Contact Phone Number is: "+t);console.log("last 7 digits of  sanitized g contact # is: "+l);if(l==e)for(k=!0,""==f&&(f=s),t=p.link,q=0;q<t.length;q++)console.log("linklist index is  "+q),l=t[q],"image/*"==
l.type&&void 0!=l.gd$etag&&(console.log('found "image" and gd$etag entry in links list for contact: '+s),g=l.href,console.log("**** Single Num - GOT IMAGE FOR: "+s+" --\x3e "+g+"&oauth_token="+b))}}else if(p.gd$phoneNumber)for(console.log("For "+c+" -- At least one Phone Number found in this entry.."),p=p.gd$phoneNumber,q=0;q<p.length;q++)console.log("----------------------------------------")}k?(console.log("** Found explicit phone number match! -- Best info --- "+c+" -- Name: "+f+" -- Best Image: "+
g),newBestGoogleContactsArray.push({phone_num_clean:c,name:f,thumbnail_image:g}),$.jStorage.set(c,{name:f,thumbnail_image_google_base_url:g,time_stored:_c2176720c0b742dd9979f6b3697f78a7194046a82f04d08240b3f8013d91cbce33de2fec499863fa()}),a="",e="#name-if-known-"+c,k="#thumbnail-if-known-"+c,h=$(".ui-tabs-selected a").attr("id"),a=""==g?"img/silhouette.jpg":g+"&oauth_token="+b,d&&($(e).text(f),c==h&&$("#thread-heading-name").text(f),$(k).attr("src",a))):console.log("No contact match found based on # ending with: "+
c)}
function _d800ee7506d71c692bd7419a6ba67ce2e21a94749d792e066983d74398e8f7abcd110ac2b2b666bf(a){document.getElementById("top-notif-bar").innerHTML="";_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Current google_login_status is "+google_login_status);_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Current login_and_beta_ready is "+login_and_beta_ready);selected_tab=$("#resultholder").tabs("option","selected");void 0!=selected_tab.length&&(selected_tab=
0);void 0!=a&&(document.getElementById("msg").innerHTML=a)}function _93ee57a54fe68198b0381cd4a025aab2f4e70e59784894adcb458358e7583fffcc82c7c2cfd1fcdf(a){a="#thread-count-live-updated-"+a;$(a).text(parseInt($(a).text())+1);$(a).hide().fadeIn(600);$(a).siblings("#timestamp-last-msg").text(_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(new Date,!1))}
function _719761dc08769b671085a81e0bf5ae83f07419009095bd23f401fb82be333ca57faa2099e0bb32eb(a){a=jQuery.parseJSON(a);if(void 0!==a.new_content){if(a=a.new_content,!(-1<a.body.search("CAPI_HEALTH_CHECK")||-1<a.body.search("USER_UPDATED_SETTINGS_IN_WEBAPP"))){var b=$(".ui-tabs-selected a").attr("id");a.phone_num_clean==b&&(b="",61==a.inbox_outbox&&(b="sms-reply"),$("#sms-thread-content").append('<li id="sms-line-item-msgid-'+a.id+'" class="sms-line-item JUST-PUSHED-FROM-CLOUD '+b+'"><div id="sms-body-msgid-'+
a.id+'" class="sms-body" >'+_482b4063693b700098357647f928b1baaa20c43050bfe06b4f18585ee1efdc73b40cbf59afd79071(a.body)+'</div>  <span class="sms-time" id="unknown">(just now...)</span></li>'),$("#sms-body-msgid-"+a.id).show("highlight",{color:"#F9EEC0"},3E3),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()));if(61!=a.inbox_outbox&&84!=a.type&&85!=a.type){var c="",d="";10==a.type?(c="Message from ",d="'"+a.body+"'"):11==a.type?void 0!==a.mms_object_key?(c="MMS from ",d="'"+a.body+
"' (MMS Downloaded)"):(c="MMS from ",d="Image Downloading on Phone..."):80==a.type?c="Incoming Call from ":81==a.type&&(c="Missed Call from ");d=_482b4063693b700098357647f928b1baaa20c43050bfe06b4f18585ee1efdc73b40cbf59afd79071(d);b=[];0!=a.phone_num_clean&&(b=$.jStorage.get(a.phone_num_clean,"no-jstorage-val-found"));var e="",e=b.name?b.name:a.phone_num;$("#msg").fadeOut(500,function(){$(this).html("<B>"+c+e+': </B><span style="font-weight:normal">'+d+"</span>").fadeIn(1E3)});var g="#"+a.phone_num_clean;
objNewSettings&&0==objNewSettings.notif_toggle_on_off?(console.log("*** DONT POPUP NOTIFICATION - USER PREFERENCE"),b=!1):b=!0;if(window.webkitNotifications&&"Chrome"!=BrowserDetect.browser&&b){var f=3E4,k="";objNewSettings&&objNewSettings.notif_dismiss_time&&(f=1E3*objNewSettings.notif_dismiss_time,console.log("setting notif_dismissal_time to: "+f));var k=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click to see message...":d,h=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png",
c+e,k);h.ondisplay=function(a){inWebAppGlobalNotifArray.push(h);setTimeout("_83d19f8d0f154c2cf7d28c7961a014685e5631b5eb65e208b715d3b42fc535aebcd8d3e7fb5f2c94();",f)};h.onclick=function(a){window.focus();$(g).click();this.cancel()};h.show()}!window.webkitNotifications&&b&&(k=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click OK to see message...":d,alert(c+e+": "+k),!1==_f1ceea1fe75488f152d8015a53bd05f38013ae26ab311bcb087b05952d354549b484215b71441b2a(1)&&$(g).click())}if(10==a.type||
11==a.type)_93ee57a54fe68198b0381cd4a025aab2f4e70e59784894adcb458358e7583fffcc82c7c2cfd1fcdf(a.phone_num_clean),_b9f1b713b75c4ae081bde336b2cf06087f0c38904887ba2f87672ba178761688f401da3f9375c5e2(a.phone_num_clean,a.phone_num)}}else void 0!==a.ack_processed?(b=a.ack_processed,a="message-status-text-msgid-"+b.id,b="outbox-message-msgid-"+b.id,null!=document.getElementById(a)&&(document.getElementById(a).innerHTML='<B>Phone Sent Message</B> <img style="margin-top:5px" src="checkmark-yes.png">'),null!=
document.getElementById(b)&&(document.getElementById(b).innerHTML='<B>Phone Sent</B> <img src="checkmark-yes.png">')):console.log("unknown incoming CAPI content")}
function _f9e48bde6455505d307dd76343e2400b2191c68547550ab77c8109a198985807ecb0f3750c3fad48(a,b){for(;-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");for(;-1<a.search("[.]");)a=a.replace(".","");for(;-1<a.search("[/]");)a=a.replace("/","");for(;-1<a.search("[+]");)a=a.replace("+","");return a=!b&&7>a.length?_226b199aba135d1b904d5f915473d5db1aa0668650de561a227f24e43a83c388efa9d70f5e48c82b(a,
7):a.substring(a.length-7)}function _8b2688d95b2e247c8f6971c35e43889b1df20f101cbee2954b512d0fd0a90ff0adee993bd054b51c(){$("#resultholder").tabs("select",-1);$(".ui-tabs-selected").removeClass("ui-state-active").removeClass("ui-tabs-selected")}
function _bbefc3a36f2b1ccccb4b1ffb2dbfc3efef0d1aef832365ffc0906ff7757c14921b850b2728b7de2f(){_gaq.push(["_trackEvent","WebApp","Compose-New-Msg-Click","WebAppPageView",1]);if(!$("#settingsPane")[0]&&_f1ceea1fe75488f152d8015a53bd05f38013ae26ab311bcb087b05952d354549b484215b71441b2a())return!1;_8b2688d95b2e247c8f6971c35e43889b1df20f101cbee2954b512d0fd0a90ff0adee993bd054b51c();$("#sms-container").css("height","auto");document.getElementById("sms-container").innerHTML='<div id="compose-single-text" style="text-align:left;clear:both;font-size:18px;padding:5px;padding-left:9px;border-left:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-radius:10px">';
contact_box_prompt="Start typing a name or number...";document.getElementById("compose-single-text").innerHTML+='<h3 style="font-size:21px;margin-bottom:15px;margin-top:10px;padding-bottom:5px;border-bottom: 1px solid rgba(0,0,0,.1)"><b>New Message</b></h3><br><p><B>Send To:</B>  <span style="font-size:12px;color:#3F8CD9;margin-left:10px">(Up to 3 recipients) <a style="font-size:12px;color:#E60;float:right" href="#" onclick="alert(\'Please Note: Your carrier will count an SMS for each recipient. As a reminder, MightyText sends SMS via your phone.\');">important note</a></span></p>';
document.getElementById("compose-single-text").innerHTML+='<div id="friends" style="color:darkgrey; border:1px solid #CCC;margin:0px;margin-right:40px;padding:8px;font-size:15px;height:60px"></div>';document.getElementById("friends").innerHTML+='<input id="compose-number" type="text" size=20 name="compose-number" style="border:none;" />';document.getElementById("compose-single-text").innerHTML+="<br><p><B>Message:</B></p>";document.getElementById("compose-single-text").innerHTML+='<div id="single-text-elements">';
document.getElementById("compose-single-text").innerHTML+='<textarea id="send-one-text" value="starting val" onfocus="document.getElementById(\'error-text-content-single-text\').innerHTML=\'\';" style="float:left;height:70px;max-height:80px;width:400px;border:1px solid #CCC;margin:0px;padding:5px;font-size:16px;"></textarea>';document.getElementById("compose-single-text").innerHTML+='<span id="holder-adjacent-sendbox-single-text" style="float:left"><button id="send-button-single-text" style="font-size:14px;margin:0px;padding:7px;margin-left:18px;cclear:both" onclick="_f8fa97d5c484b1b808a0591ce28cb1f9c877781412a796c9e0c9574dd545d447b75f34a6f2e47227();"> Send</button><br><br><span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;font-family:arial;margin-left:20px" id="charsLeft-one-text"></span></span>';
document.getElementById("compose-single-text").innerHTML+='<span id="mms-canvas-single-text" style="">'+_ca2da22e0648d42ef918bd398cae91f0fa40096debf687ed19f26861f7161630996f2f6549375a5a();document.getElementById("compose-single-text").innerHTML+="</span>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+="<br><br>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+=
'<br><div id="single-text-texts" style="font-size:14px"></div>';document.getElementById("compose-single-text").innerHTML+='<br><div id="error-text-content-single-text" style="font-weight:bold;color:red;font-size:14px"></div>';$("#compose-number").focus();objNewSettings&&0==objNewSettings.enter_to_send||$("#send-one-text").unbind("keydown").keydown(function(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),$("#send-one-text").blur(),$("#send-button-single-text").click())});$("#send-one-text").NobleCount("#charsLeft-one-text");
$("#send-one-text").click(function(){0<$("#compose-number").val().length&&_b84f0bdd461f8b3e2da0248cd5dc757ef0baba9685fa7c80ca782c165c6aa5d26c6f18088eede60e()});$("#compose-number").delegate("","keydown",function(a){8==a.keyCode&&1>$("#compose-number").val().length&&$(this).prev("span").remove();188==a.keyCode&&0<$("#compose-number").val().length&&_b84f0bdd461f8b3e2da0248cd5dc757ef0baba9685fa7c80ca782c165c6aa5d26c6f18088eede60e()});$(function(){$("#compose-number").bind("keydown",function(a){a.keyCode===
$.ui.keyCode.TAB&&($(this).data("autocomplete").menu.active?a.preventDefault():_b84f0bdd461f8b3e2da0248cd5dc757ef0baba9685fa7c80ca782c165c6aa5d26c6f18088eede60e())});$("#compose-number").autocomplete({source:contacts_autocomplete_per_unique_phone_num,autoFocus:!0,delay:100,open:function(a,b){$(".ui-menu").css({"z-index":"9999"});$(".ui-menu").css({border:"1px solid #c0c0c0"});_8c7f609a2698c301fd957321aeef76959ae032f49e9daa09524566b6ee6f2192c9bf475659d5bea1()},select:function(a,b){if(_8c7f609a2698c301fd957321aeef76959ae032f49e9daa09524566b6ee6f2192c9bf475659d5bea1()){var c;
c=0<b.item.contact_name.length?'<div id="single-compose-contact-name" style="font-size:14px">'+b.item.contact_name+'</div><span id="single-compose-target-phone-num" style="border:none;font-size:12px">'+b.item.value+"</span>":b.item.value;$("<span class='contact-bubble'>").html(c).insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}},change:function(){}});$("#compose-number").autocomplete("widget").addClass("compose-single-text-autocomplete-box");$("#friends").click(function(){$("#compose-number").focus()});
$(".remove",document.getElementById("friends")).live("click",function(){$(this).parent().remove();0===$("#friends span").length&&$("#compose-number").css("top",0)})})}function _8c7f609a2698c301fd957321aeef76959ae032f49e9daa09524566b6ee6f2192c9bf475659d5bea1(){return 2<$(".contact-bubble").length?($("#compose-number").val(""),$("#compose-number").autocomplete("close"),alert("You already have selected 3 recipients."),!1):!0}
function _b84f0bdd461f8b3e2da0248cd5dc757ef0baba9685fa7c80ca782c165c6aa5d26c6f18088eede60e(){if(!(1>$("#compose-number").val().length)&&_8c7f609a2698c301fd957321aeef76959ae032f49e9daa09524566b6ee6f2192c9bf475659d5bea1()){var a;a=$("#compose-number").val().replace(",","");a=a.replace("\t","");if(_6f767fdaadf8d75c75f71e939fce754e087bb810a20d4d8b7f1f603bf0ab120a8ae7ac41c9e2863e(a)){a='<span id="single-compose-target-phone-num" style="border:none">'+a+"</span>";var b=$("<span class='contact-bubble'>").html(a);
$("<a>").addClass("remove").attr({href:"javascript:",title:"Remove "+a}).text("x").appendTo(b);b.insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}else alert(a+" is not a valid phone number"),$("#compose-number").val($("#compose-number").val().replace("\t","")),setTimeout("$('#compose-number').focus();",50)}}
function _448ec229d85de61b797d270b89ba0476b554a08fb688ececb8ee853a0fa52a02a452b24a7049783b(){var a=!1,b=0,c=[];$("#friends .contact-bubble").each(function(){$(this);var a=$(this).children("#single-compose-target-phone-num").text();_6f767fdaadf8d75c75f71e939fce754e087bb810a20d4d8b7f1f603bf0ab120a8ae7ac41c9e2863e(a)?(b++,c.push(a)):alert(a+" is not in a valid phone number.")});$("#friends input").each(function(){var d=$(this).val();0<d.length&&(b++,_6f767fdaadf8d75c75f71e939fce754e087bb810a20d4d8b7f1f603bf0ab120a8ae7ac41c9e2863e(d)?
c.push(d):(alert(d+" is not a valid number"),a=!0))});0==b?alert("No recipients entered"):a||_f98288f11bee1d1d0c90fd6df340808d774ff97968d077eb1c9f127028cb9e0a1e6c7c1e6a1a624f(c,b)}
function _f98288f11bee1d1d0c90fd6df340808d774ff97968d077eb1c9f127028cb9e0a1e6c7c1e6a1a624f(a,b){_gaq.push(["_trackEvent","WebApp","Send-Message-Compose-New-Window-Click","",b]);$("#msg").empty();$("#send-button-single-text").css({background:"lightgrey",color:"grey"});$("#send-button-single-text").html("Sending...");$("#send-button-single-text").attr("disabled",!0);var c=0==$("#mms-blob-id-holder").text().length;$(a).each(function(a,b){var g=_f9e48bde6455505d307dd76343e2400b2191c68547550ab77c8109a198985807ecb0f3750c3fad48(b,
!0);c?_39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4("send_sms","single-compose",b,g,b,_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9,a):_39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4("send_mms","single-compose",b,11111,b,"_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9",a,$("#mms-blob-id-holder").text())})}
function _66797460ffff4b887dd864d201d84b9f5e9c740af2baa2798a06c039ca0542f4bc0aca602fccc0e0(a){a=_f9e48bde6455505d307dd76343e2400b2191c68547550ab77c8109a198985807ecb0f3750c3fad48(a);return a.substring(a.length-7)}function _6f767fdaadf8d75c75f71e939fce754e087bb810a20d4d8b7f1f603bf0ab120a8ae7ac41c9e2863e(a){if(""!=a){for(i=0;i<a.length;i++){var b=a.charAt(i);if(0>"+- 1234567890()/][.".indexOf(b))return!1}return!0}return!1}
function _587c49d19e0c525c60e1cbd1b91776cc18fde4cd0164a549693d057f3579be1c6d7e2fa63460d3e6(){$.ajax({type:"GET",url:baseUrl+"/getJson?function=getChannelTokenForWebApp&client=CRX_WEBAPP&mins=120",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){console.log("Response from cloud after channel attempt (should have valid_token prepend): "+a);if(0>a.search("valid_token:"))console.log("No valid_token prepend found from Channel API!");else{a=a.replace("valid_token:","");var b=new goog.appengine.Channel(a);
console.log(b);b=b.open();b.onopen=function(){global_time_last_CAPI_msg_received_webapp=new Date;console.log("Channel Opened via Channel API with token: "+a);console.log("Current time - when channel API new socket is opened : "+Date());_gaq.push(["_trackEvent","Background","ChannelAPI-Open-Socket","",1])};b.onmessage=function(a){3>Math.floor(10*Math.random())&&_gaq.push(["_trackEvent","Background","ChannelAPI-Message-Received","",1]);global_time_last_CAPI_msg_received_webapp=new Date;console.log("**** CHANNEL SOCKET ONMESSAGE *** ");
console.log("Message arrived via CAPI= "+a.data);process_incoming_channel_api_msg(a.data)};b.onerror=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onerror callback)!!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONERROR","",1])};b.onclose=function(a){console.log("!!!!!!!!!!!!! TOKEN GONE (via onclose callback) !!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONCLOSE","",1]);setTimeout("_587c49d19e0c525c60e1cbd1b91776cc18fde4cd0164a549693d057f3579be1c6d7e2fa63460d3e6();",
300);console.log("------\x3e get a new Channel Token")}}}}).responseText}function _f074ecab29a8a2090507013c2c4da1674b624f827a1ec9eb787d39584bfac1c3728481889e355e55(){_0d716e4850fc5334e6a18059a90dccdbb7e80c08327a1b38ceed29aaba066d1f1faf6f933b479ce5();alert("Welcome to the MightyText Web App!");window.location.reload()}
function _a527a0dfb3daba21b646a1ccb13d1b3345dea6bfd1f23a269117cdbff471f6a68edd6aca4419d937(a){$.ajax({url:"uservoice_sso.php",global:!1,type:"POST",timeout:1E4,data:"useremail="+a,error:function(a,c,d){},success:function(a,c,d){0<=a.indexOf("success")?(uvOptions={sso:a.split(/\{([^}]+)\}/)[1]},a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/mJ2EXFuxIoJI4z24dEDKTA.js",c=document.getElementsByTagName("script")[0],
c.parentNode.insertBefore(a,c)):console.log("proper sso token not retrieved from uservoice helper php script")}})}function promptUserForNewContactsOauthFlow(){document.getElementById("one-off-notify-user").innerHTML='<a style="font-size:14px;color:cyan"  href="'+newContactsOAuthURL+'" onclick="">Sync with Google Contacts</a>to see names'}
function _3ef3502c75e676853cf0bd7231e3975b1c9258fce4d993ba300e7773704a11b46a793c3e1153e069(){document.getElementById("user-actions").innerHTML="";document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="positive button" onclick="if(_fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12()) {document.getElementById(\'msg\').innerHTML=\'\';_bbefc3a36f2b1ccccb4b1ffb2dbfc3efef0d1aef832365ffc0906ff7757c14921b850b2728b7de2f();}"> <span class="pen icon"></span>Compose New</button>';
document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="button" onclick="_c2c7bae7adfac6aaede5e971ef06fa123101668d219d16109c446cf3d323d696ca6cf9b79d104650();"><span class="reload icon"></span>Reload</button>';_61f6599189fe84e78a330a5dcfcdb2fc73a8a63cc01c253f213f597e4df2754a863dba5ba4885e78()}
function _fa0c37b61e8ee7bea960e7fde6a4faced411856dbc5767c17eb77d6b49ca1592af93475e39234d12(){if(google_login_status)return!0;document.getElementById("msg").innerHTML='<span style="color:black">** Unable to send any new text messages. Not signed in. ** </span>';return!1}
function _c2c7bae7adfac6aaede5e971ef06fa123101668d219d16109c446cf3d323d696ca6cf9b79d104650(){_gaq.push(["_trackEvent","WebApp","App-Reload-Within-App","WebAppPageView",1]);$("#main-section").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#resultholder").tabs("disable");$("#resultholder").tabs("destroy");$("#resultholder").unbind("tabsselect");$("#tabs-phone-threads").empty();$("#sms-thread-content").empty();
_a9fa45beaf2318c274ef4485f6bae9b99ead7a09971b38b71bc3563f1b8058464d4720b39ec538c7();_0c73547e5017d69820ff9d0e75776ff88979cf106ba888cf74ed5fde8e002d79b801d43da5a4c6c4(!0)}
function _ce126bd54dd4daaf979a2a8fe3c109e7e06ba5fe462e000c5c8bbe1538f86e72cd0dd4f3ac3fb66b(){document.getElementById("sign-in-status").innerHTML+='<img src="green-dot-icon.png"><span style="color:white;"> '+google_username_currently_logged_in+' | <a id="sign-out-link" href="'+signOutUrl+'"> Sign Out</a></span>';$("#sign-out-link").click(function(){_gaq.push(["_trackEvent","WebApp","SignOut-Link-Click","",1])})}var highlight_msg_id_from_search_global="";
function _6ef8db752cff8a28b48a7e83c2ee8b418d02ed0e40bf252ebc68d2921a7e909064c29fd95a1820fb(){$.ui.autocomplete.prototype._renderItem=function(a,b){var c=b.label.replace(RegExp("^"+this.term),"<span style='font-weight:bold;color:Blue;'>"+this.term+"</span>");return $("<li></li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)}}
function _99b9150f5e12d0c4cf969bcac560871356716258a52c5a262e9530d7558986bbc29031d8d0242fa4(){searchAutocompleteArray=[];var a=baseUrl+"/content?function=getPendingMessages&time_delay=180";console.log("getting Pending Outbound Messages");$.ajax({url:a,global:!1,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},success:function(a){$.each(a.messages,function(a,b){4>a&&$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+b.id+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">'+
b.body+" --\x3e "+b.phone_num_clean+'<span class="sms-time" id="outbox-message-msgid-'+b.id+'">Request sent. <img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span></li>')})}})}
function _d47344de6cc737a80d4fb6f7126461dd1537b28804715d8a91a13434476c9d8901a422de32505b0d(a,b,c){var d="",e="",g="",f="";"END"==b?(f="&start_range=0&end_range=40",$("#sms-thread-content").empty()):f="&start_range=40&end_range=20000";f=baseUrl+"/content?function=GetMessages"+f;console.log("Get Messages for: "+a);""!=a&&(f+="&phone_num="+encodeURIComponent(a));$.ajax({url:f,global:!1,type:"GET",timeout:9E3,dataType:"json",error:function(a,b,c){$("#main-section").unblock();$("#list-of-tabs").unblock();
_8b2688d95b2e247c8f6971c35e43889b1df20f101cbee2954b512d0fd0a90ff0adee993bd054b51c();alert("Error in GetMessages: "+c)},statusCode:{500:function(){alert("Error 500")}},success:function(f,h,n){_gaq.push(["_trackEvent","WebApp","Load-Thread-Tab-Click","WebAppPageView",1]);$("#main-section").unblock();$("#list-of-tabs").unblock();$.each(f.messages,function(a,b){var c,f="",h="";c=!1;e="";if("80"==b.type||"81"==b.type||"82"==b.type||"83"==b.type||"84"==b.type||"85"==b.type)c=!0;"61"!=b.inbox_outbox||c||
(e=" sms-reply");if("11"==b.type||"70"==b.type)h=baseUrl+"/imageserve?function=fetchFile&id="+b.id,f='<div id="mms-scale-down" style="height: 60px"><a id="fancyimagepopup" style="margin-left:25px;" href="'+h+'"> <img style="vertical-align:middle;height:100%" src="'+h+'" alt="Photo in process"></a></div>';var k="",h="";c&&(k=" calling-line-item",h=" calling-line-item-color-styling");c=""+('<li id="sms-line-item-msgid-'+b.id+'" class="sms-line-item'+e+k+'">');b.body=_482b4063693b700098357647f928b1baaa20c43050bfe06b4f18585ee1efdc73b40cbf59afd79071(b.body);
c+='<div id= "sms-body-msgid-'+b.id+'" class="sms-body'+h+'" >'+b.body+f+"</div>";f="";h=b.ts_server;2==b.status_route?f='Pending<span class="tooltip"><span>Message has been sent to MightyText. Waiting for confirmation from your phone that it got sent.</span><img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span>':99==b.status_route&&(h=b.ts_phone_forward);c+='<span class="sms-time" id="message-status-text-msgid-'+b.id+'">'+f+"</span>";b.is_starred?(star_image_url="starred.png",
star_class_at_load="starred"):(star_image_url="unstarred.png",star_class_at_load="unstarred");c=c+'<span class="sms-time">'+_6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(h,!0);c+='<a id="STAR-'+b.id+'" href="#" onclick="_0c534b89ae6fd07998059dc61364b2653dfed3729472c6a95038f5f946c5fa1d1dd1fea13d4be929(this);" class="'+star_class_at_load+'"  style="margin-left:5px;margin-right:5px"><img src="'+star_image_url+'"/></a>';c+='<a id="DELETE-MESSAGE-'+b.id+
'"" href="#" onclick="_874f7d788deeaec27f2775f0f8ff479e3246c2aa48396ec03279bae53f0a6b9ef9c4c2e0e4f850ef(\''+b.id+"','"+b.phone_num_clean+"','"+b.type+'\'  );" class="delete-message" style="visibility:hidden"><img width=11 height=12 src="trashcan.png"/></a>';c+="</span></li>";d=c+d;g="#sms-body-msgid-"+b.id});"END"==b?($("#sms-thread-content").empty(),$("#sms-thread-content").html(d),$("#thread-heading-name").text(c),40==f.messages.length&&($("#sms-thread-content").prepend("<button id='show-more-messages-prompt' class='button-angel' style='display:block;margin:0px auto;width:90%;font-size:13px;margin-bottom:20px;margin-top:10px; height:35px' onclick=''><B>\u2191 &nbsp&nbsp Show more messages &nbsp&nbsp\u2191</B></button>"),
f="_d47344de6cc737a80d4fb6f7126461dd1537b28804715d8a91a13434476c9d8901a422de32505b0d('"+a+"','"+g+"');",f+="$('#show-more-messages-prompt').html('<img id=\"getting-more-messages-graphic\" src=\"transparent-ajax-loader.gif\">');_gaq.push(['_trackEvent','WebApp','User-Click-See-More-Messages','',1]);",$("#show-more-messages-prompt").attr("onclick",f)),setTimeout('$("#sms-thread-content").scrollTop(4000000+$("#sms-thread-content").height());',10)):($("#show-more-messages-prompt").remove(),$("#sms-thread-content").prepend(d).fadeIn("slow"),
$("#sms-thread-content").scrollTo(b,4,{offset:-50}));$("#sendbox-main").focus();$("#toggle-calls").attr("checked")||$(".calling-line-item").hide();objNewSettings&&1==objNewSettings.enter_to_send&&$("#sendbox-main").unbind("keydown").keydown(function(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),$("#sendbox-main").blur(),console.log("enter triggered, and blur attempt - KEYDOWN"),$("#send-button-main").click())});""!=highlight_msg_id_from_search_global&&(f="#sms-body-msgid-"+highlight_msg_id_from_search_global,
$(f).css({"font-size":"14px","font-weight":"bolder"}),$(f).css({color:"#243443"}),$("#sms-thread-content").scrollTo(f,400,{offset:-5}));highlight_msg_id_from_search_global="";$(".sms-line-item").mouseover(function(){$(this).find(".delete-message").css("visibility","visible")});$(".sms-line-item").mouseout(function(){$(this).find(".delete-message").css("visibility","hidden")});$("a#fancyimagepopup").fancybox({type:"image",transitionIn:"elastic",transitionOut:"elastic"})}})}
function _482b4063693b700098357647f928b1baaa20c43050bfe06b4f18585ee1efdc73b40cbf59afd79071(a){for(;-1<a.search("[\n]");)a=a.replace("\n","<br >");return a=_28208c04e0c9ed0ff7eb2e2e2ab8ebcf7979e9c8cafa8114e40d0f3e5e5af125dc4f9f349cb22ea4(a)}
function _39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4(a,b,c,d,e,g,f,k){var h="",n="";"single-compose"==b?(n="#send-button-single-text",h=$("#send-one-text").val()):"test-sms-send"==b?(n="N/A",h="Sending Test SMS from MightyText"):(n="#send-button-main",h=$("#sendbox-main").val());var p="",p="",s=baseUrl+"/client?function=send";isCorsSupported||(s="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM");var r=new XMLHttpRequest;r.open("POST",s,!0);r.withCredentials=
"true";r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.onreadystatechange=function(){if(4==this.readyState&&200==r.status){var k=r.responseText;if(-1<k.indexOf("OK"))if(0<k.indexOf("phone call initiated successfully"))document.getElementById("msg").innerHTML="Your phone is now dialing "+c,document.getElementById("remote-phone-dial").innerHTML="Dial from Phone",alert("Your phone is now dialing "+c+". You should get your phone to talk.");else{if(0<k.indexOf("sent to phone")){var k=
k.split(/\{([^}]+)\}/)[1],m="";"send_sms"==a?m="SMS":"send_mms"==a&&(m="MMS");_93ee57a54fe68198b0381cd4a025aab2f4e70e59784894adcb458358e7583fffcc82c7c2cfd1fcdf(d);_b9f1b713b75c4ae081bde336b2cf06087f0c38904887ba2f87672ba178761688f401da3f9375c5e2(d,c);var l="outbox-message-msgid-"+k;$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+k+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">"'+h+'" --\x3e '+e+'<span class="sms-time" id="'+
l+'">Sending\u2026</span></li>');document.getElementById(l).innerHTML='Request sent<br>to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">';"single-compose"==b?($("#send-one-text").val(""),$("#compose-number").val(""),_bbefc3a36f2b1ccccb4b1ffb2dbfc3efef0d1aef832365ffc0906ff7757c14921b850b2728b7de2f(),$("#msg").append(m+" to "+e+"\u2026"),0==f&&$("#msg").prepend("Request sent to MightyText: ")):(document.getElementById("msg").innerHTML="Request sent to MightyText. "+
m+" to "+e,$("#mms-image-preview").hide(),$("#mms-image-preview").attr("src",""),$("#mms-blob-id-holder").text(""),$("#send-button-main").text("Send"),$("#send-button-main").attr("disabled",!1),$("#send-button-main").css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"}),$("#charsLeft-main").text("500"),m="message-status-text-msgid-"+k,h=_482b4063693b700098357647f928b1baaa20c43050bfe06b4f18585ee1efdc73b40cbf59afd79071(h),$('<li id="sms-line-item-msgid-'+
k+'"  class="sms-line-item sms-reply JUST-SENT"><div id="sms-body-msgid-'+k+'" class="sms-body" style="display:none" '+p+">"+h+'</div>  <span class="sms-time" id="'+m+'">Sending\u2026</span></li>').appendTo("#sms-thread-content"),$("#sms-body-msgid-"+k).fadeIn("fast"),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()),document.getElementById(m).innerHTML='Sent to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">',$("#sendbox-main").val(""),
setTimeout('$("#sendbox-main").focus();',0))}}else-1<k.indexOf("LOGIN_REQUIRED")?(alert("Not logged in to MightyText."),_b98ada5b8dce6c9ea573ff0b15ed8f63f338339f7b6a3377d75708ef9db6d50d2821cf30bab3cb82(n)):-1<k.indexOf("DEVICE_NOT_REGISTERED")?(alert("Android Phone not registered with MightyText with this Google Account, or MightyText Android App not installed properly."),_b98ada5b8dce6c9ea573ff0b15ed8f63f338339f7b6a3377d75708ef9db6d50d2821cf30bab3cb82(n)):-1<k.indexOf("DeviceQuotaExceeded")?(alert("Android Phone Quota Exceeded.  Error Code: DeviceQuotaExceeded (C2DM)"),
_b98ada5b8dce6c9ea573ff0b15ed8f63f338339f7b6a3377d75708ef9db6d50d2821cf30bab3cb82(n)):(alert("General Error when issuing C2DM request."),_b98ada5b8dce6c9ea573ff0b15ed8f63f338339f7b6a3377d75708ef9db6d50d2821cf30bab3cb82(n),g("general_error",r))}};if("send_sms"==a)if(-1<h.search("0-35")){var m="deviceType=ac2dm&action=set_env&action_data="+encodeURIComponent(h);alert("Switching Android Env to: "+h)}else-1<h.search("MIGHTYPROD")?(m="deviceType=ac2dm&action=set_env&action_data=prod",alert("Switching Android Env to: "+
h)):m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=send_sms&action_data="+encodeURIComponent(h);else"send_mms"==a?m="phone="+encodeURIComponent(c)+"&type=11&source_client=31&deviceType=ac2dm&action=send_mms&action_data="+encodeURIComponent(h)+"&mms_object_key="+encodeURIComponent(k):"make_automated_call"==a?m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=make_automated_call&action_data="+encodeURIComponent(h):"get_latest_messages_from_phone"==
a?m="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=get_latest_messages_from_phone&action_data="+encodeURIComponent(h):"mark_single_message_read"==a?m="deviceType=ac2dm&type=10&source_client=31&action=mark_single_message_read&action_data="+encodeURIComponent(h):"mark_whole_thread_read"==a&&(m="deviceType=ac2dm&action=mark_whole_thread_read&action_data="+encodeURIComponent(h));isCorsSupported||(m=m+"&wagdaedunn="+ckSharedGlobal);r.send(m)}
function _b98ada5b8dce6c9ea573ff0b15ed8f63f338339f7b6a3377d75708ef9db6d50d2821cf30bab3cb82(a){$(a).text("Send");$(a).attr("disabled",!1);$(a).css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"});"#send-button-main"==a?$("#sendbox-main").focus():$("#send-one-text").focus()}
function _501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9(a,b){console.log("listener called for sendSMS function. status returned is: "+a)}
function _b498551907ed221a21cbbe984585a5fb2e934bf94e7fd56dd4a60041092a5c1b1966eec2fc948abd(a){$.ajax({url:"easyXDM/easyXDM.min.js",dataType:"script",cache:!0,success:function(b,c){easyXDM.DomHelper.requiresJSON("easyXDM/json2.js");console.log(b);console.log(c);console.log("XDM JS Load was performed.");_7feed422a1bed65010732b771b460363116541f0154c4339ad44c550239f8ddcb83a3c2e7d021240(a)}})}
function _ad8f5b5961072c2f09ae2b6f28ecd1b0044ef268520739eb15b6f6ec129c7e685685d4e6549fd7bd(a,b){a=a.toString();console.log("rightmost_digits_to_find is: "+a);console.log("length of rightmost_digits_to_find is: "+a.length);7>a.length&&(a=_226b199aba135d1b904d5f915473d5db1aa0668650de561a227f24e43a83c388efa9d70f5e48c82b(a,7),console.log("after padding: "+a));for(var c=Array(2),d=0;d<googleContactsArray.length;d++){var e=_f9e48bde6455505d307dd76343e2400b2191c68547550ab77c8109a198985807ecb0f3750c3fad48(googleContactsArray[d].phone_number_full).search(a);
if(-1<e)return console.log("FOUND "+a+" in Google Contact Array- substring match position is: "+e+" matched with: "+googleContactsArray[d].phone_number_full),c[0]=googleContactsArray[d].name,c[1]=googleContactsArray[d].thumbnail,c}return""}function _68b9c46c100a25fcf4a46d4c1e5a45f09bebb8efa0f8707f7196bc498f3b3424c2e22e5dab28f162(a){return""}
function _01b5958cece32fbb70d5ee6df2abae8eda1d8c54cda12b16d255dffa856cfdd01b26652a1f8e1abf(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"}
function _63e08a2ecf1aac59e9a131e7271a9def51b85f88ae517a8b90ff50f322c2f5256fb71a72da2d6ac7(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}function _ee37795005531c4a567ee47d43ffa61935ca07ada0fe3fe819bb24099fbf1ced331e906903f257dc(a){_01b5958cece32fbb70d5ee6df2abae8eda1d8c54cda12b16d255dffa856cfdd01b26652a1f8e1abf(a,"",-1)}
function _226b199aba135d1b904d5f915473d5db1aa0668650de561a227f24e43a83c388efa9d70f5e48c82b(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function _0d716e4850fc5334e6a18059a90dccdbb7e80c08327a1b38ceed29aaba066d1f1faf6f933b479ce5(){$.ajax({type:"GET",url:baseUrl+"/whitelist?function=setBetaFlag",dataType:"json",success:function(a,b,c){window.location.reload()}}).responseText}
function _354b015335253705cb15a576aa610ab3a4847d0c29af224dbde7770b91ca027ddc4ffbb432240572(){$.blockUI({message:""});$.ajax({type:"GET",url:baseUrl+"/imageupload",dataType:"json",timeout:3E3,success:function(a,b,c){_b498551907ed221a21cbbe984585a5fb2e934bf94e7fd56dd4a60041092a5c1b1966eec2fc948abd(a);$.unblockUI();_23ceac3cb09b91679af93f4ff28c35f6146520da5a8c29fa727e5182a4a84bcd2708df748bb7e117()},error:function(a,b,c){alert("Error in getting File Upload URL: "+c);$.unblockUI();console.log("error in _354b015335253705cb15a576aa610ab3a4847d0c29af224dbde7770b91ca027ddc4ffbb432240572")}});
return!1}function _14edc0028615ef7b42a15459f302da246a1d541f04a72b69fee3315c7a0293e8345bd795316cbd69(a){$.ajax({type:"POST",url:"check_admin.php",data:{email_check_pso:a},success:function(a){"true"!=a&&(alert("No dev access!"),window.location="https://mightytext.net")}})}
function _49e6c7592a7ebf20a02ab6767b128c0aef5cc5312512819b573563da9bef3758d246ebfe2d92333e(a){$.ajax({type:"POST",url:"https://mightytext.net/app/checkpwd.php",data:{pwd:a},success:function(a){"true"==a?(_0d716e4850fc5334e6a18059a90dccdbb7e80c08327a1b38ceed29aaba066d1f1faf6f933b479ce5(),setTimeout("window.location.reload();",2E3)):(alert("Not a valid passcode..."),window.location="http://mightytext.net")}})}
function _0c534b89ae6fd07998059dc61364b2653dfed3729472c6a95038f5f946c5fa1d1dd1fea13d4be929(a){var b=$(a).attr("id").substr(5),c=baseUrl+"/content?function=updateMsgInfo";$(a).hasClass("starred")?$.ajax({type:"GET",url:c,dataType:"json",data:{id:b,is_starred:0},success:function(b){!1==b.updated?alert("Error - Message not Un-Favorited. Please report to MightyText team (Error Code: UNFAV7411)"):($(a).removeClass("starred"),$(a).addClass("unstarred"),$(a).find("img").attr("src","unstarred.png"))}}).responseText:
$.ajax({type:"GET",url:c,dataType:"json",data:{id:b,is_starred:1},success:function(b){!1==b.updated?alert("Error - Message not Favorited. Please report to MightyText team (Error Code: FAV3985)"):($(a).removeClass("unstarred"),$(a).addClass("starred"),$(a).find("img").attr("src","starred.png"))}}).responseText}
function _1b5aab7fd2f0f512d2971ef10174b099193ee85dbb88a61a8b5b77d7358141443cf9d30e0d415c72(){if(_f1ceea1fe75488f152d8015a53bd05f38013ae26ab311bcb087b05952d354549b484215b71441b2a())return!1;_8b2688d95b2e247c8f6971c35e43889b1df20f101cbee2954b512d0fd0a90ff0adee993bd054b51c();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"POST",dataType:"json",success:function(a){_e53e4f2a7d611beea0515cf5b3c62e4965886e136b28b4c108558abae77e73790992acf780147061(a.usersettings)}})}
function _2fbe36ac805f436d2e6e7f0682a99db77599f415c0b0cc82eb78ee7d889661ed235695f4a65b548e(a){if(_f1ceea1fe75488f152d8015a53bd05f38013ae26ab311bcb087b05952d354549b484215b71441b2a())return!1;_8b2688d95b2e247c8f6971c35e43889b1df20f101cbee2954b512d0fd0a90ff0adee993bd054b51c();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"GET",dataType:"json",success:function(b){a&&_e53e4f2a7d611beea0515cf5b3c62e4965886e136b28b4c108558abae77e73790992acf780147061(b.usersettings);
globalSettingsJSONUponLoad=b.usersettings;globalSettingsJSONUponLoad.settings_list?objNewSettings=jQuery.parseJSON(globalSettingsJSONUponLoad.settings_list.value):(objNewSettings=jQuery.parseJSON("{}"),_d120caab3eca3d234bd23fa724b9b1688f26e6197dc48353ab25a84918ff6f15ce3c2cdea1081566("settings_list",'{"enter_to_send":1,"notif_content":2}',!1))}})}var helperGlobalSettingsObjectSetter;
function _66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(a,b){helperGlobalSettingsObjectSetter=objNewSettings;eval("helperGlobalSettingsObjectSetter."+a+" = "+b);var c=$.toJSON(helperGlobalSettingsObjectSetter);_d120caab3eca3d234bd23fa724b9b1688f26e6197dc48353ab25a84918ff6f15ce3c2cdea1081566("settings_list",c,!0)}
function _d120caab3eca3d234bd23fa724b9b1688f26e6197dc48353ab25a84918ff6f15ce3c2cdea1081566(a,b,c){c&&$("#msg").html("Saving Settings...");var d="",e=baseUrl+"/usersettings?function=updateUserSettings",e=e+("&"+a+"="+encodeURIComponent(b));isCorsSupported||(e="https://mightytext.net/proxy-in-root.php?route=updateUserSettings",d="&wagdaedunn="+ckSharedGlobal,d+="&"+a+"="+encodeURIComponent(b));$.ajax({url:e,global:!1,xhrFields:{withCredentials:!0},type:"POST",data:d,dataType:"json",success:function(a){c&&
("success"==a.usersettings?document.getElementById("msg").innerHTML="Settings saved.":document.getElementById("msg").innerHTML="Error updating setting.",_7a5b74d35a73e7a4dddd727b1d32228405942d9df1e083d48d1e4de84e8d9d2c3671e7cae1db95e7("USER_UPDATED_SETTINGS_IN_WEBAPP:"))}})}
function _1fb12ec090519ed8363cf7d0e17d6ba56dfcdfccac195bbe64af5eadd33e0cc9717a0badb77f5979(a){var b=$("#sendbox-main").val();if(a){if(1>b.length)return alert("Message is blank"),$("#sendbox-main").focus(),!1;if(500<b.length)return alert("Message is > 500 Characters long."),!1}return!0}
function _f438fb7c5e58f4a8a52e645a9dc3bf6ab64133399e6e63a465dffe977aba5c8c444673fdba131c0f(){var a;a='<div id="holder-msg"> <div id="msg" class="user-alert" style=""></div></div><div id="sms-container"><div id="sms-thread-heading" style="float:left;width:100%;z-index:10;padding-bottom:10px;margin-bottom:0px;margin-top:0px;text-align:left;clear:both;border-bottom:1px solid #CCC;background-color:#0099CC;border-radius: 5px 5px 0px 0px;">';a+='<span id="thread-heading-name" style="font-size:22px;padding-left:10px;margin-top:13px;margin-left:5px;color:white;float:left;-webkit-text-stroke: 1px transparent;font-weight:500" class="tk-proxima-nova-condensed"></span>';
a+='<span id="thread-heading-actions" style="float:right;margin-top:5px">';a+='<button id="delete-all-from-sender" style="float:right;font-size:11px;padding:7px" class="negative button" onclick="nothing_placeholder"><span class="trash icon"></span> Delete all</button>';a+='<button id="remote-phone-dial" style="float:right;font-size:13px;margin-left:10px;padding-left:5px" class="positive" onclick="_39fccac3bd647bbd6a94ad525e04394eb12baa0d4da258b39e9375beeb2251e6e3809efd2607f5e4(\'send_sms\',\'test-SMS from stub\',111111,11111,\'_501b80306a09bf1c093379e189f526776e5f02151762fce92f905a07a8623481199299b3ab8a90b9\');"> <img height=14 width=14 style="margin-right:10px" src="phone_call_icon.png">Dial from Phone</button>';
a+='<span style="float:left;color:white;font-size:12px;margin-left:10px;margin-top:7px;margin-right:10px;padding-left:5px"><input type="checkbox" name="show-calls-toggle" value="x" id="toggle-calls" checked onclick="$(\'.calling-line-item\').toggle();"/>Show Calls</span>';a+="</span></div>";a+='<div id="sms-thread-content" class="text-message-list"></div>';a+='<div id="inputsms-main">';a+='<textarea id="sendbox-main" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-inputsms-main\').innerHTML=\'\';" style="float:left;margin-left:10px;width:60%;max-width:60%;height:50px;max-height:90%;border:1px solid #CCC;padding:5px;font-size:16px"></textarea>';
a+='<span style="margin-top:160px"></span>';a+='<span id="holder-adjacent-sendbox" style="float:left"><button id="send-button-main" style="float:left;font-size:13px;margin-left:10px" class="positive" onclick=""> <span class="mail icon"></span>Send</button>';a+='<span id="charsLeft-main" style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;margin-left:10px;margin-top:10px;clear:both;float:left"> </span>';a+="</span>";a+=_ca2da22e0648d42ef918bd398cae91f0fa40096debf687ed19f26861f7161630996f2f6549375a5a();
a+='<div id="error-text-content-inputsms-main" style="font-weight:bold;color:red;font-size:14px"></div>';a+="</div>";a+="</div>";document.getElementById("main-section").innerHTML=a;$("#sendbox-main").NobleCount("#charsLeft-main")}function _09353d0c0ab3f8055cec213c564fab6f59ffb67a5427674f55437297c338deadbb57ec839b5a6ddd(a){$(a).toggleClass("pressed")}function _e59ecbf23a43e1cb8d676ff17ab929849e8bf08cb54681f4b90af40d60f07266f34978535f8ca8c2(a,b,c){b=$(b).val().length;a-=b;$(c).text(a)}
function _ca2da22e0648d42ef918bd398cae91f0fa40096debf687ed19f26861f7161630996f2f6549375a5a(){var a;a='<button id="upload-image-mms" style="float:left;font-size:11px;margin-left:10px" class="positive" onclick="_354b015335253705cb15a576aa610ab3a4847d0c29af224dbde7770b91ca027ddc4ffbb432240572();"><img height=14 width=14 src="attach-mms-icon.png">MMS</button><div id="holder-mms-image-preview" style="height:60px;max-width: 160px;overflow: auto;border: 1px dashed lightgray;">';a+='<img id="mms-image-preview" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';
a+="</div>";a+='<span id="mms-blob-id-holder" style="display:none"></span>';return a+='<div id="mms-upload-dialog" style="display:none;text-align:left"></div>'}
function _74ba5889745a4a6dc20c26ea77cbcd4199e6dc0775c8ad34109609bf89603a816f9ef2eb7697beeb(){$("#mms-upload-dialog").empty();var a;a='<form id="frmUpload" style="font-size:20px" method="POST" target="upload_target" enctype="multipart/form-data"> <input id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="104" type="hidden" /><input id="mms-file-attach" type="file" name="myFile" onchange="_7cb4fdc467a2dec6e490df82d27ad90b28913bee40beaf72c11d9f9f4b1bdd26b3b0d9084b9c9da1();"  style="font-size:14px;font-family:arial"/><input type="submit" id="btnSubmit" style="display:none" value="Upload file"/></form>';a+=
'<br><img id="file-upload-progress-indicator" style="display:none" src="upload-progress-pie.gif">';a+='<div id="mms-upload-image-preview-pane" style="height:100px">';a+='<img id="file-just-uploaded" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';a+='<span id="file-uploaded-temp-blobid-holder-in-dialog" style="display:none"></span>';a+="</div>";$("#mms-upload-dialog").html(a)}
function _23ceac3cb09b91679af93f4ff28c35f6146520da5a8c29fa727e5182a4a84bcd2708df748bb7e117(){_74ba5889745a4a6dc20c26ea77cbcd4199e6dc0775c8ad34109609bf89603a816f9ef2eb7697beeb();$("#mms-upload-dialog").dialog({open:function(){$("#mms-dialog-button-ok").attr("disabled",!0);$("#mms-dialog-button-ok").css("color","#BFBFBF");$("#mms-dialog-button-ok").removeClass("hover")},width:400,modal:!0,title:"Attach a Picture (MMS)",buttons:[{text:"OK",id:"mms-dialog-button-ok",click:function(){$("#mms-blob-id-holder").text($("#file-uploaded-temp-blobid-holder-in-dialog").text());
var a=$("#file-just-uploaded").attr("src");$("#mms-image-preview").show();$("#mms-image-preview").attr("src",a);$(this).dialog("close")}},{text:"Cancel",id:"mms-dialog-button-cancel",click:function(){$("#mms-upload-dialog").empty();$("#mms-blob-id-holder").text("");$(this).dialog("close")}}]})}
function _7feed422a1bed65010732b771b460363116541f0154c4339ad44c550239f8ddcb83a3c2e7d021240(a){var b,c=baseUrl;new easyXDM.Rpc({remote:c+"/itest2.htm",swf:c+"/../easyxdm.swf",onReady:function(){var c=document.getElementById("mms-upload-dialog"),e=document.getElementById("frmUpload");e.action=a;e.style.display="block";c.style.display="block";b=document.getElementById("btnSubmit");e.onsubmit=function(){b.disabled="disabled";$("#file-upload-progress-indicator").show()}}},{local:{returnUploadResponse:function(a){b.disabled=
null;"success"!=a.status?alert("Error uploading attachment."):($("#mms-dialog-button-ok").attr("disabled",!1),$("#mms-dialog-button-ok").css("color","green"),$("#file-upload-progress-indicator").hide(),$("#file-just-uploaded").attr("src",baseUrl+"/imageserve?function=viewFile&blob-key="+a.blobID),$("#file-just-uploaded").show(),$("#file-uploaded-temp-blobid-holder-in-dialog").text(a.blobID))}}})}
function _7cb4fdc467a2dec6e490df82d27ad90b28913bee40beaf72c11d9f9f4b1bdd26b3b0d9084b9c9da1(){"undefined"!==typeof FileReader&&2097152<$("#mms-file-attach")[0].files[0].fileSize?alert("File too large. File upload limit is 2MB"):$("#frmUpload").submit()}var globalSettingsJSONUponLoad,objNewSettings;
function _e53e4f2a7d611beea0515cf5b3c62e4965886e136b28b4c108558abae77e73790992acf780147061(a){_gaq.push(["_trackEvent","WebApp","Settings-Pane-Load","",1]);document.getElementById("msg").innerHTML="";$("#sms-container").unblock();$("#sms-container").css("height","90%");document.getElementById("sms-container").innerHTML="";document.getElementById("sms-container").innerHTML='<h2 style="padding:10px;padding-bottom:0px;margin:0;text-align:left"><B>Settings</B></h2><div id="settingsPane" style="color:#333;padding:10px;text-align:left;background-color:white;margin-top:5px;height:90%;overflow-y:scroll"></div>';
document.getElementById("settingsPane").innerHTML+='<div id="numDaysKeepMessagesSelection" class="options-section" style="margin-top:0px"><strong>How Long to Keep Messages</strong>: How long should MightyText keep a copy of SMS, MMS, Call Logs<br><br> <select id="setting_num_days_keep" name="num_days_keep" onchange="_d120caab3eca3d234bd23fa724b9b1688f26e6197dc48353ab25a84918ff6f15ce3c2cdea1081566(this.name,this.value,true);"><option value="1">1 day</option><option value="14">14 days</option><option value="30">30 days</option><option value="60">60 days</option><option value="180">6 months</option></select></div>';
$('#setting_num_days_keep option[value="'+a.num_days_keep+'"]').attr("selected","selected");if(a.settings_list)if(objNewSettings=jQuery.parseJSON(a.settings_list.value),void 0==objNewSettings||void 0==objNewSettings.enter_to_send)objNewSettings.enter_to_send=1,_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed("enter_to_send",1);else{document.getElementById("settingsPane").innerHTML+='<div id="shouldEnterSendMessage" class="options-section"><strong>Pressing Enter to send message (when typing message)</strong><br><br> <input type="radio" name="enter_to_send" value="1" onclick="_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(this.name,this.value);">Yes, pressing Enter sends message <span style="font-size:11px;color:green">&nbsp (Can use Shift-Enter for new line)</span><br> <input type="radio" name="enter_to_send" value="0" onclick="_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(this.name,this.value);">No, pressing Enter will not send message</div>';
a='[value="'+objNewSettings.enter_to_send+'"]';$("input:radio[name=enter_to_send]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_toggle_on_off)objNewSettings.notif_toggle_on_off=1,_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed("notif_toggle_on_off",1);document.getElementById("settingsPane").innerHTML+='<div id="notificationToggleOnOff" class="options-section"><strong>Popup Notifications</strong>: Display a Popup  on Incoming SMS, MMS, Calls<br><br> <input type="radio" name="notif_toggle_on_off" value="1" onclick="_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(this.name,this.value);">Popup Notifications ON <br> <input type="radio" name="notif_toggle_on_off" value="0" onclick="_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(this.name,this.value);">Popup Notifications OFF<br></div>';
a='[value="'+objNewSettings.notif_toggle_on_off+'"]';$("input:radio[name=notif_toggle_on_off]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_dismiss_time)objNewSettings.notif_dismiss_time=9999,_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed("notif_dismiss_time",9999);document.getElementById("settingsPane").innerHTML+='<div id="notifDismiss" class="options-section"><strong>Popup Notification Auto-Close</strong>: If &amp when to automatically close Popup Notifications<br><span style="font-size:11px;color:green">(Chrome Extension & Firefox-PC only)<a onclick="_791fbc626e8e781fd6cc45561e974bedd7e3cce6410c5bfc191c8bcf849cc448ede7b7a0f0629300();"> <U>Learn more</U></a></span><br><br> <select id="setting_notif_dismiss" name="notif_dismiss_time" onchange="_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(this.name,this.value);"><option value="9999">Do Not Auto-Close</option><option value="10">After 10 seconds</option><option value="30">After 30 seconds</option><option value="60">After 1 minute</option><option value="300">After 5 minutes</option></select></div>';
$('#setting_notif_dismiss option[value="'+objNewSettings.notif_dismiss_time+'"]').attr("selected","selected");if(void 0==objNewSettings||void 0==objNewSettings.notif_content)objNewSettings.notif_content=2,_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed("notif_content",2);document.getElementById("settingsPane").innerHTML+='<div id="notificationLevelSelection" class="options-section"><strong>Popup Notification Privacy</strong>: When a new text message arrives, what to show in the popup.<br><br> <input type="radio" name="notif_content" value="2" onclick="_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(this.name,this.value);">Sender Name &amp Message Text ("<B>Message from Bob:</B> Running 15 minutes late") <br> <input type="radio" name="notif_content" value="1" onclick="_66d41700a0f66b102a25f5cd7a8e39d7c0a6077a0b6a63765cf0acb1022fc7c84ed8dcb104f221ed(this.name,this.value);">Only Sender Name ("<B>Message from Bob:</B> Click to see message...")</div>';
a='[value="'+objNewSettings.notif_content+'"]';$("input:radio[name=notif_content]").filter(a).attr("checked",!0);document.getElementById("settingsPane").innerHTML+='<div id="adminTools" class="options-section"><strong>Misc</strong><br><br>';document.getElementById("adminTools").innerHTML+='<button onclick="_7a3d21f15774778596c9356754972f92cd9ebe9a84d60e2c6b3ee94866d309920641bda9dbe8f52f();">Send a test SMS (to USA #)</button>';void 0==current_server_stored_google_contacts_token?document.getElementById("adminTools").innerHTML+=
"<button onclick=\"window.location='"+newContactsOAuthURL+"';\">Link Google Contacts</button><br>":document.getElementById("adminTools").innerHTML+='<button onclick="_2c6254fba425f32a85c6e042bb5397569ec14b4d68900e0057e7894505001dd3c1fd7a62df942610();">Unlink from Google Contacts</button><br>';document.getElementById("adminTools").innerHTML+="<button onclick=\"_7798e42247f3cd4955ebaa1e5b396a48ee846068675af5c640c38b5ed4941432c2feddeb914652cf('push_phone_contacts_to_cloud','na');\">Refresh Contacts from Phone</button>";
document.getElementById("adminTools").innerHTML+='<button onclick="_9f2ccffc23bd36534e2e3c02df49054b9a8157c945b9f0e0d41f9e4b850512b0afeeb0e313315f43();">Clear local Contact Name Cache</button>';document.getElementById("settingsPane").innerHTML+="</div>"}else objNewSettings=jQuery.parseJSON("{}"),_d120caab3eca3d234bd23fa724b9b1688f26e6197dc48353ab25a84918ff6f15ce3c2cdea1081566("settings_list",'{"enter_to_send":1,"notif_content":2}',!1)}
function _9f2ccffc23bd36534e2e3c02df49054b9a8157c945b9f0e0d41f9e4b850512b0afeeb0e313315f43(){var a=$.jStorage.index();console.log(a);$.jStorage.flush()}
function _791fbc626e8e781fd6cc45561e974bedd7e3cce6410c5bfc191c8bcf849cc448ede7b7a0f0629300(){alert("This setting will only work if running the Chrome Extension(PC or Mac), or using Firefox on a PC.  \n\n It won't work for Firefox-Mac users using Growl as the notification dismiss timeout is set within Growl.\n\nSafari & Internet Explorer users: We plan to have a notifications feature soon.")}
function _78bbb8628a4a61290812844ad92564773c5706fb2183c109175e53409e49be6824f78e1009c8dbfc(a){null==window.localStorage?_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Local storage is required!"):(a=a.value,3==a?window.localStorage.notifLevel=3:2==a?window.localStorage.notifLevel=2:1==a&&(window.localStorage.notifLevel=1),document.getElementById("msg").innerHTML="Updated Notification Preference")}
function _4e63ad78933f80c6b514c7508fda6b00ee951abbd9a6c08362fe4fff38123e22461a642879ac1693(){$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:null,max_chars:500,block_negative:!0,cloak:!1,in_dom:!1}}
function _305d48cc0b625c75afa0a37c063fbbbf9b19c8980e0779becbbb0be7aeac2f3fb96617cf69822cb4(a){null==window.localStorage?_7d60570c3484235e09d742488cbbfec2cd90cd26379402ae0cce36ac44717acce339a170c7d528aa("Local storage is required!"):(a=a.value,1==a?window.localStorage.overridePrefix=1:0==a&&(window.localStorage.overridePrefix=0),document.getElementById("msg").innerHTML="Updated +1 Override Setting",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _aee6463a7759e2795194f979ec3d8b771bea19f5f456edb70fa9c590969d9e1f3012d972f96cb056(a,b,c){a=document.getElementById(a);b=document.getElementById(b);a.value.length>c?a.value=a.value.substring(0,c):b.value=c-a.value.length}
function _a98412e3b08a6794cec803ac79389537dbe758c188b1f8d5ff721b54e732311b059d9d78582f15df(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);b='<table class="'+b+'">';if(c){b+="<thead><tr>";for(var d in a[0])b+='<th scope="col">'+d+"</th>";b+="</tr></thead>"}b+="<tbody>";for(c=0;c<a.length;c++){b+=0==c%2?'<tr class="alt">':"<tr>";for(d in a[c])b+="<td>"+a[c][d]+"</td>";b+="</tr>"}return b+="</tbody></table>"}
function _7812d7aab57dbe539fd3c377bd4703b1e3e20a3b49e1a9d5b2d953ea65bda6aba32035a40edc76bc(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);a=JSON.parse(a);b='<table class="'+b+'"><tbody>';for(var d=0;d<a.length;d++){var e=0,g;for(g in a[d])b+=0==e%2?'<tr class="alt">':"<tr>",c&&(b+='<th scope="row">'+g+"</th>"),b+="<td>"+a[d][g]+"</td>",b+="</tr>",e++}b+="</tbody>";return b+="</table>"}
function _3a778395fe9677eaf004dc56540e4a2991bcce41792ba9fff9956a7d4ceec408cc76e836471c662f(){setTimeout("_9c284e06a152903a557bbef3c78f860baa3b58cd1079707f84e8d34463f24b94d2be31d5dee9e8c1();",5E3)}function _9c284e06a152903a557bbef3c78f860baa3b58cd1079707f84e8d34463f24b94d2be31d5dee9e8c1(){$.titleAlert("New SMS Received!",{requireBlur:!1,stopOnFocus:!0,duration:3E4,interval:1500})}
function _28208c04e0c9ed0ff7eb2e2e2ab8ebcf7979e9c8cafa8114e40d0f3e5e5af125dc4f9f349cb22ea4(a){return a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a target='_blank' href='$1'>$1</a>")}function _6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposesOnlyTimeNoDay(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("h:mm a")}
function _6d61ac4f794101cf46320c4f60cc55af6bd297f34170ac2a2782a1516fe9e13d7322ae482c1bd594DisplayPurposes(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("MMM DD h:mm a")}function _305f9e84cb98a5713878c3f48d6d9dcc5fa7e511d015f9e984b26024321334a72e83f3e26b86a73d(){$.ajax({url:"https://textyserver.appspot.com/test?function=test500",global:!1,type:"POST",xhrFields:{withCredentials:!0},statusCode:{500:function(){alert("Error 500")}},success:function(a,b,c){alert(a);console.log(a)}})}
var ckSharedGlobal="";function _5f6955d227a320c7f1f6c7da2a6d96a851a8118f691143ba5312df10ebcf906b7b36fc302765d1e7(a){ckSharedGlobal=a}function _02233ac59a317f5bdfcd2062379820a71dc4b8cc0acb44cdbc0fde96602be83e1443e5b089f7689c(){$.ajax({url:baseUrl+"/test?function=showstuff",global:!1,type:"GET",timeout:8E3,dataType:"json",xhrFields:{withCredentials:!0},error:function(a,b,c){},success:function(a,b,c){}})}isCorsSupported||_02233ac59a317f5bdfcd2062379820a71dc4b8cc0acb44cdbc0fde96602be83e1443e5b089f7689c();
function _01b5958cece32fbb70d5ee6df2abae8eda1d8c54cda12b16d255dffa856cfdd01b26652a1f8e1abf(a,b,c){var d=new Date;d.setDate(d.getDate()+c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}function _01b5958cece32fbb70d5ee6df2abae8eda1d8c54cda12b16d255dffa856cfdd01b26652a1f8e1abfInSeconds(a,b,c){var d=new Date;d.setTime((new Date).getTime()+1E3*c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}
function _0088f03f1e1107cc64785132eae28d69dc94af5ef8b367b4df9dfeaea9992aa52633e6dcc862879a(){return"withCredentials"in new XMLHttpRequest?!0:!1}function _f452e4576ac689bf2e6661d2aa8087c53e1db2090ee8fba2ea2055d3b827998d662d27bc4b7b7112(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}
function _9017c3d83805ce63f02e572aaf7c8d4c05f272aa27a34fa03babaf93004d3f719d97dc5f13123bf4(){return $.ajax({type:"GET",url:"https://www.googleapis.com/plus/v1/people/me?pp=1&key=testwgda",cache:!1,jsonpCallback:"testConnection",dataType:"jsonp",success:function(a){console.log("Network ping to FB -- fine...");return!0},error:function(a){alert(1);return!1}})}
function _717ba92d6163349779214cce196192fab0025d9ee83f7664870c1105727dd99353d0bfa01b2450b5(){var a=new XMLHttpRequest;a.overrideMimeType("text/plain; charset=x-user-defined");a.open("GET","http://jonathanleighton.com/images/me.jpg",!1);a.send(null);for(var b="",c=0;c<a.responseText.length;c++)b+=String.fromCharCode(a.responseText.charCodeAt(c)&255);a="data:image/jpeg;base64,"+window.btoa(b);$("#mtlogo").attr("src",a)}
function _7a5b74d35a73e7a4dddd727b1d32228405942d9df1e083d48d1e4de84e8d9d2c3671e7cae1db95e7(a){console.log(" ");console.log("------------------------------------------------ Sending CAPI Test Message from WebApp -----------------------------------");body_text_to_send=a+" ---- "+Date();$.ajax({url:baseUrl+"/test?function=capi&body="+body_text_to_send+"&phone_num=555555555",global:!1,type:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(a){console.log(a);-1!=a.search("user not logged in")?
console.log("User is not logged in to MightyText -- found out during CAPI time check"):-1!=a.search("CAPI test sent successfully")&&console.log("Successfully SENT CAPI test message from WebAPP")}})};